/*Copyright: Â© 2022 NC Squared Ltd, All Rights Reserved*/

"use strict";var reportError=function(e){for(var t,a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++)r[s-1]=arguments[s];(t=console).error.apply(t,[e].concat(r))},blockHeight=40,blockMidOffset=24,markerOffset=12,arcRadius=12,teamBottomMargin=16,teamIconOffset=28,arcs={downCW:"c"+.65*arcRadius+",0 "+arcRadius+","+.5*arcRadius+" "+arcRadius+","+arcRadius,upCCW:"c"+.65*arcRadius+",0 "+arcRadius+","+.5*-arcRadius+" "+arcRadius+","+-arcRadius,downCCW:"c0,"+.65*arcRadius+" "+.5*arcRadius+","+arcRadius+" "+arcRadius+","+arcRadius,upCW:"c0,"+.65*-arcRadius+" "+.5*arcRadius+","+-arcRadius+" "+arcRadius+","+-arcRadius,empty:"c0,0 0,0 0,0",linear:"c0,0 0,0 "+arcRadius+",0"};function drawMainArrow(){var e=document.getElementById("n2__apv-teams"),t=document.getElementById("n2__apv-sources"),a=document.getElementById("n2__apv-main-arrow"),r=Array.from(t.getElementsByClassName("source")),s=Array.from(e.getElementsByClassName("row")),n=Array.from(e.getElementsByClassName("team"));if(e&&a&&r&&r.length&&s&&s.length){var i=a.querySelector("svg"),o=a.getBoundingClientRect();if(i){var d=o.width,c=e.offsetHeight;i.innerHTML="",i.setAttribute("viewBox","0 0 "+d+" "+c);var l=document.createElementNS("http://www.w3.org/2000/svg","g");l.classList.add("for-selection"),i.appendChild(l);var u=document.createElementNS("http://www.w3.org/2000/svg","g");u.classList.add("for-hover"),i.appendChild(u);var m=0;n.forEach(function(e){var t=Array.from(e.getElementsByClassName("row"));t.forEach(function(t,a){if(t.classList.contains("row-heading"))return!0;var n=s.indexOf(t),i=t.getAttribute("data-source"),d=0;r.forEach(function(e){if(e.getAttribute("data-source-id")===i)return d=e.getBoundingClientRect().top,!1});var c,p=d-o.top+blockMidOffset,f=m+blockMidOffset,g=m+(a+1)*blockHeight+blockMidOffset;createArrow(c=e.classList.contains("filtered")?getPathToTargetViaTeam(o.width,p,f,g):getPathToTarget(o.width,p,g),i,n,l,!1),createArrow(c,i,n,u,!0)}),m+=blockHeight,e.classList.contains("collapsed")||(m+=t.length*blockHeight),m+=teamBottomMargin})}else reportError("Arrow SVG element not found")}}function updateMainArrow(e){var t=document.getElementById("n2__apv-teams"),a=document.getElementById("n2__apv-sources"),r=document.getElementById("n2__apv-main-arrow"),s=Array.from(a.getElementsByClassName("source")),n=Array.from(t.getElementsByClassName("row")),i=Array.from(t.getElementsByClassName("team")),o=r.getBoundingClientRect(),d=0;i.forEach(function(t){var a=t.classList.contains("filtered"),r=t.classList.contains("collapsed"),i=Array.from(t.getElementsByClassName("row"));i.forEach(function(i,c){if(i.classList.contains("row-heading"))return!0;var l=n.indexOf(i),u=i.getAttribute("data-source"),m=0;s.forEach(function(e){if(e.getAttribute("data-source-id")===u)return m=e.getBoundingClientRect().top,!1});var p,f=m-o.top+blockMidOffset,g=d+blockMidOffset,v=d+(c+1)*blockHeight+blockMidOffset;p=r?getPathToTarget(o.width,f,g):a?getPathToTargetViaTeam(o.width,f,g,v):getPathToTarget(o.width,f,v);var h=document.querySelectorAll("[data-source='"+u+"'][data-row-idx='"+l+"']");if(completeTweens(h[0]),completeTweens(h[1]),t===e&&(i.classList.contains("selected-as-target")||i.classList.contains("active-as-selected")))gsap.set(h[1],{attr:{d:p},onStart:function(){r||h[1].classList.remove("marker-hidden")},onComplete:function(){if(r){h[0].classList.add("marker-hidden"),h[1].classList.add("marker-hidden");var e=h[0].getTotalLength(),t=e-h[1].getTotalLength()+arcRadius;gsap.set(h[0],{attr:{"marker-end":"","stroke-dasharray":e,"stroke-dashoffset":0}}),a&&gsap.to(h[0],{duration:.2,attr:{d:p},ease:"power1.inOut"}),gsap.to(h[0],{duration:.2,attr:{"stroke-dashoffset":t},ease:"power1.inOut",onComplete:function(){a||gsap.set(h[0],{attr:{d:p}})}})}else{var s=h[1].getTotalLength();gsap.set(h[0],{attr:{d:p,"stroke-dasharray":s}}),gsap.to(h[0],{duration:.2,attr:{"stroke-dashoffset":0},ease:"power1.inOut",onComplete:function(){h[0].classList.remove("marker-hidden"),gsap.set(h[0],{attr:{"marker-end":'url("#n2__apv-arrow-selected-end")'}})}})}}});else{r?(h[0].classList.add("marker-hidden"),h[1].classList.add("marker-hidden")):h[1].classList.remove("marker-hidden"),gsap.set(h[1],{attr:{d:p,"stroke-dashoffset":0}});var w=h[1].getTotalLength();gsap.set(h,{attr:{"stroke-dasharray":w}}),gsap.to(h[0],{duration:.3,attr:{d:p,"stroke-dashoffset":0},onComplete:function(){r||h[0].classList.remove("marker-hidden")}})}}),d+=blockHeight,r||(d+=i.length*blockHeight),d+=teamBottomMargin})}function getPathToTarget(e,t,a){var r={startPoint:"M0,"+t,firstHorizontalSegment:" H"+(.3*e-arcRadius),middleHorizontalSegment:" H"+(e-teamIconOffset-arcRadius),lastHorizontalSegment:" H"+(e-markerOffset),firstVerticalSegment:" V"+(a+arcRadius*turn(a,t)),lastVerticalSegment:" V"+a},s=r.startPoint;return s+=a>t?r.firstHorizontalSegment+arcs.downCW+r.firstVerticalSegment+arcs.downCCW+r.middleHorizontalSegment:a<t?r.firstHorizontalSegment+arcs.upCCW+r.firstVerticalSegment+arcs.upCW+r.middleHorizontalSegment:r.firstHorizontalSegment+arcs.linear+r.firstVerticalSegment+arcs.linear+r.middleHorizontalSegment,s+=arcs.linear+r.lastVerticalSegment+arcs.empty+r.lastHorizontalSegment}function getPathToTargetViaTeam(e,t,a,r){var s={startPoint:"M0,"+t,firstHorizontalSegment:" H"+(.3*e-arcRadius),middleHorizontalSegment:" H"+(e-teamIconOffset-arcRadius),lastHorizontalSegment:" H"+(e-markerOffset),firstVerticalSegment:" V"+(a+arcRadius*turn(a,t)),lastVerticalSegment:" V"+(r+arcRadius*turn(r,a))},n=s.startPoint;return n+=a>t?s.firstHorizontalSegment+arcs.downCW+s.firstVerticalSegment+arcs.downCCW+s.middleHorizontalSegment:a<t?s.firstHorizontalSegment+arcs.upCCW+s.firstVerticalSegment+arcs.upCW+s.middleHorizontalSegment:s.firstHorizontalSegment+arcs.linear+s.firstVerticalSegment+arcs.linear+s.middleHorizontalSegment,n+=arcs.downCW+s.lastVerticalSegment+arcs.downCCW+s.lastHorizontalSegment}var turn=function(e,t){return e>t?-1:t>e?1:0};function createArrow(e,t,a,r,s){var n=document.createElementNS("http://www.w3.org/2000/svg","path");if(n.setAttribute("d",e),n.setAttribute("data-source",t),n.setAttribute("data-row-idx",a.toString()),r.appendChild(n),s){var i=n.getTotalLength();n.setAttribute("stroke-dasharray",i.toString()),n.setAttribute("stroke-dashoffset",i.toString())}else n.setAttribute("marker-end","url(#n2__apv-arrow-selected-end)")}function drawArrow(e,t){completeTweens(e),gsap.set(e,{opacity:1,attr:{"marker-end":"","stroke-dasharray":e.getTotalLength()}}),gsap.fromTo(e,{attr:{"stroke-dashoffset":e.getTotalLength()}},{duration:t,attr:{"stroke-dashoffset":0},ease:"power1.inOut",onComplete:function(){gsap.set(e,{attr:{"marker-end":"url(#n2__apv-arrow-end)"}})}})}function drawArrowReverse(e,t){completeTweens(e),gsap.set(e,{opacity:1,attr:{"marker-end":"url(#n2__apv-arrow-end)","stroke-dasharray":e.getTotalLength()}}),gsap.fromTo(e,{attr:{"stroke-dashoffset":e.getTotalLength()}},{duration:t,attr:{"stroke-dashoffset":2*e.getTotalLength()},ease:"power1.inOut"})}function completeTweens(e){var t=gsap.getTweensOf(e);t&&t.forEach(function(e){return e.totalProgress(1)})}function hideArrow(e){gsap.to(e,{duration:.1,opacity:0})}var config={baseUrl:".",methodIcons:{},showObjectType:!0},itemTypes={f:"filter",al:"algorithm",as:"assignment",o:"outcome"};function appendElement(e,t,a){var r=document.createElement(t);return r.innerHTML=e,a.appendChild(r),r}function appendIcon(e,t,a,r){var s=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","use");return s.classList.add("icon"),r&&r.forEach(function(e){s.classList.add(e)}),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","".concat(config.baseUrl,"/assets/").concat(e,".svg#").concat(t)),s.appendChild(n),a.appendChild(s),s}function htmlEncode(e){var t=document.createElement("span");return t.textContent=e,t.innerHTML.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/`/g,"&#96;")}function eraseView(){gsap.globalTimeline.clear();var e=document.querySelector("#n2__apv");e&&e.parentNode&&e.parentNode.removeChild(e);var t=document.querySelector("#n2__apv-symbols");t&&t.parentNode&&t.parentNode.removeChild(t)}function getElementsByClass(e,t){return t=t||document.getElementById("n2__apv"),Array.from(t.getElementsByClassName(e))}function getElementContentByClass(e,t){var a=getElementsByClass(e,t);return a&&a.length>0?a[0].textContent:""}function getSelectionArrows(){return Array.from(document.querySelectorAll("#n2__apv-main-arrow .for-selection path"))}function getHoverArrows(){return Array.from(document.querySelectorAll("#n2__apv-main-arrow .for-hover path"))}var _handlers=[];function _addEventListener(e,t,a){_handlers.push({el:e,eventName:t,handler:a}),e.addEventListener(t,a)}function registerClickEvents(e){var t=document.getElementById("n2__apv"),a=getElementsByClass("source",t),r=getElementsByClass("team",t),s=getElementsByClass("row",t),n=getSelectionArrows();_addEventListener(document,"click",clickHandler.bind(null,e,a,r,s,n))}function clickHandler(e,t,a,r,s,n){if(n.target instanceof Element){var i=n.target.parentElement||n.target;if(i.classList.contains("source")){var o=i,d=o.getAttribute("data-source-id");clearSources(),o.classList.add("active-as-selected"),updateArrowsBySource(s,d),clearRows(r),updateTeamsAndRowsBySource(a,d,!1),clearItems(),e({type:"source",section:"name",id:o.getAttribute("data-source-id"),name:getElementContentByClass("source-name",o)})}else if(i.classList.contains("team-name")){var c=i;c.classList.add("clicked"),gsap.delayedCall(.15,function(){c.classList.remove("clicked")}),e({type:"team",section:"name",id:c.parentElement.getAttribute("data-team-id"),name:getElementContentByClass("team-name-text",c)})}else if(n.target.classList.contains("team-collapse")){var l=i.parentElement.parentElement,u=l.querySelector(".team-rows");l.classList.contains("collapsed")?gsap.to(u,{duration:.3,height:"auto"}):(updateCollapseIndicator(l),gsap.to(u,{duration:.3,height:0,transformOrigin:"0% 0%"})),l.classList.toggle("collapsed"),updateMainArrow(l)}else if(i.classList.contains("row")){var m=i;updateArrowsByTarget(s,r.indexOf(m)),clearRows(r),m.classList.add("active-as-selected"),updateTeamsByTarget(a,m.parentElement.parentElement,!1),clearSources();var p=m.getAttribute("data-source");t.forEach(function(e){if(e.getAttribute("data-source-id")===p)return e.classList.add("active-as-source"),!1}),clearItems(),e({type:"distributor",section:"name",id:m.getAttribute("data-distributor-id"),parentId:m.getAttribute("data-team-id"),name:getElementContentByClass("row-name-text",m)})}else if(i.classList.contains("item")){var f=i;clearItems(),f.classList.add("active");var g=f.parentElement.parentElement,v=g.getAttribute("data-source");updateArrowsByTarget(s,r.indexOf(g)),updateTeamsByTarget(a,g.parentElement.parentElement,!1),clearRows(r),g.classList.add("active-as-selected"),clearSources(),t.forEach(function(e){if(e.getAttribute("data-source-id")===v)return e.classList.add("active-as-source"),!1}),e({type:"distributor",section:f.getAttribute("data-type"),id:g.getAttribute("data-distributor-id"),parentId:g.getAttribute("data-team-id"),name:getElementContentByClass("row-name-text",g)})}else clearSources(),clearTeams(a),clearRows(r),clearArrows(s),clearItems()}}function registerHoverEvents(){var e=document.getElementById("n2__apv"),t=getElementsByClass("source",e),a=getElementsByClass("team",e),r=getElementsByClass("row",e),s=getHoverArrows();t.forEach(function(t){_addEventListener(t,"mouseenter",sourceHoverHandler.bind(null,t,e,a,s)),_addEventListener(t,"mouseleave",clearHovered)}),r.forEach(function(n,i){_addEventListener(n,"mouseenter",rowHoverHandler.bind(null,n,i,e,t,a,r,s)),_addEventListener(n,"mouseleave",clearHovered)})}function sourceHoverHandler(e,t,a,r){t.classList.add("active-hover"),e.classList.add("hovered");var s=e.getAttribute("data-source-id");r.forEach(function(e){e.getAttribute("data-source")===s&&drawArrow(e,.3)}),updateTeamsAndRowsBySource(a,s,!0)}function rowHoverHandler(e,t,a,r,s,n,i){a.classList.add("active-hover"),n.forEach(function(t){t.classList.add(t===e?"hovered":"not-hovered")}),i.forEach(function(a){+a.getAttribute("data-row-idx")===t&&(drawArrowReverse(a,.3),e.parentElement.parentElement.classList.add("has-hovered-targets"))});var o=e.getAttribute("data-source");r.forEach(function(e){e.getAttribute("data-source-id")===o&&e.classList.add("hovered")}),updateTeamsByTarget(s,e.parentElement.parentElement,!0)}function unregisterEvents(){for(var e=_handlers.length,t=0;t<e;t++){var a=_handlers[t];a.el.removeEventListener(a.eventName,a.handler)}}function clearSources(){getElementsByClass("source").forEach(function(e){e.classList.remove("active-as-source"),e.classList.remove("active-as-selected")})}function clearTeams(e){e.forEach(function(e){e.classList.remove("has-selected-targets"),e.querySelector(".team-filter-sum").classList.add("hidden")})}function clearRows(e){e.forEach(function(e){e.classList.remove("active-as-selected"),e.classList.remove("selected-as-target")})}function clearArrows(e){e.forEach(function(e){e.classList.remove("active")})}function clearItems(){getElementsByClass("item").forEach(function(e){return e.classList.remove("active")})}function updateArrowsByTarget(e,t){e.forEach(function(e){parseInt(e.getAttribute("data-row-idx"),10)===t?e.classList.add("active"):e.classList.remove("active")})}function updateArrowsBySource(e,t){e.forEach(function(e){e.getAttribute("data-source")===t?e.classList.add("active"):e.classList.remove("active")})}function clearHovered(){var e=document.getElementById("n2__apv");e.classList.remove("active-hover"),getElementsByClass("hovered",e).forEach(function(e){e.classList.remove("hovered")}),getElementsByClass("not-hovered",e).forEach(function(e){e.classList.remove("not-hovered")}),getHoverArrows().forEach(function(e){return hideArrow(e)}),getElementsByClass("team",e).forEach(function(e){e.classList.remove("has-hovered-targets"),updateCollapseIndicator(e)})}function updateTeamsAndRowsBySource(e,t,a){e.forEach(function(e){var r=0;getElementsByClass("row",e).forEach(function(e){e.getAttribute("data-source")===t?(e.classList.remove("not-hovered"),e.classList.add(a?"hovered":"selected-as-target"),r++):a?e.classList.add("not-hovered"):e.classList.remove("not-hovered")}),r?e.classList.add(a?"has-hovered-targets":"has-selected-targets"):e.classList.remove(a?"has-hovered-targets":"has-selected-targets"),e.classList.contains("collapsed")&&updateCollapseIndicator(e)})}function updateTeamsByTarget(e,t,a){e.forEach(function(e){e===t?e.classList.add(a?"has-hovered-targets":"has-selected-targets"):e.classList.remove(a?"has-hovered-targets":"has-selected-targets"),e.classList.contains("collapsed")&&updateCollapseIndicator(e)})}function updateCollapseIndicator(e){var t=document.getElementById("n2__apv"),a=e.querySelector(".team-filter-sum"),r=getElementsByClass("row",e),s=0;t.classList.contains("active-hover")?r.forEach(function(e){e.classList.contains("hovered")&&s++}):r.forEach(function(e){(e.classList.contains("active-as-selected")||e.classList.contains("selected-as-target"))&&s++}),a.innerHTML=s>9?"*":"".concat(s),s?a.classList.remove("hidden"):a.classList.add("hidden")}function isEqual(e,t){return""+e.toUpperCase()==""+t.toUpperCase()}function isFunction(e){return"function"==typeof e}function buildScaffold(e){e.innerHTML='\n<div id="n2__apv" class="n2-apv grid">\n  <div class="header">\n    <div class="titles">\n      <div class="title">\n        Sources\n      </div>\n      <div class="title">\n        Teams\n      </div>\n    </div>\n  </div>\n\n  <div class="content">\n    <ul id="n2__apv-sources"></ul>\n\n    <div id="n2__apv-main-arrow">\n      <svg></svg>\n    </div>\n\n    <div id="n2__apv-teams"></div>\n  </div>\n</div>\n\n  <svg id="n2__apv-symbols" class="common-symbols">\n    <defs>\n      <marker\n        id="n2__apv-arrow-end"\n        viewBox="0 0 10 10"\n        refX="0"\n        refY="3"\n        markerWidth="6.5"\n        markerHeight="6.5"\n        orient="auto"\n      >\n        <path d="M0,0 L0,6 L5,3 z"></path>\n      </marker>\n      <marker\n        id="n2__apv-arrow-selected-end"\n        viewBox="0 0 10 10"\n        refX="0"\n        refY="3"\n        markerWidth="6.5"\n        markerHeight="6.5"\n        orient="auto"\n      >\n        <path d="M0,0 L0,6 L5,3 z"></path>\n      </marker>\n      <marker\n        id="n2__apv-arrow-selected-hover-end"\n        viewBox="0 0 10 10"\n        refX="0"\n        refY="3"\n        markerWidth="6.5"\n        markerHeight="6.5"\n        orient="auto"\n      >\n        <path d="M0,0 L0,6 L5,3 z"></path>\n      </marker>\n    </defs>\n  </svg>\n  '}function buildView(e){buildPageFromData(e),drawMainArrow()}function buildPageFromData(e){buildSources(e.sources),buildTeams(e.teams),hideUnusedSources()}function hideUnusedSources(){var e=document.querySelectorAll(".n2-apv .team .row"),t=new Map;Array.from(e).filter(function(e){return!t.has(e.getAttribute("data-source"))}).map(function(e,a){var r=e.getAttribute("data-source");t.set(r,r)});var a=document.querySelectorAll("#n2__apv-sources .source");Array.from(a).filter(function(e){return null==t.get(e.getAttribute("data-source-id"))}).forEach(function(e){e.setAttribute("style","display: none")})}function buildSources(e){var t=document.getElementById("n2__apv-sources");e.forEach(function(e,a){var r=appendElement("","div",t);r.setAttribute("id","n2__apv-source-".concat(a)),r.setAttribute("data-source-id",e.id),r.classList.add("source");var s,n=appendElement("","div",r);n.classList.add("wrapper");var i,o="standard-sprite";isEqual(e.type,"Queue")?s="work_queue":isEqual(e.type,"User")?s="individual":isEqual(e.type,"Status")?(s="text_template",o="utility-sprite"):isEqual(e.type,"Trigger")?(s="forward_up",o="utility-sprite",i=["trigger-icon"]):isEqual(e.type,"Manual")&&(s="change_owner",o="utility-sprite"),appendIcon(o,s,n,i),appendElement(htmlEncode(e.name),"span",n).classList.add("source-name")})}function buildTeams(e){var t=document.getElementById("n2__apv-teams"),a=0;e.forEach(function(e,r){var s=appendElement("","div",t);s.classList.add("team");var n="n2__apv-team-".concat(r);s.setAttribute("id",n),s.setAttribute("data-team-id",e.id),s.setAttribute("data-type","team");var i=!0===e.hasObjectFilters;i&&s.classList.add("filtered");var o=appendElement("","div",s);o.classList.add("team-name"),e.isActive||o.classList.add("inactive");var d=appendElement("","div",o);d.classList.add("wrapper"),buildTeamName(e,d,i);var c=appendElement("","div",s);c.classList.add("team-rows");var l="",u=!1;e.distributors.forEach(function(e,t){if(l!==e.type)return l=e.type,u=t>0}),l="";var m="";e.distributors.forEach(function(t,r){u&&l!==t.type&&(l=t.type,m=isEqual(l,"Distributor")?"Standard":l,buildRowHeading("".concat(htmlEncode(m)," Distributors"),c)),isEqual(t.type,"Distributor")?buildRow(t,e,c,++a,n,r):isEqual(t.type,"Pull")?buildRow(t,e,c,0,n,r,"utility-sprite","advertising"):isEqual(t.type,"Trigger")?buildRow(t,e,c,0,n,r,"utility-sprite","forward_up"):isEqual(t.type,"Manual")&&buildRow(t,e,c,0,n,r,"utility-sprite","change_owner")})})}function buildTeamName(e,t,a){a?(appendIcon("non-lightningdesignsystem","team_w_filter",t),appendIcon("standard-sprite","filter",t,["icon-overlay","team-filter-icon"])):appendIcon("standard-sprite","team_member",t,["team-icon"]),appendElement("","div",t).classList.add("icon-overlay","team-filter-sum");var r='<span class="team-name-text">'.concat(htmlEncode(e.name),"</span>");config.showObjectType&&(r+="&nbsp;(".concat(htmlEncode(e.distributionObject),")")),appendElement(r,"h2",t);var s=appendElement("","div",t);s.classList.add("team-collapse","wrapper"),appendIcon("utility-sprite","chevrondown",s,["icon-collapse"])}function buildRowHeading(e,t){appendElement("<h2>".concat(htmlEncode(e),"</h2>"),"div",t).classList.add("row","row-heading")}function buildRow(e,t,a,r,s,n,i,o){var d=appendElement("","div",a);d.classList.add("row"),e.isActive&&t.isActive||d.classList.add("inactive"),d.setAttribute("id","".concat(htmlEncode(s),"-distributor-").concat(n)),d.setAttribute("data-source",e.sourceId),d.setAttribute("data-team-id",t.id),d.setAttribute("data-distributor-id",e.id);var c=appendElement("","div",d);c.classList.add("wrapper"),buildRowName(e,c,r,i,o),buildItem(e,itemTypes.f,c,!0),buildItem(e,itemTypes.al,c,!0),buildItem(e,itemTypes.as,c,!0),buildItem(e,itemTypes.o,c,!1)}function buildRowName(e,t,a,r,s){var n,i=appendElement("","div",t);(i.classList.add("row-name"),s)?(isEqual(s,"forward_up")&&(n=["trigger-icon"]),appendIcon(r,s,i,n).classList.add("wrapper")):appendElement("".concat(a,"."),"div",i).classList.add("order");appendElement(htmlEncode(e.name),"div",i).classList.add("row-name-text")}function buildItem(e,t,a,r){var s,n,i;isEqual(t,itemTypes.f)?(s="standard-sprite",n="filter"):isEqual(t,itemTypes.al)?(i=config.methodIcons[e.method.toUpperCase()])||(s="utility-sprite",n="retweet"):isEqual(t,itemTypes.as)?(s="standard-sprite",n="avatar"):isEqual(t,itemTypes.o)&&(s="utility-sprite",n="record_update");var o=appendElement("","div",a);(o.classList.add("item"),o.setAttribute("data-type",t),i)?(o.insertAdjacentHTML("beforeend",i),o.firstElementChild.classList.add("icon","wrapper")):appendIcon(s,n,o).classList.add("wrapper");r&&appendIcon("utility-sprite","play",a).classList.add("small-arrow")}var reportInitFailure=function(e){return reportError("APV failed to initialise.",e)},init=function(e){var t=e.selector,a=e.data,r=e.baseUrl,s=e.onClick,n=e.methodIcons,i=e.showObjectType,o=void 0===i||i;r&&(config.baseUrl=r),void 0!==n&&(config.methodIcons=n),config.showObjectType=o;var d=document.querySelector(t);return null===d?reportInitFailure('Selector "'.concat(t,'" returned no results. Please supply a selector for a node currently in the DOM.')):(buildScaffold(d),buildView(a),isFunction(s)?(registerClickEvents(s),void registerHoverEvents()):reportInitFailure("Click handler not provided."))},destroy=function(){unregisterEvents(),eraseView()},isSupported=function(){return void 0!==document.createElementNS("http://www.w3.org/2000/svg","svg").classList};window.n2=window.n2||{},n2.apv=n2.apv||{},n2.apv.init=function(e){var t=e.apvSelector,a=e.data,r=e.baseResourceUrl,s=e.onClick,n=e.methodIcons,i=e.showObjectType;init({selector:t,data:a,baseUrl:r,onClick:s,methodIcons:n,showObjectType:i})},n2.apv.destroy=function(){return destroy()},n2.apv.isSupported=function(){return isSupported()};