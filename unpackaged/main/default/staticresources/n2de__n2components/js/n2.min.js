/*Copyright: Â© 2020 NC Squared Ltd, All Rights Reserved*/
window.n2j$=jQuery.noConflict(),jQuery.extend(jQuery.expr[":"],{focusable:function(e,t,n){return n2j$(e).is("a[href]:not([tabindex=-1]), :input[type!=hidden]:not([disabled]):not([tabindex=-1]), [tabindex][tabindex!=-1]")}}),window.ncsquared=window.ncsquared||{},ncsquared.constants=ncsquared.constants||{},ncsquared.maps=ncsquared.maps||{},ncsquared.sf=ncsquared.sf||{},ncsquared.ui=ncsquared.ui||{},ncsquared.ui.components=ncsquared.ui.components||{},ncsquared.ui.manager=ncsquared.ui.manager||{},ncsquared.ui.wrappers=ncsquared.ui.wrappers||{},ncsquared.utils=ncsquared.utils||{},window.n2=window.n2||{},n2.const=ncsquared.constants,n2.maps=ncsquared.maps,n2.sf=ncsquared.sf,ncsquared.createPolyfills=function(){"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}),"function"!=typeof Object.is&&(Object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t})},ncsquared.createPolyfills(),svg4everybody(),ncsquared.constants.SF={},n2.const.SF.FIELDS_TYPES=["BOOLEAN","PICKLIST","REFERENCE","MULTIPICKLIST","STRING","TEXTAREA","COMBOBOX","EMAIL","PHONE","URL","ID","DOUBLE","CURRENCY","PERCENT","INTEGER","DATE","DATETIME"],n2.const.SF.OPERATORS={BOOLEAN:["equals"],PICKLIST:["equals","not equal","in"],REFERENCE:["equals","not equal","in"],MULTIPICKLIST:["equals","not equal","includes","does not include"],STRING:["equals","not equal","less than","greater than","less or equal","greater or equal","contains","starts with","ends with","in"],TEXTAREA:["equals","not equal","less than","greater than","less or equal","greater or equal","contains","starts with","ends with","in"],COMBOBOX:["equals","not equal","less than","greater than","less or equal","greater or equal","contains","starts with","ends with"],EMAIL:["equals","not equal","less than","greater than","less or equal","greater or equal","contains","starts with","ends with"],PHONE:["equals","not equal","less than","greater than","less or equal","greater or equal","contains","starts with","ends with"],URL:["equals","not equal","less than","greater than","less or equal","greater or equal","contains","starts with","ends with"],ID:["equals","not equal","less than","greater than","less or equal","greater or equal","contains","starts with","ends with"],DOUBLE:["equals","not equal","less than","greater than","less or equal","greater or equal"],CURRENCY:["equals","not equal","less than","greater than","less or equal","greater or equal"],PERCENT:["equals","not equal","less than","greater than","less or equal","greater or equal"],INTEGER:["equals","not equal","less than","greater than","less or equal","greater or equal"],DATE:["equals","not equal","less than","greater than","less or equal","greater or equal"],DATETIME:["equals","not equal","less than","greater than","less or equal","greater or equal"]},n2.const.SF.DATE_PERIODS={YESTERDAY:"Yesterday",TODAY:"Today",TOMORROW:"Tomorrow",LAST_WEEK:"Last week",THIS_WEEK:"This week",NEXT_WEEK:"Next week",LAST_MONTH:"Last month",THIS_MONTH:"This month",NEXT_MONTH:"Next month",LAST_90_DAYS:"Last 90 days",NEXT_90_DAYS:"Next 90 days",LAST_QUARTER:"Last quarter",THIS_QUARTER:"This quarter",NEXT_QUARTER:"Next quarter",LAST_YEAR:"Last year",THIS_YEAR:"This year",NEXT_YEAR:"Next year",LAST_N_DAYS:"Last n days",NEXT_N_DAYS:"Next n days",LAST_N_WEEKS:"Last n weeks",NEXT_N_WEEKS:"Next n weeks",LAST_N_MONTHS:"Last n months",NEXT_N_MONTHS:"Next n months",LAST_N_QUARTERS:"Last n quarters",NEXT_N_QUARTERS:"Next n quarters",LAST_N_YEARS:"Last n years",NEXT_N_YEARS:"Next n years"},n2.const.SF.DATE_PERIODS_FISCAL={LAST_FISCAL_QUARTER:"Last fiscal quarter",THIS_FISCAL_QUARTER:"This fiscal quarter",NEXT_FISCAL_QUARTER:"Next fiscal quarter",LAST_FISCAL_YEAR:"Last fiscal year",THIS_FISCAL_YEAR:"This fiscal year",NEXT_FISCAL_YEAR:"Next fiscal year",LAST_N_FISCAL_QUARTERS:"Last n fiscal quarters",NEXT_N_FISCAL_QUARTERS:"Next n fiscal quarters",LAST_N_FISCAL_YEARS:"Last n fiscal years",NEXT_N_FISCAL_YEARS:"Next n fiscal years"},n2.const.SF.FORMAT_OPERATORS={equals:"is","not equal":"is not","less than":"<","greater than":">","less or equal":"<=","greater or equal":">=",in:"is in"},n2.const.SF.LIST_OPERATORS=["in","includes","does not include"],n2.const.SF.NOT_OPERATORS=["not equal","does not include"],ncsquared.utils.ColorUtil={_colorRegex:/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))$/i,_colorNameRegex:/^[a-z]+$/i,_colorTestElement:null,_colorTest:"rgb(232, 124, 74)",rgbToHex:function(e){if("string"!=typeof e)return e;if(-1===e.indexOf("rgb("))return 0===e.indexOf("#")?e.toUpperCase():e;var t=e.substring(4,e.length-1).split(",");return 3!==t.length?e:"#"+((1<<24)+(Number(t[0])<<16)+(Number(t[1])<<8)+Number(t[2])).toString(16).slice(1).toUpperCase()},isValidColor:function(e){if("string"!=typeof e)return!1;if(ncsquared.utils.ColorUtil._colorRegex.test(e))return!0;if(!ncsquared.utils.ColorUtil._colorNameRegex.test(e))return!1;ncsquared.utils.ColorUtil._colorTestElement||(ncsquared.utils.ColorUtil._colorTestElement=document.createElement("span"));var t=ncsquared.utils.ColorUtil._colorTestElement;return t.style.color=ncsquared.utils.ColorUtil._colorTest,t.style.color=e,t.style.color!==ncsquared.utils.ColorUtil._colorTest}},ncsquared.utils.KeyUtil={},n2.key=ncsquared.utils.KeyUtil,n2.key.KEY_BACKSPACE=8,n2.key.KEY_TAB=9,n2.key.KEY_ENTER=13,n2.key.KEY_SHIFT=16,n2.key.KEY_CTRL=17,n2.key.KEY_ESCAPE=27,n2.key.KEY_SPACE=32,n2.key.KEY_LEFT=37,n2.key.KEY_UP=38,n2.key.KEY_RIGHT=39,n2.key.KEY_DOWN=40,n2.key.KEY_DELETE=46,ncsquared.utils.UiUtil={_staticRegex:/^static$|^$/,_overflowRegex:/auto|scroll/,_buttonTags:/BUTTON/,isJQuery:function(e){return e instanceof jQuery},renderTemplate:function(e,t,n){var s={context:t||{},sldsIconsPrefix:window.n2__sldsIconsPrefix||"/assets/icons"};return Mustache.render("{{#context}}"+e+"{{/context}}",s,n)},getScopedRoot:function(){var e=n2j$(".slds-scope").eq(0);return 0===e.length&&(e=n2j$("body")),e},getScrollableParent:function(e){var t;if(n2.ui.isJQuery(e)||(e=n2j$(e)),0<e.length&&"fixed"!==(t=e.css("position"))){var n="absolute"===t,s=e.parents().filter(function(){var e=n2j$(this);return(!n||!n2.ui._staticRegex.test(e.css("position")))&&n2.ui._overflowRegex.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))});if(0<s.length)return s.eq(0)}return n2j$(document.scrollingElement||document.documentElement)},isButtonTarget:function(e){return Boolean(e&&e.target&&n2.ui._buttonTags.test(e.target.tagName))}},n2.ui=ncsquared.utils.UiUtil,ncsquared.utils.Util={_locale:null,_timeZone:null,isNullOrUndefined:function(e){return null==e},isFunction:function(e){return"function"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)},isArray:function(e){return Array.isArray(e)},isString:function(e){return"string"==typeof e},isNumber:function(e){return("number"==typeof e||"string"==typeof e)&&!isNaN(e)},isPromise:function(e){return!n2.util.isNullOrUndefined(e)&&n2.util.isFunction(e.done)},promise:function(){return n2j$.Deferred()},clone:function(e,t){return n2.util.isArray(e)?n2.util.map(e,function(e){return n2.util.clone(e,t)}):!0===t?Object.assign({},e):n2j$.extend(!0,{},e)},getLocale:function(){if(!n2.util.isNullOrUndefined(n2.util._locale))return n2.util._locale;var e=window.n2__locale;n2.util.isNullOrUndefined(e)&&(e=navigator.language||navigator.browserLanguage);var t=(e=e.replace(/_/g,"-")).indexOf("-",3);return n2.util._locale=-1===t?e:e.substring(0,t),n2.util._locale},getTimeZone:function(){if(!n2.util.isNullOrUndefined(n2.util._timeZone))return n2.util._timeZone;var e=Intl.DateTimeFormat().resolvedOptions().timeZone;return n2.util.isNullOrUndefined(e)?n2.util._timeZone="UTC":n2.util.isNullOrUndefined(window.n2__timeZone)?n2.util._timeZone=e:n2.util._timeZone=window.n2__timeZone,n2.util._timeZone},compareObjectValues:function(e,t,n,s){var i,o=n2.util.getObjectProperty(e,n),l=n2.util.getObjectProperty(t,n);if(n2.util.isNullOrUndefined(o)){if(n2.util.isNullOrUndefined(l))return 0;o=""}return n2.util.isString(o)?(o=o.toLowerCase(),l=n2.util.isNullOrUndefined(l)?"":n2.util.isString(l)?l.toLowerCase():""+l,i=o.localeCompare(l)):i=o<l?-1:l<o?1:0,n2.util.isNullOrUndefined(s)||Boolean(s)?i:-i},getObjectProperty:function(e,t){return-1===t.indexOf(".")?e[t]:n2.util._getObjectPropertyPath(e,t.split("."))},_getObjectPropertyPath:function(e,t){return t.reduce(n2.util.getObjectProperty,e)},each:function(e,t){var n;if(n2.util.isArray(e))for(var s=e.length,i=0;i<s&&(n=e[i],!1!==t.call(n,i,n));i++);else if(n2.util.isObject(e))for(i in e)if(n=e[i],!1===t.call(n,i,n))break},eachBackwards:function(e,t){var n;if(n2.util.isArray(e))for(var s=e.length-1;0<=s&&(n=e[s],!1!==t.call(n,s,n));s--);},eachDeep:function(n,s){(n2.util.isObject(n)||n2.util.isArray(n))&&n2.util.each(n,function(e,t){return n2.util._eachDeep(n,e,t,s)})},_eachDeep:function(e,t,n,s){if(n2.util.isObject(n)||n2.util.isArray(n))n2.util.each(n,function(e,t){return n2.util._eachDeep(n,e,t,s)});else if(!1===s(e,t,n))return!1},map:function(e,t){return n2j$.map(e,t)},equalsDeep:function(n,s){if(Object.is(n,s))return!0;var i=!0;if(n2.util.isObject(n)&&n2.util.isObject(s)){var e=Object.keys(n),o=Object.keys(s);return e.length===o.length&&(n2.util.each(e,function(e,t){return-1===o.indexOf(t)?i=!1:n2.util.equalsDeep(n[t],s[t])?void 0:i=!1}),i)}return!(!n2.util.isArray(n)||!n2.util.isArray(s))&&n.length===s.length&&(n2.util.each(n,function(e,t){if(!n2.util.equalsDeep(t,s[e]))return i=!1}),i)},formatValue:function(e,t){if(n2.util.isFunction(t))return t(e);var n,s=t.split(":");switch(s[0]){case"number":case"percent":var i=1<s.length&&n2.util.isNumber(s[1])?Number(s[1]):0;return n2.util.isNumber(e)?Number(e).toLocaleString(n2.util.getLocale(),{minimumFractionDigits:i,maximumFractionDigits:i})+("percent"===s[0]?"%":""):e;case"currency":var o=1<s.length?s[1]:"";return n2.util.isNumber(e)?Number(e).toLocaleString(n2.util.getLocale(),{style:"currency",currency:o}):e;case"date":return n=n2.util.isString(e)?Date.parse(e):e,n2.util.isNumber(n)?new Date(n).toLocaleDateString(n2.util.getLocale()).replace(/\u200E/g,""):e;case"datetime":return n=n2.util.isString(e)?Date.parse(e):e,n2.util.isNumber(n)?new Date(n).toLocaleString(n2.util.getLocale(),{timeZone:n2.util.getTimeZone()}).replace(/\u200E/g,""):e;case"time":return n=n2.util.isString(e)?Date.parse(e):e,n2.util.isNumber(n)?new Date(n).toLocaleTimeString(n2.util.getLocale(),{timeZone:n2.util.getTimeZone()}).replace(/\u200E/g,""):e;case"boolean":return e&&"false"!==e?1<s.length?s[1]:"Yes":2<s.length?s[2]:"No";default:return e}},getDefaultBoolean:function(e,t){return t?!!n2.util.isNullOrUndefined(e)||Boolean(e):!0===e||"true"===e||!1},checkRequiredConfig:function(o,e,t){if(t=t||"config",n2.util.isNullOrUndefined(o))throw new Error(t+" is required");var l=[];if(n2.util.each(e,function(e,t){var n=t.split("."),s=n[0].split(":"),i=o[s[0].replace("*","")];if(n2.util.isNullOrUndefined(i))return 1===n.length?l.push(s[0]):s[0].indexOf("*")===s[0].length-1&&l.push(t.replace("*","")),!0;1<s.length&&!n2.util._checkType(i,s[1])&&l.push("{"+s[1]+"}"+s[0]),1<n.length&&(s=n[1].split(":"),n2.util.isArray(i)?n2.util.each(i,function(e,t){n2.util.isObject(t)&&(n2.util.isNullOrUndefined(t[s[0]])?l.push(n[0]+"["+e+"]."+s[0]):1<s.length&&!n2.util._checkType(t[s[0]],s[1])&&l.push(n[0]+"["+e+"].{"+s[1]+"}"+s[0]))}):n2.util.isObject(i)&&(n2.util.isNullOrUndefined(i[s[0]])?l.push(n[0]+"."+s[0]):1<s.length&&!n2.util._checkType(i[s[0]],s[1])&&l.push(n[0]+".{"+s[1]+"}"+s[0])))}),0<l.length)throw new Error("The following "+t+" properties are required: "+l.join(", "))},_checkType:function(e,t){switch(t){case"function":return n2.util.isFunction(e);case"array":return n2.util.isArray(e);case"object":return n2.util.isObject(e);case"number":return n2.util.isNumber(e);case"string":return n2.util.isString(e);default:return!0}}},n2.util=ncsquared.utils.Util,ncsquared.sf.HerokuUtil={_baseUrl:null,_authEnabled:null,_fetchAuthHeader:null,_serverTimeDifference:null,_cachedAuthHeaders:null,_environmentIdentifier:null,initNoAuth:function(e){n2.sf.heroku._baseUrl=n2.sf.heroku._cleanUrl(e),n2.sf.heroku._authEnabled=!1,n2.sf.heroku._setEnvironmentIdentifier()},initAuth:function(e,t,n,s){n2.sf.heroku._baseUrl=n2.sf.heroku._cleanUrl(e),n2.sf.heroku._authEnabled=!0,n2.sf.heroku._fetchAuthHeader=t,n2.sf.heroku._serverTimeDifference=(new Date).getTime()-n,n2.sf.heroku._cachedAuthHeaders=s||{},n2.sf.heroku._setEnvironmentIdentifier()},destroy:function(){n2.sf.heroku._baseUrl=null,n2.sf.heroku._authEnabled=null,n2.sf.heroku._fetchAuthHeader=null,n2.sf.heroku._serverTimeDifference=null,n2.sf.heroku._cachedAuthHeaders=null,n2.sf.heroku._environmentIdentifier=null},get:function(e){return n2.sf.heroku._ajax(e,"GET")},post:function(e,t){return n2.sf.heroku._ajax(e,"POST",t)},_ajax:function(e,t,n){n2.sf.heroku._checkInitialised();var s={url:n2.sf.heroku._getUrl(e),type:t,dataType:"json"};n&&(s.data=JSON.stringify(n),s.contentType="application/json; charset=utf-8");var i=n2.util.promise(),o=n2.sf.heroku._resolvePathForHeader(e);return n2.sf.heroku._checkAuth(o,t).done(function(e){e&&(s.headers=e),n2j$.ajax(s).done(function(e,t,n){i.resolve(e,t,n)}).fail(function(e,t,n){n2.sf.heroku._authEnabled&&e&&401===e.status&&delete n2.sf.heroku._cachedAuthHeaders[o],i.reject(e,t,n2.sf.heroku._getResponseError(e,n))})}).fail(function(e){i.reject(null,null,e)}),i},_checkAuth:function(t,e){var n=n2.util.promise();return n2.sf.heroku._authEnabled?!n2.sf.heroku._cachedAuthHeaders.hasOwnProperty(t)||(new Date).getTime()-n2.sf.heroku._serverTimeDifference>n2.sf.heroku._cachedAuthHeaders[t].AuthExpiry?n2.sf.heroku._fetchAuthHeader(t,e).done(function(e){n2.sf.heroku._cachedAuthHeaders[t]=e,n.resolve(n2.sf.heroku._getHeadersFromAuthHeader(e))}).fail(function(e){n.reject(e)}):n.resolve(n2.sf.heroku._getHeadersFromAuthHeader(n2.sf.heroku._cachedAuthHeaders[t])):n.resolve(),n},_getHeadersFromAuthHeader:function(e){return{Timestamp:e.AuthTimestamp,Authorization:e.AuthHeader}},_resolvePathForHeader:function(e){return 0===e.indexOf("/json/")?"/json/":0===e.indexOf("/geojson/")?"/geojson/":-1!==(t=e.indexOf("?"))?e.substring(0,t):e;var t},_getResponseError:function(e,t){return!t&&e.responseJSON&&e.responseJSON.message?e.responseJSON.message:t||"An unknown error occurred"},_checkInitialised:function(){if(n2.util.isNullOrUndefined(n2.sf.heroku._baseUrl))throw new Error("HerokuUtil not initialised with a base URL")},_setEnvironmentIdentifier:function(){n2.sf.heroku._environmentIdentifier="ei="+encodeURIComponent(window.location.host)},_cleanUrl:function(e){return e&&e.lastIndexOf("/")===e.length-1?e.substring(0,e.length-1):e},_getUrl:function(e){return 0!==e.indexOf("/")&&(e="/"+e),e+=(-1===e.indexOf("?")?"?":"&")+n2.sf.heroku._environmentIdentifier,n2.sf.heroku._baseUrl+e}},n2.sf.heroku=ncsquared.sf.HerokuUtil,ncsquared.sf.LeadMatchingUtil={RULE_ITEMS_STANDARD:'Salesforce standard rule, see <a href="https://help.salesforce.com/articleView?id={{articleId}}" target="_blank">help</a> for more details',RULE_ITEMS:"<ol>{{#matchingRuleItems}}<li>{{index}}) {{fieldName}} {{#isExactMatch}}matches exactly{{/isExactMatch}}{{^isExactMatch}}fuzzy matches {{matchingMethod}}{{/isExactMatch}}</li>{{/matchingRuleItems}}</ol>{{#booleanFilter}}<br>Logic: {{booleanFilter}}{{/booleanFilter}}",getDuplicateRulesMetadata:function(t,r){return n2.sf.MetadataUtil.queryRecordMetadata("DuplicateRule",Object.keys(t)).then(function(e){var i=[],o=[],l=function(e,t,n){if(e.matchRuleSObjectType===r){n=n2.util.clone(n),i.push(n),n.description=t.description,n.sortOrder=t.sortOrder;var s=e.matchRuleSObjectType+"."+e.matchingRule;n.matchRuleFullName=s,-1===o.indexOf(s)&&o.push(s)}};return n2.util.each(e,function(e,n){var s=t[n.fullName];n2.util.isArray(n.duplicateRuleMatchRules)?n2.util.each(n.duplicateRuleMatchRules,function(e,t){l(t,n,s)}):l(n.duplicateRuleMatchRules,n,s)}),n2.sf.LeadMatchingUtil._getMatchingRulesMetadata(i,o)})},_getMatchingRulesMetadata:function(t,e){return n2.sf.MetadataUtil.queryRecordMetadata("MatchingRule",e).then(function(e){var s={};return n2.util.each(e,function(e,t){n2.util.isObject(t.matchingRuleItems)&&(t.matchingRuleItems=[t.matchingRuleItems]);var n={label:t.label,description:t.description,items:n2.sf.LeadMatchingUtil._renderMatchRuleItems(t)};s[t.fullName]=n}),n2.util.each(t,function(e,t){var n=s[t.matchRuleFullName];n&&(t.matchRuleLabel=n.label,t.matchRuleDescription=n.description,t.matchRuleItems=n.items)}),t})},_renderMatchRuleItems:function(e){var t;return 0===e.fullName.indexOf("Account.Standard_Account_Match_Rule_v")?t="matching_rules_standard_account_rule.htm":0===e.fullName.indexOf("Contact.Standard_Contact_Match_Rule_v")?t="matching_rules_standard_contact_rule.htm":0===e.fullName.indexOf("Lead.Standard_Lead_Match_Rule_v")&&(t="matching_rules_standard_contact_rule.htm"),t?n2.ui.renderTemplate(n2.sf.LeadMatchingUtil.RULE_ITEMS_STANDARD,{articleId:t}):(n2.util.each(e.matchingRuleItems,function(e,t){t.index=e+1,"Exact"===t.matchingMethod&&(t.isExactMatch=!0)}),n2.ui.renderTemplate(n2.sf.LeadMatchingUtil.RULE_ITEMS,e))}},ncsquared.sf.MetadataUtil={QUERY_REQUEST:'<?xml version="1.0" encoding="utf-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><env:Header><urn:SessionHeader xmlns:urn="http://soap.sforce.com/2006/04/metadata"><urn:sessionId>{{sessionId}}</urn:sessionId></urn:SessionHeader></env:Header><env:Body><readMetadata xmlns="http://soap.sforce.com/2006/04/metadata"><type>{{type}}</type>{{#fullNames}}<fullNames>{{.}}</fullNames>{{/fullNames}}</readMetadata></env:Body></env:Envelope>',_url:null,_sessionId:null,init:function(e,t){n2.sf.MetadataUtil._url="https://"+e+"/services/Soap/m/45.0",n2.sf.MetadataUtil._sessionId=t},destroy:function(){n2.sf.MetadataUtil._url=null,n2.sf.MetadataUtil._sessionId=null},xmlToJson:function(e){if(n2.util.isNumber(e.length)&&n2.util.isFunction(e.item)){for(var t=e.length,n=[],s=0;s<t;s++)n.push(n2.sf.MetadataUtil.xmlToJson(e.item(s)));return n}if(e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.DOCUMENT_NODE){if(e.hasChildNodes()){var i=e.childNodes.length;if(1===i&&e.firstChild.nodeType===Node.TEXT_NODE)return e.firstChild.nodeValue;for(var o={},l=0;l<i;l++){var r=e.childNodes.item(l),a=r.nodeName,d=n2.sf.MetadataUtil.xmlToJson(r);if(!n2.util.isNullOrUndefined(d))if(o.hasOwnProperty(a)){if(!n2.util.isArray(o[a])){var c=o[a];o[a]=[],o[a].push(c)}o[a].push(d)}else o[a]=d}return o}}else if(e.nodeType===Node.TEXT_NODE)return e.nodeValue},queryRecordMetadata:function(e,t){var l=n2.sf.MetadataUtil;if(l._checkInitialised(),0===t.length)return n2.util.promise().resolve([]);var n={url:l._url,type:"POST",data:n2.ui.renderTemplate(l.QUERY_REQUEST,{sessionId:l._sessionId,type:e,fullNames:t}),contentType:"text/xml",dataType:"xml",headers:{SOAPAction:'""'}},r=n2.util.promise();return n2j$.ajax(n).done(function(e){var t=e.getElementsByTagName("errors");if(t&&0<t.length){var n=l.xmlToJson(t),s=n2.util.map(n,function(e){return e.message});r.reject(s.join(", "))}else{var i=e.getElementsByTagName("records");if(i&&0<i.length){var o=l.xmlToJson(i);r.resolve(o)}else r.resolve([])}}).fail(function(e,t,n){if(e.responseXML){var s=e.responseXML.getElementsByTagName("faultstring");s&&0<s.length&&(n=s.item(0).firstChild.nodeValue)}r.reject(n||e.status)}),r},_checkInitialised:function(){if(n2.util.isNullOrUndefined(n2.sf.MetadataUtil._url))throw new Error("MetadataUtil not initialised with a URL")}},ncsquared.sf.SFUtil={BODY_DIV_BORDER:3,CELL_AND_DIV_PADDING:40,_headerOuterHeight:null,_footerOuterHeight:null,isInClassic:function(){return"undefined"==typeof sforce||void 0===sforce.one},navigate:function(e,t){var n="/apex/"+e;t&&(n+="?"+t),n2.sf.util.isInClassic()?n2.sf.util._setParentLocation(n):sforce.one.navigateToURL(n)},navigateToObject:function(e){n2.sf.util.isInClassic()?n2.sf.util._setParentLocation("/"+e):sforce.one.navigateToSObject(e)},_setParentLocation:function(e){window.parent.location=e},fullHeightClassic:function(){n2.sf.util._headerOuterHeight=n2.sf.util._headerOuterHeight||n2j$("div.bPageHeader").outerHeight(),n2.sf.util._footerOuterHeight=n2.sf.util._footerOuterHeight||n2j$("div.bPageFooter").outerHeight();var e=n2j$("body").outerHeight()-n2.sf.util._headerOuterHeight-n2.sf.util._footerOuterHeight-n2.sf.util.BODY_DIV_BORDER,t=n2j$("td.slds-scope");t.closest("table").css("height",e),t.find("div.slds-scope").eq(0).css("height",e-n2.sf.util.CELL_AND_DIV_PADDING)},checkFullHeightClassic:function(){n2.sf.util.isInClassic()&&(n2.sf.util.fullHeightClassic(),n2j$(window).resize(n2.sf.util.fullHeightClassic))},formatFilters:function(e,t){if(t=n2.util.isObject(t)?t:{},n2.util.isArray(e)&&0<e.length){var n=e[0],s="<i>"+(t[n.name]||n.name||"")+"</i> "+(n2.const.SF.FORMAT_OPERATORS[n.op]||n.op||"")+" ";return-1===n2.const.SF.LIST_OPERATORS.indexOf(n.op)?s+=n2.sf.util._getFormattedValue(n.val,n.type):(s+="(",s+=n.val.split(";").map(function(e){return n2.sf.util._getFormattedValue(e,n.type)}).join(", "),s+=")"),s}return""},_getFormattedValue:function(e,t){if(n2.util.isNullOrUndefined(e))return"";switch(t){case"DOUBLE":case"CURRENCY":return n2.util.formatValue(e,"number:2");case"PERCENT":return n2.util.formatValue(e,"percent");case"INTEGER":return n2.util.formatValue(e,"number");case"DATE":case"DATETIME":return n2.sf.util._getFormattedDatePeriod(e,t);case"BOOLEAN":return n2.util.formatValue(e,"boolean:true:false");default:return"'"+e+"'"}},_getFormattedDatePeriod:function(e,t){var n=e.split(":"),s=n[0];if(n2.const.SF.DATE_PERIODS.hasOwnProperty(s))s=n2.const.SF.DATE_PERIODS[s];else{if(!n2.const.SF.DATE_PERIODS_FISCAL.hasOwnProperty(s))return"'"+n2.util.formatValue(e,t.toLowerCase())+"'";s=n2.const.SF.DATE_PERIODS_FISCAL[s]}return 1<n.length&&-1!==s.indexOf(" n ")?s.replace(" n "," "+n[1]+" "):s},getOperatorsForFieldType:function(e,t){var n=n2.const.SF.OPERATORS[e];return n2.util.isArray(n)&&n2.util.isArray(t)&&0<t.length?n2.util.map(n,function(e){return-1===t.indexOf(e)?e:null}):n},getMessageFromEvent:function(e,t){var n=n2.util.isNullOrUndefined(t)?"":t.message;if(n&&0===n.indexOf("{")){var s=JSON.parse(n);n=s.message?s.message:s.error}return e&&n?e+": "+n:e||n}},n2.sf.util=ncsquared.sf.SFUtil,ncsquared.ui.manager.ComponentManager={_types:{},_components:{},_childComponents:[],_modalComponents:[],_tableComponents:[],_currentId:null,addComponent:function(e,t,n){if(!e||!this._types.hasOwnProperty(e))throw new Error("Invalid type: "+e);if(n2.util.checkRequiredConfig(t,["id","selector"]),t.id=this._getId(t.id),this._components.hasOwnProperty(t.id))throw new Error("Component with id "+t.id+" already exists");this._initType(e),this._currentId=t.id;var s=new this._types[e](t);return s._n2Id=t.id,this._currentId=null,this._components[t.id]=s,!0===n&&this._childComponents.push(t.id),s},destroyComponent:function(e){var t,n=this.getComponent(e);n&&(n.destroy&&n.destroy(),delete this._components[n._n2Id],-1!==(t=this._childComponents.indexOf(n._n2Id))&&this._childComponents.splice(t,1),-1!==(t=this._modalComponents.indexOf(n._n2Id))&&this._modalComponents.splice(t,1),-1!==(t=this._tableComponents.indexOf(n._n2Id))&&this._tableComponents.splice(t,1))},destroyComponents:function(){n2.util.each(this._components,function(e,t){t.destroy&&t.destroy()}),this._components={},this._childComponents=[],this._modalComponents=[],this._tableComponents=[]},getComponent:function(e){if(n2.util.isNullOrUndefined(e))return null;if(n2.util.isString(e)){var t=this._getId(e);return this._components.hasOwnProperty(t)?this._components[t]:null}return n2.util.isNullOrUndefined(e._n2Type)?null:e},isParentComponent:function(e){return-1===this._childComponents.indexOf(e)&&-1===this._modalComponents.indexOf(e)&&-1===this._tableComponents.indexOf(e)},getValue:function(e,t){var n=this.getComponent(e);return n&&n.getValue?n.getValue(t||!1):null},getValues:function(){var n={},s=this;return n2.util.each(this._components,function(e,t){s.isParentComponent(e)&&t.getValue&&(n[s._cleanId(e)]=t.getValue())}),n},getModalValues:function(e){var t=this.getComponent(e);return!t||"modal"!==t._n2Type&&"modal-wizard"!==t._n2Type?null:t.getValues()},setValue:function(e,t,n){var s=this.getComponent(e);s&&s.setValue&&s.setValue(t,n2.util.getDefaultBoolean(n,!0))},validate:function(e){var t=this.getComponent(e);return!t||!t.validate||t.validate()},validateAll:function(){var n=!0,s=this;return n2.util.each(this._components,function(e,t){s.isParentComponent(e)&&t.validate&&(t.validate()||(n=!1))}),n},reset:function(e){var t=this.getComponent(e);t&&t.reset&&t.reset()},refresh:function(e,t){var n=this.getComponent(e);n&&n.refresh&&n.refresh(t)},focus:function(e){var t=this.getComponent(e);return!(!t||!t.focus)&&t.focus()},enable:function(e){var t=this.getComponent(e);t&&t.enable&&t.enable()},disable:function(e){var t=this.getComponent(e);t&&t.disable&&t.disable()},show:function(e){var t=this.getComponent(e);t&&t.show&&t.show()},hide:function(e){var t=this.getComponent(e);t&&t.hide&&t.hide()},getTableComponentOnRow:function(e,t){if(!n2.util.isNullOrUndefined(e)){var n,s=e._n2Id||this._currentId;if(!n2.util.isNullOrUndefined(s)&&-1!==(n=s.lastIndexOf("-component-col-"))){var i=s.substring(0,n+15)+t;if(-1!==this._tableComponents.indexOf(i))return this._components[i]}}return null},getTableDataKeyOnRow:function(e){if(!n2.util.isNullOrUndefined(e)){var t,n=e._n2Id||this._currentId;if(!n2.util.isNullOrUndefined(n)&&-1!==(t=n.lastIndexOf("-component-col-"))){var s=n2j$("#"+n.substring(0,t));if(1===s.length)return s.attr("data-key")}}return null},_registerType:function(e,t){this._types[e]=t},_initType:function(e){var t=this._types[e].prototype;t.initialised||(t.init&&t.init(),t.initialised=!0)},_getId:function(e){return 0===e.indexOf("n2__")?e:"n2__"+e},_cleanId:function(e){return 0===e.indexOf("n2__")?e.substring(4):e},_registerModalComponent:function(e){this._modalComponents.push(e)},_registerTableComponent:function(e){this._tableComponents.push(e)}},n2.cm=ncsquared.ui.manager.ComponentManager,ncsquared.ui.Dropdown={_dropdownOpen:!1,startTemplate:'<div class="slds-dropdown-trigger slds-dropdown-trigger_{{hoverClick}} n2__dropdown"><button title="Show More" class="slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small" {{&btnAttributes}}><svg class="slds-button__icon slds-button__icon_hint slds-button__icon_small" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#down" /></svg><span class="slds-assistive-text">Show More</span></button><div class="slds-dropdown slds-dropdown_right"><ul class="slds-dropdown__list" role="menu">',endTemplate:"</ul></div></div>",renderStartTemplate:function(e,t){var n={hoverClick:e?"hover":"click",btnAttributes:t};return n2.ui.renderTemplate(ncsquared.ui.Dropdown.startTemplate,n)},_init:function(){n2j$(document).on("click",function(e){ncsquared.ui.Dropdown._dropdownOpen&&0===n2j$(e.target).closest("div.n2__dropdown.slds-dropdown-trigger_click, .n2__dropdown-target").length&&ncsquared.ui.Dropdown.closeDropdowns()}).on("click",'div.n2__dropdown.slds-dropdown-trigger_click[data-toggle="n2__dropdown"] > button',function(e){var t=n2j$(this).closest("div.n2__dropdown"),n=n2j$("#"+t.attr("data-target"));if(0<n.length)if(n.hasClass("slds-show"))n.addClass("slds-hide").removeClass("slds-show"),ncsquared.ui.Dropdown._dropdownOpen=!1;else{ncsquared.ui.Dropdown.closeDropdowns();var s=t.offset(),i=s.top+t.outerHeight(!0);i+n.outerHeight(!0)>n2j$(document).outerHeight(!0)&&(i=s.top-n.outerHeight(!0));var o=n2.ui.getScopedRoot().offset();n.css({top:i-o.top,left:s.left-o.left}),n.removeClass("slds-hide").addClass("slds-show"),n.is(":focusable")?n.focus():n.find(":focusable").eq(0).focus(),ncsquared.ui.Dropdown._dropdownOpen=!0}}).on("click",'div.n2__dropdown.slds-dropdown-trigger_click:not([data-toggle="n2__dropdown"]) > button, div.n2__dropdown.slds-dropdown-trigger_click ul.slds-dropdown__list',function(e){var t=n2j$(this).closest("div.n2__dropdown");t.hasClass("slds-is-open")?(t.removeClass("slds-is-open"),ncsquared.ui.Dropdown._dropdownOpen=!1):(ncsquared.ui.Dropdown.closeDropdowns(),t.addClass("slds-is-open"),ncsquared.ui.Dropdown._dropdownOpen=!0),e.stopImmediatePropagation()})},closeDropdowns:function(){n2j$("div.n2__dropdown.slds-dropdown-trigger_click").removeClass("slds-is-open"),n2j$(".n2__dropdown-target").addClass("slds-hide").removeClass("slds-show"),ncsquared.ui.Dropdown._dropdownOpen=!1}},ncsquared.ui.Dropdown._init(),ncsquared.ui.Handlers={_init:function(){n2j$(document).on("keydown",'.n2__component a[role="button"]:not([href]), .n2__component a[role="menuitem"]:not([href])',function(e){e.which===n2.key.KEY_ENTER&&n2j$(this).trigger("click")})}},ncsquared.ui.Handlers._init(),ncsquared.ui.Help={_nubbinHeight:10,_nubbinLeftOffset:15,triggerTemplate:'{{#help}}<div class="slds-form-element__icon"><button class="slds-button slds-button_icon n2__tooltip-trigger" id="{{id}}_help-button" aria-describedby="{{id}}_help"><svg class="slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#info" /></svg><span class="slds-assistive-text">Help</span></button></div>{{/help}}',popupTemplate:'{{#help}}<div class="slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-fall-into-ground" id="{{id}}_help" role="tooltip" style="position: absolute; top: -1000px; left:-1000px"><div class="slds-popover__body slds-text-longform"><p>{{help}}</p></div></div>{{/help}}',_init:function(){n2j$(document).on("mouseover","button.n2__tooltip-trigger",function(e){var t=n2j$(this).parent(),n=n2j$("#"+n2j$(this).attr("aria-describedby"));if(0<n.length){var s=t.offset(),i=t.offsetParent().offset(),o=n.outerHeight(!0);n.css("top",s.top-i.top-o-ncsquared.ui.Help._nubbinHeight+"px"),n.css("left",Math.max(0,s.left-i.left-ncsquared.ui.Help._nubbinLeftOffset)+"px"),n.offset().top<n2.ui.getScrollableParent(n).offset().top?(n.removeClass("slds-nubbin_bottom-left"),n.addClass("slds-nubbin_top-left"),n.css("top",s.top-i.top+t.height()+ncsquared.ui.Help._nubbinHeight+"px")):(n.addClass("slds-nubbin_bottom-left"),n.removeClass("slds-nubbin_top-left")),n.addClass("slds-rise-from-ground"),n.removeClass("slds-fall-into-ground")}}).on("mouseout","button.n2__tooltip-trigger",function(){var e=n2j$("#"+n2j$(this).attr("aria-describedby"));0<e.length&&(e.removeClass("slds-rise-from-ground"),e.addClass("slds-fall-into-ground"))})}},ncsquared.ui.Help._init(),ncsquared.ui.MessageBox={_id:"n2___message-box",_created:!1,_handlers:{},_currentTheme:"",_themesRegex:/^success$|^info$|^warning$|^error$/,_buttonsRegex:/^ok$|^yesno$/,_handlersRegex:/^ok$|^yes$|^no$/,_concernedKeys:[n2.key.KEY_ESCAPE,n2.key.KEY_ENTER],backdropTemplate:'<div class="slds-backdrop n2__message-box-backdrop"></div>',bodyTemplate:'<section tabindex="-1" class="slds-modal slds-modal_prompt slds-fade-in-open n2__component n2__message-box" role="alertdialog" id="{{id}}" aria-describedby="{{id}}_content" aria-labelledby="{{id}}_heading" aria-modal="true"><div tabindex="0" class="slds-modal__container"><header class="slds-modal__header slds-theme_{{theme}} slds-theme_alert-texture" id="{{id}}_header"><h2 class="slds-text-heading_medium" id="{{id}}_heading">{{heading}}</h2></header><div class="slds-modal__content slds-p-around_medium n2__message-box-content" id="{{id}}_content">{{#html}}{{&text}}{{/html}}{{^html}}{{text}}{{/html}}</div><footer id="{{id}}_footer" class="slds-modal__footer slds-theme_default"><button id="{{id}}_footer-ok-button" class="slds-button slds-button_neutral{{^showOK}} slds-hide{{/showOK}} n2__message-box-ok-button" value="ok">OK</button><button id="{{id}}_footer-no-button" class="slds-button slds-button_neutral{{^showYesNo}} slds-hide{{/showYesNo}} n2__message-box-yesno-button" value="no">No</button><button id="{{id}}_footer-yes-button" class="slds-button slds-button_brand{{^showYesNo}} slds-hide{{/showYesNo}} n2__message-box-yesno-button" value="yes">Yes</button></footer></div></section>',_init:function(){n2j$(ncsquared.ui.MessageBox.backdropTemplate).appendTo(n2.ui.getScopedRoot());var n=this._id,s=this._concernedKeys,t=this,i=function(e){t._handlers.hasOwnProperty(e)&&t._handlers[e](),n2j$("#"+n).removeClass("slds-fade-in-open"),n2j$("div.n2__message-box-backdrop").removeClass("slds-backdrop_open")};n2j$(document).on("click","#"+n+" footer.slds-modal__footer > button",function(e){i(e.target.value)}).on("keydown",function(e){var t;if(-1!==s.indexOf(e.which)&&0<(t=n2j$("#"+n+".slds-fade-in-open")).length){switch(e.which){case n2.key.KEY_ENTER:if(n2.ui.isButtonTarget(e))return;i(0===t.find("footer > button.n2__message-box-ok-button.slds-hide").length?"ok":"yes");break;case n2.key.KEY_ESCAPE:i(0===t.find("footer > button.n2__message-box-ok-button.slds-hide").length?"ok":"no")}e.preventDefault(),e.stopImmediatePropagation()}})},show:function(e){n2.util.checkRequiredConfig(e,["text","heading"]),e.id=this._id,e.html=n2.util.getDefaultBoolean(e.html,!1),e.theme=this._themesRegex.test(e.theme)?e.theme:"error";var t=this._buttonsRegex.test(e.buttons)?e.buttons:"ok";if(e.showOK="ok"===t,e.showYesNo="yesno"===t,n2j$("div.n2__message-box-backdrop").addClass("slds-backdrop_open"),this._handlers={},e.handlers){var n=this;n2.util.each(e.handlers,function(e,t){n._handlersRegex.test(e)&&n2.util.isFunction(t)&&(n._handlers[e]=t)})}var s="#"+this._id;if(this._created)n2j$(s+"_header").removeClass("slds-theme_"+this._currentTheme).addClass("slds-theme_"+e.theme),n2j$(s+"_heading").text(e.heading),e.html?n2j$(s+"_content").html(e.text):n2j$(s+"_content").text(e.text),n2j$(s+"_footer > button").addClass("slds-hide"),e.showOK?n2j$(s+"_footer > button.n2__message-box-ok-button").removeClass("slds-hide"):n2j$(s+"_footer > button.n2__message-box-yesno-button").removeClass("slds-hide"),n2j$(s).addClass("slds-fade-in-open");else{var i=n2.ui.renderTemplate(this.bodyTemplate,e);n2j$(i).appendTo(n2.ui.getScopedRoot()),this._created=!0}n2j$(s+" div.slds-modal__container").focus(),this._currentTheme=e.theme},error:function(e){this.show({text:e,heading:"Error"})}},ncsquared.ui.MessageBox._init(),n2.message=ncsquared.ui.MessageBox,ncsquared.ui.Reorder={ZONE:75,SCROLL_INCREMENT:200,SCROLL_DURATION:1e3,_initialised:!1,_dragging:!1,_context:null,_init:function(){n2j$(document).on("mouseup",ncsquared.ui.Reorder._onMouseUp).on("mousemove",ncsquared.ui.Reorder._onMouseMove).on("keydown",ncsquared.ui.Reorder._onKeyDown)},_cleanup:function(){n2j$(document).off("mouseup",ncsquared.ui.Reorder._onMouseUp).off("mousemove",ncsquared.ui.Reorder._onMouseMove).off("keydown",ncsquared.ui.Reorder._onKeyDown)},_onMouseUp:function(){ncsquared.ui.Reorder.stopDragging()},_onMouseMove:function(e){ncsquared.ui.Reorder.drag(e)},_onKeyDown:function(e){e.which===n2.key.KEY_ESCAPE&&ncsquared.ui.Reorder._dragging&&(ncsquared.ui.Reorder.cancelDragging(),e.preventDefault(),e.stopImmediatePropagation())},isDragging:function(){return ncsquared.ui.Reorder._dragging},startDragging:function(e,t){n2.util.checkRequiredConfig(e,["clientY"],"event"),n2.util.checkRequiredConfig(t,["item","itemsSelector","containerSelector"]);var n=ncsquared.ui.Reorder;n._initialised||(n._init(),n._initialised=!0);var s={item:t.item,itemsSelector:t.itemsSelector,containerSelector:t.containerSelector,beforeEnd:t.beforeEnd};(n._context=s).clonedItem=s.item.clone(),s.item.css("opacity","0.3");var i=s.item.position().top;s.startingPosition=e.clientY-i,s.scrollableParent=n2.ui.getScrollableParent(s.item),s.startingScroll=s.scrollableParent.scrollTop(),s.scrollHeight=s.scrollableParent.prop("scrollHeight"),s.height=s.scrollableParent.outerHeight(!0),s.scrollPageOffset=s.scrollableParent.offset().top;var o=s.item.closest(s.containerSelector),l=o.find(s.itemsSelector);s.currentIndex=l.index(s.item),s.startingIndex=s.currentIndex,n._updateItemPositions(l),s.clonedItem.attr("id",s.clonedItem.attr("id")+"-dragging"),s.clonedItem.insertBefore(s.item),s.minPosition=o.find(s.itemsSelector).position().top,s.maxPosition=o.outerHeight(!0)-s.item.outerHeight(!0)+s.minPosition,n2.util.isFunction(t.beforeStart)&&t.beforeStart(s),s.clonedItem.css("top",i).css("position","absolute").addClass("n2__dragging"),n._dragging=!0},stopDragging:function(e){var t=ncsquared.ui.Reorder;t._dragging&&(t._context.item.css("opacity",""),t._context.scrollableParent.stop(!0),t._context.clonedItem.remove(),n2.util.isFunction(t._context.beforeEnd)&&t._context.beforeEnd(t._context,e),t._dragging=!1,t._context=null,t._cleanup(),t._initialised=!1)},cancelDragging:function(){var e=ncsquared.ui.Reorder;if(e._dragging){if(e._context.startingIndex!==e._context.currentIndex){var t=e._context.item.closest(e._context.containerSelector).find(e._context.itemsSelector+":not(.n2__dragging)").get(e._context.startingIndex);e._context.item=e._context.startingIndex>e._context.currentIndex?e._context.item.insertAfter(t):e._context.item.insertBefore(t)}e.stopDragging(!0)}},drag:function(e){var n=ncsquared.ui.Reorder;if(n._dragging){var s=n._context.scrollableParent.scrollTop(),i=-(n._context.startingPosition-e.clientY)+s-n._context.startingScroll;i=Math.min(n._context.maxPosition,Math.max(n._context.minPosition,i)),n._context.clonedItem.css("top",i),n._checkMove(i);var t=n._context.scrollPageOffset+n.ZONE,o=n._context.scrollPageOffset+n._context.height-n.ZONE,l=i,r=function(e,t){parseInt(n._context.clonedItem.css("top"),10)===i&&(i=l+Number(e.toFixed(0))-s,i=Math.min(n._context.maxPosition,Math.max(n._context.minPosition,i)),n._context.clonedItem.css("top",i),n._checkMove(i))};e.clientY>o&&n._context.scrollHeight>n._context.height+s?n._context.scrollableParent.stop(!0).animate({scrollTop:s+n.SCROLL_INCREMENT},{duration:n.SCROLL_DURATION,step:r}):e.clientY<t&&0<s?n._context.scrollableParent.stop().animate({scrollTop:Math.max(0,s-n.SCROLL_INCREMENT)},{duration:n.SCROLL_DURATION,step:r}):n._context.scrollableParent.stop(!0)}},_checkMove:function(n){var s=ncsquared.ui.Reorder,i=-1;if(n2.util.each(s._context.positions,function(e,t){if(e>s._context.currentIndex){if(!(t<=n))return!1;i=e}else if(e<s._context.currentIndex&&n<=t)return i=e,!1}),0<=i){var e=s._context.item.closest(s._context.containerSelector).find(s._context.itemsSelector+":not(.n2__dragging)").get(i);s._context.item=i>s._context.currentIndex?s._context.item.insertAfter(e):s._context.item.insertBefore(e),s._context.currentIndex=i,s._updateItemPositions(s._context.item.closest(s._context.containerSelector).find(s._context.itemsSelector+":not(.n2__dragging)"))}},_updateItemPositions:function(e){var n=e.length-1;ncsquared.ui.Reorder._context.positions=e.map(function(e){var t=n2j$(this);return Math.floor(t.position().top+(n===e?0:t.outerHeight(!0)/2))}).get()}},ncsquared.ui.Spinner={_count:0,bodyTemplate:'<div class="slds-spinner_container n2__spinner slds-hide"><div role="status" class="slds-spinner slds-spinner--large slds-spinner--brand"><span class="slds-assistive-text">Loading</span><div class="slds-spinner__dot-a"></div><div class="slds-spinner__dot-b"></div></div></div>',_init:function(){n2j$(ncsquared.ui.Spinner.bodyTemplate).appendTo(n2.ui.getScopedRoot())},show:function(){n2j$("div.n2__spinner").removeClass("slds-hide"),n2.spinner._count++},hide:function(){n2.spinner._count--,n2.spinner._count<=0&&(n2.spinner._count=0,n2j$("div.n2__spinner").addClass("slds-hide"))}},ncsquared.ui.Spinner._init(),n2.spinner=ncsquared.ui.Spinner,ncsquared.ui.Toast={_id:"n2___toast",_created:!1,_currentTheme:"",_timeout:null,_themesRegex:/^success$|^info$|^warning$|^error$/,iconTemplate:'<span class="slds-icon_container slds-icon-utility-{{theme}} slds-m-right_small slds-no-flex slds-align-center" id="{{id}}_icon"><svg class="slds-icon slds-icon_small" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#{{theme}}" /></svg></span>',bodyTemplate:function(){return'<div class="slds-notify_container n2__toast n2__toast-hidden" id="{{id}}"><div class="slds-notify slds-notify_toast slds-theme_{{theme}}" role="status" id="{{id}}_toast"><span class="slds-assistive-text">{{theme}}</span>'+this.iconTemplate+'<div class="slds-notify__content"><h2 class="slds-text-heading_small n2__toast-content" id="{{id}}_content">{{#html}}{{&text}}{{/html}}{{^html}}{{text}}{{/html}}</h2></div><div class="slds-notify__close"><button title="Close" class="slds-button slds-button_icon slds-button_icon-inverse" id="{{id}}_close"><svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#close" /></svg><span class="slds-assistive-text">Close</span></button></div></div></div>'},_init:function(){var e=this._id,t=this;n2j$(document).on("click","#"+e+"_close",function(){t._timeout&&(clearTimeout(t._timeout),t._timeout=null),n2j$("#"+e).addClass("n2__toast-hidden")})},show:function(e){var t,n="#"+this._id;if(!(0<(t=n2j$(n)).length)||t.hasClass("n2__toast-hidden")){if(n2.util.checkRequiredConfig(e,["text"]),e.id=this._id,e.html=n2.util.getDefaultBoolean(e.html,!1),e.theme=this._themesRegex.test(e.theme)?e.theme:"success",e.delay=n2.util.isNumber(e.delay)?Number(e.delay):3e3,this._created){if(this._currentTheme!==e.theme){n2j$(n+"_toast").removeClass("slds-theme_"+this._currentTheme).addClass("slds-theme_"+e.theme);var s=n2j$(n+"_toast > span.slds-assistive-text");s.text(e.theme),n2j$(n+"_icon").remove();var i=n2.ui.renderTemplate(this.iconTemplate,e);n2j$(i).insertAfter(s)}e.html?n2j$(n+"_content").html(e.text):n2j$(n+"_content").text(e.text)}else{var o=n2.ui.renderTemplate(this.bodyTemplate(),e);n2j$(o).appendTo(n2.ui.getScopedRoot()),this._created=!0}if(setTimeout(function(){n2j$(n).removeClass("n2__toast-hidden")},0),0<e.delay){var l=this;this._timeout=setTimeout(function(){n2j$(n).addClass("n2__toast-hidden"),l._timeout=null},e.delay)}this._currentTheme=e.theme}}},ncsquared.ui.Toast._init(),n2.toast=ncsquared.ui.Toast,ncsquared.ui.Validation={updateValid:function(e,t){t?(e.removeClass("slds-has-error"),e.find("div.slds-form-element__help").addClass("slds-hidden")):(e.addClass("slds-has-error"),e.find("div.slds-form-element__help").removeClass("slds-hidden"))}},ncsquared.ui.components.Button=function(e){n2.util.isNullOrUndefined(e.text)?(e.style="slds-button_icon",n2.util.getDefaultBoolean(e.iconBorder,!0)&&(e.style+=" slds-button_icon-border-filled")):this._buttonStyles.hasOwnProperty(e.style)?e.style=this._buttonStyles[e.style]:e.style=this._buttonStyles.neutral,n2.util.isNullOrUndefined(e.tooltip)&&(e.tooltip=e.text),e.iconSprite=e.iconSprite||"action",e.toggle=n2.util.getDefaultBoolean(e.toggle,!1),e.defaultToggle=!!e.toggle&&n2.util.getDefaultBoolean(e.defaultToggle,!1),e.disabled=n2.util.getDefaultBoolean(e.disabled,!1);var t=n2.ui.renderTemplate(this.bodyTemplate,e),n=n2j$(t);if(n2j$(e.selector).replaceWith(n),this.selector="#"+e.id,this.defaultToggle=e.defaultToggle,this.handlers={},e.handlers){var s=this;n2.util.each(e.handlers,function(e,t){s._handlersRegex.test(e)&&n2.util.isFunction(t)&&(s.handlers[e]=t)})}},ncsquared.ui.components.Button.prototype._n2Type="button",ncsquared.ui.components.Button.prototype._buttonStyles={neutral:"slds-button_neutral",brand:"slds-button_brand",success:"slds-button_success",failure:"slds-button_destructive",link:""},ncsquared.ui.components.Button.prototype._handlersRegex=/^click$/,ncsquared.ui.components.Button.prototype.bodyTemplate='<button id="{{id}}" class="slds-button n2__component {{style}}{{#cls}} {{cls}}{{/cls}}{{#defaultToggle}} slds-is-selected{{/defaultToggle}}"{{#tooltip}} title="{{tooltip}}"{{/tooltip}}{{#toggle}} aria-pressed="{{defaultToggle}}"{{/toggle}}{{#disabled}} disabled="disabled"{{/disabled}}>{{#icon}}<svg class="slds-button__icon{{#text}} slds-button__icon_left{{/text}}{{#iconCls}} {{iconCls}}{{/iconCls}}" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/{{iconSprite}}-sprite/svg/symbols.svg#{{icon}}" /></svg>{{/icon}}{{#tooltip}}<span class="slds-assistive-text">{{tooltip}}</span>{{/tooltip}}{{#text}}<span id="{{id}}_label">{{text}}</span>{{/text}}</button>',ncsquared.ui.components.Button.prototype.init=function(){n2j$(document).on("click","button.n2__component",function(){var e=n2j$(this);if(n2.util.isNullOrUndefined(e.attr("aria-pressed")))n2.cm.getComponent(e.attr("id"))._handleEvent("click");else{var t=!0;e.hasClass("slds-is-selected")?(e.removeClass("slds-is-selected"),e.attr("aria-pressed",!1),t=!1):(e.addClass("slds-is-selected"),e.attr("aria-pressed",!0)),n2.cm.getComponent(e.attr("id"))._handleEvent("click",t)}})},ncsquared.ui.components.Button.prototype.destroy=function(){n2j$(this.selector).remove()},ncsquared.ui.components.Button.prototype.reset=function(){var e=n2j$(this.selector);if(!n2.util.isNullOrUndefined(e.attr("aria-pressed"))){var t=e.hasClass("slds-is-selected");t!==this.defaultToggle&&(t?(e.removeClass("slds-is-selected"),e.attr("aria-pressed",!1)):(e.addClass("slds-is-selected"),e.attr("aria-pressed",!0)))}},ncsquared.ui.components.Button.prototype.focus=function(){return n2j$(this.selector).focus(),!0},ncsquared.ui.components.Button.prototype.enable=function(){n2j$(this.selector).prop("disabled","")},ncsquared.ui.components.Button.prototype.disable=function(){n2j$(this.selector).prop("disabled","disabled")},ncsquared.ui.components.Button.prototype.show=function(){n2j$(this.selector).removeClass("slds-hide")},ncsquared.ui.components.Button.prototype.hide=function(){n2j$(this.selector).addClass("slds-hide")},ncsquared.ui.components.Button.prototype._handleEvent=function(e,t){this.handlers.hasOwnProperty(e)&&(n2.util.isNullOrUndefined(t)?this.handlers[e].call(this):this.handlers[e].call(this,t))},n2.cm._registerType(ncsquared.ui.components.Button.prototype._n2Type,ncsquared.ui.components.Button),ncsquared.ui.components.Checkbox=function(e){e.displayLabel=!n2.util.isNullOrUndefined(e.label)&&n2.util.getDefaultBoolean(e.displayLabel,!0),e.defaultValue=n2.util.getDefaultBoolean(e.defaultValue,!1),e.disabled=n2.util.getDefaultBoolean(e.disabled,!1),e.required=n2.util.getDefaultBoolean(e.required,!1),e.required&&(e.defaultValue=!1),e.requiredError=e.requiredError||"This field is required",e.stacked=n2.util.getDefaultBoolean(e.stacked,!1);var t=n2.ui.renderTemplate(this.bodyTemplate,e);n2j$(e.selector).replaceWith(t),this.selector="#"+e.id,this.valueSelector=this.selector+"_checkbox",this.defaultValue=e.defaultValue,this.required=e.required,e.required&&n2j$(this.valueSelector).prop("indeterminate",!0);var n=this;e.handlers&&n2.util.each(e.handlers,function(e,t){"change"===e&&n2.util.isFunction(t)&&n2j$(n.valueSelector).on("change",function(){t.call(n,n2j$(this).prop("checked"))})})},ncsquared.ui.components.Checkbox.prototype._n2Type="checkbox",ncsquared.ui.components.Checkbox.prototype.bodyTemplate='<div class="slds-form-element n2__component{{#cls}} {{cls}}{{/cls}}" id="{{id}}">{{#stacked}}<label class="slds-form-element__label" for="{{id}}_checkbox">{{label}}</label>'+ncsquared.ui.Help.triggerTemplate+'{{/stacked}}<div class="slds-form-element__control"><span class="slds-checkbox{{#stacked}} slds-checkbox_standalone{{/stacked}}">{{#required}}<abbr title="Required" class="slds-required">*</abbr>{{/required}}<input class="n2__checkbox" id="{{id}}_checkbox" type="checkbox"{{#defaultValue}} checked{{/defaultValue}}{{#required}} aria-describedby="{{id}}_error" required="required"{{/required}}{{#disabled}} disabled="disabled"{{/disabled}} />{{^stacked}}<label class="slds-checkbox__label" for="{{id}}_checkbox"{{#label}} title="{{label}}"{{/label}}><span class="slds-checkbox_faux"></span><span class="slds-form-element__label{{^displayLabel}} slds-assistive-text{{/displayLabel}}">{{#label}}{{label}}{{/label}}{{^label}}Select{{/label}}</span></label>'+ncsquared.ui.Help.triggerTemplate+'{{/stacked}}{{#stacked}}<span class="slds-checkbox_faux"></span>{{/stacked}}</span>{{#required}}<div class="slds-form-element__help slds-hidden" id="{{id}}_error">{{requiredError}}</div>{{/required}}</div>'+ncsquared.ui.Help.popupTemplate+"</div>",ncsquared.ui.components.Checkbox.prototype.init=function(){n2j$(document).on("blur","div.n2__component input.n2__checkbox",function(){n2.cm.validate(n2j$(this).closest(".n2__component").attr("id"))}).on("change","div.n2__component input.n2__checkbox",function(){n2.cm.validate(n2j$(this).closest(".n2__component").attr("id"))})},ncsquared.ui.components.Checkbox.prototype.destroy=function(){n2j$(this.selector).remove()},ncsquared.ui.components.Checkbox.prototype.getValue=function(e){return e||this.validate()?this._getValue():null},ncsquared.ui.components.Checkbox.prototype.setValue=function(e,t){n2j$(this.valueSelector).prop("checked",n2.util.getDefaultBoolean(e,!1)).prop("indeterminate",""),!1!==t&&this.validate()},ncsquared.ui.components.Checkbox.prototype.validate=function(){if(!this.required)return!0;var e=!0!==n2j$(this.valueSelector).prop("indeterminate");return ncsquared.ui.Validation.updateValid(n2j$(this.selector),e),e},ncsquared.ui.components.Checkbox.prototype.reset=function(){this.setValue(this.defaultValue||!1),n2j$(this.valueSelector).prop("indeterminate",this.required||"")},ncsquared.ui.components.Checkbox.prototype.focus=function(){return n2j$(this.valueSelector).focus(),!0},ncsquared.ui.components.Checkbox.prototype.enable=function(){n2j$(this.valueSelector).prop("disabled","")},ncsquared.ui.components.Checkbox.prototype.disable=function(){n2j$(this.valueSelector).prop("disabled","disabled")},ncsquared.ui.components.Checkbox.prototype._getValue=function(){return!0===n2j$(this.valueSelector).prop("indeterminate")?null:Boolean(n2j$(this.valueSelector).prop("checked"))},n2.cm._registerType(ncsquared.ui.components.Checkbox.prototype._n2Type,ncsquared.ui.components.Checkbox),ncsquared.ui.components.CheckboxGroup=function(e){n2.util.checkRequiredConfig(e,["data","data.label","data.value"]),e.sort=n2.util.getDefaultBoolean(e.sort,!0),e.required=n2.util.getDefaultBoolean(e.required,!1),e.requiredError=e.requiredError||"This field is required";var t=!1;if(n2.util.isFunction(e.data)){this.data=e.data;var n=e.data.call(this);n2.util.isPromise(n)?(t=n,e.showSpinner=!0):e.data=n}this.sort=e.sort,e.checkboxes=e.showSpinner?[]:this._getCheckboxes(e.data,e.defaultValue),delete e.data;var s=n2.ui.renderTemplate(this.bodyTemplate,e);n2j$(e.selector).replaceWith(s),this.selector="#"+e.id,this.containerSelector=this.selector+"_group",this.valueSelector=this.containerSelector+" input.n2__checkbox-group",this.errorSelector=this.selector+"_error",this.spinnerSelector=this.selector+"_spinner",n2.util.isArray(e.defaultValue)?this.defaultValue=n2.util.map(e.defaultValue,function(e){return String(e)}):n2.util.isNullOrUndefined(e.defaultValue)||(this.defaultValue=String(e.defaultValue)),this.required=e.required;var i=this;t&&t.done(function(e){i._addCheckboxes(e,!1,i.defaultValue)})},ncsquared.ui.components.CheckboxGroup.prototype._n2Type="checkbox-group",ncsquared.ui.components.CheckboxGroup.prototype.checkboxTemplate='{{#checkboxes}}<div class="slds-checkbox"><input class="n2__checkbox-group" id="{{id}}_checkbox-{{index}}" type="checkbox" value="{{value}}"{{#checked}} checked{{/checked}}{{#required}} aria-describedby="{{id}}_error" required="required"{{/required}} /><label class="slds-checkbox__label" for="{{id}}_checkbox-{{index}}" title="{{label}}"><span class="slds-checkbox_faux"></span><span class="slds-form-element__label">{{label}}</span></label></div>{{/checkboxes}}',ncsquared.ui.components.CheckboxGroup.prototype.bodyTemplate='<fieldset class="slds-form-element n2__component{{#cls}} {{cls}}{{/cls}}" id="{{id}}">{{#label}}<legend class="slds-form-element__legend slds-form-element__label" for="{{id}}_group">{{#required}}<abbr title="Required" class="slds-required">*</abbr> {{/required}}{{label}}</legend>'+ncsquared.ui.Help.triggerTemplate+'{{/label}}<div class="slds-form-element__control" id="{{id}}_group">'+ncsquared.ui.components.CheckboxGroup.prototype.checkboxTemplate+'<div class="slds-spinner_container{{^showSpinner}} slds-hide{{/showSpinner}}" id="{{id}}_spinner"><div class="slds-spinner slds-spinner_small" role="status"><span class="slds-assistive-text">Loading</span><div class="slds-spinner__dot-a"></div><div class="slds-spinner__dot-b"></div></div></div>{{#required}}<div class="slds-form-element__help slds-hidden" id="{{id}}_error">{{requiredError}}</div>{{/required}}</div>'+ncsquared.ui.Help.popupTemplate+"</fieldset>",ncsquared.ui.components.CheckboxGroup.prototype.init=function(){n2j$(document).on("change","fieldset.n2__component input.n2__checkbox-group",function(){n2.cm.validate(n2j$(this).closest(".n2__component").attr("id"))})},ncsquared.ui.components.CheckboxGroup.prototype.destroy=function(){n2j$(this.selector).remove()},ncsquared.ui.components.CheckboxGroup.prototype.getValue=function(e){return e||this.validate()?this._getValue():null},ncsquared.ui.components.CheckboxGroup.prototype.setValue=function(n,e){var s=n2.util.isArray(n);n2j$(this.valueSelector).each(function(e,t){(s?-1===n.indexOf(t.value):n!==t.value)?n2j$(t).prop("checked",""):n2j$(t).prop("checked",!0)}),!1!==e&&this.validate()},ncsquared.ui.components.CheckboxGroup.prototype.validate=function(){if(!this.required)return!0;var e=n2j$(this.valueSelector).is(":checked");return ncsquared.ui.Validation.updateValid(n2j$(this.selector),e),e},ncsquared.ui.components.CheckboxGroup.prototype.reset=function(){this.setValue(this.defaultValue||[],!1),ncsquared.ui.Validation.updateValid(n2j$(this.selector),!0)},ncsquared.ui.components.CheckboxGroup.prototype.refresh=function(e){if(n2.util.isFunction(this.data)){n2j$(this.spinnerSelector).removeClass("slds-hide");var t=!0===e&&0<n2j$(this.valueSelector).length?this._getValue():this.defaultValue,n=this.data();if(n&&n2.util.isPromise(n)){var s=this;n.done(function(e){s._addCheckboxes(e,!0,t)})}else this._addCheckboxes(n,!0,t);ncsquared.ui.Validation.updateValid(n2j$(this.selector),!0)}},ncsquared.ui.components.CheckboxGroup.prototype.focus=function(){return n2j$(this.valueSelector).eq(0).focus(),!0},ncsquared.ui.components.CheckboxGroup.prototype._getCheckboxes=function(e,s){var i=n2.util.isArray(s);if(n2.util.isArray(e)){var o=[];return n2.util.each(e,function(e,t){var n;(n=n2.util.isString(t)?{label:t,value:t}:t).index=e,n.checked=i?-1!==s.indexOf(n.value):s===n.value,o.push(n)}),this.sort&&o.sort(function(e,t){return n2.util.compareObjectValues(e,t,"label")}),o}throw new Error("data must by an array")},ncsquared.ui.components.CheckboxGroup.prototype._addCheckboxes=function(e,t,n){t&&n2j$(this.containerSelector+" > div.slds-checkbox").remove();var s=this._getCheckboxes(e,n),i=n2.ui.renderTemplate(this.checkboxTemplate,{checkboxes:s});n2j$(i).prependTo(this.containerSelector),n2j$(this.spinnerSelector).addClass("slds-hide")},ncsquared.ui.components.CheckboxGroup.prototype._getValue=function(){return n2j$(this.valueSelector+":checked").map(function(e,t){return t.value}).get()},n2.cm._registerType(ncsquared.ui.components.CheckboxGroup.prototype._n2Type,ncsquared.ui.components.CheckboxGroup),ncsquared.ui.components.CheckboxToggle=function(e){e.defaultValue=n2.util.getDefaultBoolean(e.defaultValue,!1),e.disabled=n2.util.getDefaultBoolean(e.disabled,!1);var t=n2.ui.renderTemplate(this.bodyTemplate,e);n2j$(e.selector).replaceWith(t),this.selector="#"+e.id,this.valueSelector=this.selector+"_checkbox",this.defaultValue=e.defaultValue;var n=this;e.handlers&&n2.util.each(e.handlers,function(e,t){n2.util.isFunction(t)&&("change"===e?n2j$(n.valueSelector).on("change",function(){t.call(n,n2j$(this).prop("checked"))}):"load"===e&&t.call(n,n.defaultValue))})},ncsquared.ui.components.CheckboxToggle.prototype._n2Type="checkbox-toggle",ncsquared.ui.components.CheckboxToggle.prototype.bodyTemplate='<div class="slds-form-element n2__checkbox-toggle n2__component{{#cls}} {{cls}}{{/cls}}" id="{{id}}"><div class="slds-form-element__control"><label class="slds-checkbox_toggle slds-grid">{{#label}}<span class="slds-form-element__label slds-m-bottom_none">{{label}}</span>{{/label}}<input class="n2__checkboxToggle" id="{{id}}_checkbox" type="checkbox"{{#defaultValue}} checked{{/defaultValue}} aria-describedby="{{id}}_container"{{#disabled}} disabled="disabled"{{/disabled}} /><span class="slds-checkbox_faux_container" id="{{id}}_container" aria-live="assertive"><span class="slds-checkbox_faux"></span>{{#onLabel}}<span class="slds-checkbox_on">{{onLabel}}</span>{{/onLabel}}{{#offLabel}}<span class="slds-checkbox_off">{{offLabel}}</span>{{/offLabel}}</span>'+ncsquared.ui.Help.triggerTemplate+"</label></div>"+ncsquared.ui.Help.popupTemplate+"</div>",ncsquared.ui.components.CheckboxToggle.prototype.destroy=function(){n2j$(this.selector).remove()},ncsquared.ui.components.CheckboxToggle.prototype.getValue=function(){return Boolean(n2j$(this.valueSelector).prop("checked"))},ncsquared.ui.components.CheckboxToggle.prototype.setValue=function(e){n2j$(this.valueSelector).prop("checked",n2.util.getDefaultBoolean(e,!1))},ncsquared.ui.components.CheckboxToggle.prototype.reset=function(){this.setValue(this.defaultValue||!1)},ncsquared.ui.components.CheckboxToggle.prototype.focus=function(){return n2j$(this.valueSelector).focus(),!0},ncsquared.ui.components.CheckboxToggle.prototype.enable=function(){n2j$(this.valueSelector).prop("disabled","")},ncsquared.ui.components.CheckboxToggle.prototype.disable=function(){n2j$(this.valueSelector).prop("disabled","disabled")},n2.cm._registerType(ncsquared.ui.components.CheckboxToggle.prototype._n2Type,ncsquared.ui.components.CheckboxToggle),ncsquared.ui.components.ColorPicker=function(s){n2.util.checkRequiredConfig(s,["colors","colors.color"]);var i=[];n2.util.each(s.colors,function(e,t){var n=n2.util.isString(t)?t:t.color;i.push({name:n2.util.isObject(t)&&!n2.util.isNullOrUndefined(t.name)?t.name:n,color:n,isDefault:s.defaultColor&&s.defaultColor===n})}),s.colors=i,s.required=n2.util.getDefaultBoolean(s.required,!1),s.requiredError=s.requiredError||"This field is required";var e=n2.ui.renderTemplate(this.bodyTemplate,s);n2j$(s.selector).replaceWith(e),e=n2.ui.renderTemplate(this.dropdownTemplate,s),n2j$(e).appendTo(n2.ui.getScopedRoot()),this.selector="#"+s.id,this.elementSelector=this.selector+" div.slds-form-element",this.valueSelector=this.selector+"_input",this.errorSelector=this.selector+"_error",this.dropdownSelector=this.selector+"_selector",this.defaultColor=s.defaultColor,this.required=s.required,this.requiredError=s.requiredError},ncsquared.ui.components.ColorPicker.prototype._n2Type="color",ncsquared.ui.components.ColorPicker.prototype._concernedKeys=[n2.key.KEY_ESCAPE,n2.key.KEY_ENTER,n2.key.KEY_LEFT,n2.key.KEY_RIGHT],ncsquared.ui.components.ColorPicker.prototype._invalidColorMessage="Please enter a valid CSS color",ncsquared.ui.components.ColorPicker.prototype.bodyTemplate='<div class="slds-color-picker n2__component{{#cls}} {{cls}}{{/cls}}" id="{{id}}"><div class="slds-form-element slds-color-picker__summary">{{#label}}<label class="slds-form-element__label slds-color-picker__summary-label" for="{{id}}_input">{{#required}}<abbr title="Required" class="slds-required">*</abbr> {{/required}}{{label}}</label>{{/label}}'+ncsquared.ui.Help.triggerTemplate+'<div class="slds-form-element__control"><div class="slds-dropdown-trigger slds-dropdown-trigger_click n2__dropdown" data-toggle="n2__dropdown" data-target="{{id}}_selector"><button class="slds-button slds-color-picker__summary-button slds-button_icon slds-button_icon-more" id="{{id}}_button" title="Choose color"><span class="slds-swatch"{{#defaultColor}} style="background-color: {{defaultColor}};{{/defaultColor}}"><span class="slds-assistive-text">{{#defaultColor}}{{defaultColor}}{{/defaultColor}}</span></span> <svg class="slds-button__icon slds-button__icon_small slds-m-left_xx-small" aria-hidden="true" focusable="false"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#down" /></svg><span class="slds-assistive-text">Choose a color.</span></button> <div class="slds-color-picker__summary-input"><input class="slds-input" id="{{id}}_input" type="text"{{#required}} aria-describedby="{{id}}_error" required="required"{{/required}} value="{{#defaultColor}}{{defaultColor}}{{/defaultColor}}"/></div></div></div><div class="slds-form-element__help slds-hidden" id="{{id}}_error">{{requiredError}}</div></div>'+ncsquared.ui.Help.popupTemplate+"</div>",ncsquared.ui.components.ColorPicker.prototype.dropdownTemplate='<section class="slds-dropdown slds-color-picker__selector slds-hide n2__color-picker n2__dropdown-target" role="dialog" aria-describedby="{{id}}_selector-body" id="{{id}}_selector" aria-label="Choose a color" data-target="{{id}}" tabindex="0"><div class="slds-popover__body" id="{{id}}_selector-body"><ul class="slds-color-picker__swatches" role="listbox" id="{{id}}_selector-list">{{#colors}}<li class="slds-color-picker__swatch{{#isDefault}} selected{{/isDefault}}" role="presentation"><a tabindex="-1" class="slds-color-picker__swatch-trigger" role="option" title="{{name}}"><span class="slds-swatch" style="background-color: {{color}};"><span class="slds-assistive-text">{{name}}</span></span></a></li>{{/colors}}</ul></div><footer class="slds-popover__footer"><div class="slds-color-picker__selector-footer"><button class="slds-button slds-button_neutral" value="cancel" id="{{id}}_selector-cancel-button">Cancel</button><button class="slds-button slds-button_brand" value="ok" id="{{id}}_selector-ok-button">Done</button></div></footer></section>',ncsquared.ui.components.ColorPicker.prototype.init=function(){n2j$(document).on("blur","div.slds-color-picker.n2__component div.slds-color-picker__summary-input input",function(e){n2.cm.setValue(n2j$(this).closest(".n2__component").attr("id"),e.target.value)}).on("click","div.slds-color-picker.n2__component button.slds-color-picker__summary-button",function(){n2.cm.getComponent(n2j$(this).closest("div.n2__component").attr("id"))._updateDropdownSelection()}).on("click","section.n2__color-picker a.slds-color-picker__swatch-trigger",function(){n2j$(this).closest("ul.slds-color-picker__swatches").find("li.slds-color-picker__swatch").removeClass("selected"),n2j$(this).closest("li.slds-color-picker__swatch").addClass("selected")}).on("click","section.n2__color-picker div.slds-color-picker__selector-footer > button",function(e){var t=n2j$(this).closest("section.slds-color-picker__selector");"ok"===e.target.value&&ncsquared.ui.components.ColorPicker.prototype._updateSelection(t),ncsquared.ui.Dropdown.closeDropdowns()}).on("keydown",function(e){var t;if(-1!==ncsquared.ui.components.ColorPicker.prototype._concernedKeys.indexOf(e.which)&&0<(t=n2j$("section.n2__color-picker.slds-show")).length){switch(e.which){case n2.key.KEY_ENTER:if(n2.ui.isButtonTarget(e))return;ncsquared.ui.components.ColorPicker.prototype._updateSelection(t),ncsquared.ui.Dropdown.closeDropdowns();break;case n2.key.KEY_ESCAPE:ncsquared.ui.Dropdown.closeDropdowns();break;case n2.key.KEY_LEFT:ncsquared.ui.components.ColorPicker.prototype._selectPrevious(t);break;case n2.key.KEY_RIGHT:ncsquared.ui.components.ColorPicker.prototype._selectNext(t)}e.preventDefault(),e.stopImmediatePropagation()}})},ncsquared.ui.components.ColorPicker.prototype.destroy=function(){n2j$(this.selector).remove(),n2j$(this.dropdownSelector).remove()},ncsquared.ui.components.ColorPicker.prototype.getValue=function(e){return e||this.validate()?this._getValue():null},ncsquared.ui.components.ColorPicker.prototype.setValue=function(e,t){var n=ncsquared.utils.ColorUtil.rgbToHex(e),s=n2j$(this.selector).find("div.slds-color-picker__summary");s.find("button > span.slds-swatch").css("background-color",n),s.find("button > span.slds-swatch > span.slds-assistive-text").text(n),s.find("div.slds-color-picker__summary-input input").val(n),!1!==t&&this.validate()},ncsquared.ui.components.ColorPicker.prototype.validate=function(){var e=this._getValue(),t=!this.required||Boolean(e&&0<e.length),n=this.requiredError;return t&&0<e.length&&((t=ncsquared.utils.ColorUtil.isValidColor(e))||(n=this._invalidColorMessage)),n2j$(this.errorSelector).text(n),ncsquared.ui.Validation.updateValid(n2j$(this.elementSelector),t),t},ncsquared.ui.components.ColorPicker.prototype.reset=function(){this.setValue(this.defaultColor||"",!1),ncsquared.ui.Validation.updateValid(n2j$(this.elementSelector),!0)},ncsquared.ui.components.ColorPicker.prototype.focus=function(){return n2j$(this.valueSelector).focus(),!0},ncsquared.ui.components.ColorPicker.prototype._getValue=function(){return n2j$(this.valueSelector).val()},ncsquared.ui.components.ColorPicker.prototype._updateSelection=function(e){var t=e.find("li.slds-color-picker__swatch.selected span.slds-swatch").css("background-color");t&&n2.cm.setValue(e.attr("data-target"),t,!0)},ncsquared.ui.components.ColorPicker.prototype._updateDropdownSelection=function(){var e=n2j$(this.dropdownSelector).find("ul.slds-color-picker__swatches"),t=ncsquared.utils.ColorUtil.rgbToHex(n2j$(this.valueSelector).val());if(t){var n=e.find('li.slds-color-picker__swatch:contains("'+t+'")');n.hasClass("selected")||(e.find("li.slds-color-picker__swatch").removeClass("selected"),n.addClass("selected"))}else e.find("li.slds-color-picker__swatch").removeClass("selected")},ncsquared.ui.components.ColorPicker.prototype._selectPrevious=function(e){var t=e.find("li.slds-color-picker__swatch.selected");0<t.length?0<t.prev().length&&t.removeClass("selected").prev().addClass("selected"):e.find("li.slds-color-picker__swatch:first").addClass("selected")},ncsquared.ui.components.ColorPicker.prototype._selectNext=function(e){var t=e.find("li.slds-color-picker__swatch.selected");0<t.length?0<t.next().length&&t.removeClass("selected").next().addClass("selected"):e.find("li.slds-color-picker__swatch:first").addClass("selected")},n2.cm._registerType(ncsquared.ui.components.ColorPicker.prototype._n2Type,ncsquared.ui.components.ColorPicker),ncsquared.ui.components.DataTable=function(n){n2.util.checkRequiredConfig(n,["data","columns","columns.name","columns.title","actions.title","actions.action"]),n.key=n.key||"id",n.reorder=n2.util.getDefaultBoolean(n.reorder,!1),n.reorder?n.paging=!1:n.paging=n2.util.getDefaultBoolean(n.paging,!0),n.paging&&(n.defaultRowsPerPage=n2.util.isNumber(n.defaultRowsPerPage)&&-1!==this._rowsPerPageValues.indexOf(Number(n.defaultRowsPerPage))?Number(n.defaultRowsPerPage):10),n.selection=n2.util.getDefaultBoolean(n.selection,!1),n.rowNumbers=n2.util.getDefaultBoolean(n.rowNumbers,!1),n.storeData=n2.util.getDefaultBoolean(n.storeData,!1),n.sortColumn=n.sortColumn||"",n.sortAscending=n2.util.getDefaultBoolean(n.sortAscending,!0);var i=this;this.componentsConfig={},n2.util.each(n.columns,function(e,s){if(s.index=e,n.reorder?s.sortable=!1:s.sortable=n2.util.getDefaultBoolean(s.sortable,!0),s.isComponent=n2.util.isObject(s.component),s.isComponent){s.isAction=!1,s.html=!1,n2.util.checkRequiredConfig(s,["component.type","component.config"],"column["+e+"]"),n.hasComponents=!0;var t="component-col-"+e;s.componentId=t,s.component.config.__type=s.component.type,i.componentsConfig[t]=s.component.config,delete s.component}else s.isAction=n2.util.isFunction(s.action),s.isAction&&n2j$(document).on("click","table#"+n.id+"_table a."+n.id+"_table_body-col-"+e+"-action",function(){var e=n2j$(this),t=e.attr("data-key"),n=e.closest("tr");s.action(t,e.closest("tbody").find("tr").index(n)+1,i.storedData[t])}),s.html=n2.util.getDefaultBoolean(s.html,!1);s.sortOrder="none",s.name===n.sortColumn&&(s.sorted=!0,s.sortOrder=n.sortAscending?"ascending":"descending",s.sortDescending=!n.sortAscending)}),n.columnCount=n.columns.length,n.reorder&&n.columnCount++,n.selection&&n.columnCount++,n.rowNumbers&&n.columnCount++,n.hasActions=Boolean(n.actions&&0<n.actions.length),n.hasActions&&(n2.util.each(n.actions,function(e,s){s.index=e,n2j$(document).on("click","table#"+n.id+"_table a."+n.id+"_table_body-action-"+e,function(){var e=n2j$(this),t=e.attr("data-key"),n=e.closest("tr");s.action(t,e.closest("tbody").find("tr").index(n)+1,i.storedData[t])}),n2.util.isFunction(s.visible)?s.isVisible=function(){return s.visible.call(i,i.config.dataKey,i.storedData[i.config.dataKey])}:s.isVisible=!0}),n.columnCount++);var e=n2.ui.renderTemplate(this.bodyTemplate,n);n2j$(n.selector).replaceWith(e),this.selector="#"+n.id,this.headerSelector=this.selector+"_table_header",this.bodySelector=this.selector+"_table_body",this.footerSelector=this.selector+"_footer",this.spinnerSelector=this.selector+"_spinner",this.config={id:n.id,key:n.key,reorder:n.reorder,selection:n.selection,rowNumbers:n.rowNumbers,columns:n.columns,hasComponents:n.hasComponents,hasActions:n.hasActions,actions:n.actions},n2.util.isFunction(n.rowCls)?this.config.rowClsFn=n.rowCls:this.config.rowCls=n.rowCls,this.data=n.data,this.storeData=n.storeData,this.storedData={},this.paging=n.paging,this.page=1,this.rowsPerPage=n.paging?n.defaultRowsPerPage:-1,this.rowIndexOffset=0,this.sortColumn=n.sortColumn,this.sortAscending=n.sortAscending,this.originalSortColumn=n.sortColumn,this.originalSortAscending=n.sortAscending,this.otherSelectedRows=[],this._getData(),this.handlers={},n.handlers&&n2.util.each(n.handlers,function(e,t){i._handlersRegex.test(e)&&n2.util.isFunction(t)&&(i.handlers[e]=t)})},ncsquared.ui.components.DataTable.prototype._n2Type="data-table",ncsquared.ui.components.DataTable.prototype._handlersRegex=/^reordered$/,ncsquared.ui.components.DataTable.prototype._rowsPerPageValues=[10,25,50,100],ncsquared.ui.components.DataTable.prototype.bodyTemplate='<div class="n2__component slds-is-relative" id="{{id}}">{{#label}}<label class="slds-form-element__label" for="{{id}}_table">{{label}}</label>'+ncsquared.ui.Help.triggerTemplate+'{{/label}}<table class="slds-table slds-table_bordered slds-table_fixed-layout n2__table{{#cls}} {{cls}}{{/cls}}" id="{{id}}_table" role="grid"><thead id="{{id}}_table_header"><tr class="slds-line-height_reset">{{#reorder}}<th class="slds-text-align_right n2__table-column-reorder" scope="col"></th>{{/reorder}}{{#selection}}<th class="slds-text-align_right n2__table-column-action" scope="col"><div class="slds-th__action slds-th__action_form"><span class="slds-checkbox" id="{{id}}_table_header-select-all"><input id="{{id}}_table_header-select-all_checkbox" class="n2__table-select-all" type="checkbox" /><label class="slds-checkbox__label" for="{{id}}_table_header-select-all_checkbox" title="Select all rows"><span class="slds-checkbox_faux"></span><span class="slds-form-element__label slds-assistive-text">Select all rows</span></label></span></div></th>{{/selection}}{{#rowNumbers}}<th class="slds-text-align_right n2__table-column-rownum" scope="col"></th>{{/rowNumbers}}{{#columns}}{{#sortable}}<th class="slds-is-sortable{{#sorted}} slds-is-sorted{{/sorted}}{{^sortDescending}} slds-is-sorted_asc{{/sortDescending}}" aria-label="{{title}}" aria-sort="{{sortOrder}}" data-target="{{name}}" scope="col" id="{{id}}_table_header-col-{{index}}"{{#width}} style="width: {{width}};"{{/width}}><a class="slds-th__action slds-text-link_reset{{#alignRight}} slds-float_right{{/alignRight}}" role="button" tabindex="0"><span class="slds-assistive-text">Sort by: {{title}}</span><span title="{{title}}" class="slds-truncate">{{title}}</span><div class="slds-icon_container"><svg class="slds-icon slds-icon_x-small slds-icon-text-default slds-is-sortable__icon" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#arrowdown" /></svg></div></a><span class="slds-assistive-text" aria-live="assertive" aria-atomic="true">Sorted {{sortOrder}}</span></th>{{/sortable}}{{^sortable}}<th aria-label="{{title}}" scope="col" id="{{id}}_table_header-col-{{index}}"{{#width}} style="width: {{width}};"{{/width}}><div title="{{title}}" class="slds-truncate{{#alignRight}} slds-text-align_right{{/alignRight}}">{{title}}</div></th>{{/sortable}}{{/columns}}{{#hasActions}}<th class="n2__table-column-action" scope="col" id="{{id}}_table_header-actions"><span class="slds-assistive-text">Actions</span></th>{{/hasActions}}</tr></thead><tbody id="{{id}}_table_body"><tr><td colspan="{{columnCount}}">&nbsp;</td></tr></tbody></table><div id="{{id}}_footer" class="slds-grid slds-p-horizontal_medium n2__table-footer"></div><div class="slds-spinner_container" id="{{id}}_spinner"><div class="slds-spinner slds-spinner_small" role="status"><span class="slds-assistive-text">Loading</span><div class="slds-spinner__dot-a"></div><div class="slds-spinner__dot-b"></div></div></div>'+ncsquared.ui.Help.popupTemplate+"</div>",ncsquared.ui.components.DataTable.prototype.rowTemplate='<tr class="slds-hint-parent n2__table-row{{#rowCls}} {{rowCls}}{{/rowCls}}" id="{{id}}_table_body_row-{{rowIndex}}" data-key="{{dataKey}}">{{#reorder}}<td class="slds-text-align_right" role="gridcell"><div class="slds-icon_container n2__table-reorder-arrows"><button class="slds-button slds-button_icon slds-button_icon-xx-small n2__table-reorder-up" title="Move Up" aria-label="Move Up"><svg class="slds-icon slds-icon_xx-small slds-icon-text-default" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#arrowup" /></svg></button><button class="slds-button slds-button_icon slds-button_icon-xx-small n2__table-reorder-down" title="Move Down" aria-label="Move Down"><svg class="slds-icon slds-icon_xx-small slds-icon-text-default" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#arrowdown" /></svg></button></div><div class="slds-icon_container n2__table-reorder-handle"><svg class="slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#threedots_vertical" /></svg></div></td>{{/reorder}}{{#selection}}<td scope="row" class="slds-text-align_right" role="gridcell"><span class="slds-checkbox" id="{{id}}_table_body_row-{{rowIndex}}-select-row"><input id="{{id}}_table_body_row-{{rowIndex}}-select-row_checkbox" class="n2__table-select-row" type="checkbox" data-key="{{dataKey}}"{{#selected}} checked{{/selected}} /><label class="slds-checkbox__label" for="{{id}}_table_body_row-{{rowIndex}}-select-row_checkbox" title="Select row"><span class="slds-checkbox_faux"></span><span class="slds-form-element__label slds-assistive-text">Select row</span></label></span></td>{{/selection}}{{#rowNumbers}}<td role="gridcell" id="{{id}}_table_body_row-{{rowIndex}}-rownum"><div class="slds-truncate n2__data-table-row-number"></div></td>{{/rowNumbers}}{{#columns}}{{#isComponent}}<td id="{{id}}_table_body_row-{{rowIndex}}-col-{{index}}" class="n2__data-table-component" data-component="{{id}}_table_body_row-{{rowIndex}}-{{componentId}}" data-name="{{name}}"><span id="{{id}}_table_body_row-{{rowIndex}}-{{componentId}}"></span>{{generateComponent}}</td>{{/isComponent}}{{^isComponent}}{{#isAction}}<th scope="row" id="{{id}}_table_body_row-{{rowIndex}}-col-{{index}}"><div title="{{dataTitle}}" class="slds-truncate{{#alignRight}} slds-text-align_right{{/alignRight}}{{#wrap}} slds-cell-wrap{{/wrap}}"><a class="{{id}}_table_body-col-{{index}}-action" data-key="{{dataKey}}" role="button" tabindex="0">{{#html}}{{&data}}{{/html}}{{^html}}{{data}}{{/html}}</a></div></th>{{/isAction}}{{^isAction}}<td role="gridcell" id="{{id}}_table_body_row-{{rowIndex}}-col-{{index}}"><div title="{{dataTitle}}" class="slds-truncate{{#alignRight}} slds-text-align_right{{/alignRight}}{{#wrap}} slds-cell-wrap{{/wrap}}">{{#html}}{{&data}}{{/html}}{{^html}}{{data}}{{/html}}</div></td>{{/isAction}}{{/isComponent}}{{/columns}}{{#hasActions}}<td role="gridcell" id="{{id}}_table_body_row-{{rowIndex}}-actions">'+ncsquared.ui.Dropdown.renderStartTemplate(!1)+'{{#actions}}{{#isVisible}}<li class="slds-dropdown__item" role="presentation"><a class="{{id}}_table_body-action-{{index}}" data-key="{{dataKey}}" role="menuitem" tabindex="0"><span class="slds-truncate" title="{{title}}">{{title}}</span></a></li>{{/isVisible}}{{/actions}}'+ncsquared.ui.Dropdown.endTemplate+"</td>{{/hasActions}}</tr>",ncsquared.ui.components.DataTable.prototype.footerTemplate='<div><select class="slds-select n2__table-rows-per-page">{{#pageOptions}}<option{{#selected}} selected{{/selected}}>{{value}}</option>{{/pageOptions}}</select><span> rows per page</span></div>{{#selection}}<div class="n2__table-selected n2__text-center-button"><span class="n2__table-selected-count">{{selectedCount}} selected</span>{{#hasPages}} <a class="n2__table-deselect-all">(Deselect all)</a>{{/hasPages}}</div>{{/selection}}<div class="slds-align_absolute-center">{{#hasPages}}<button class="slds-button slds-button_brand n2__table-previous-button"{{^previous}} disabled{{/previous}} title="Previous page">Previous</button><button class="slds-button slds-button_brand n2__table-next-button"{{^next}} disabled{{/next}} title="Next page">Next</button>{{/hasPages}}</div><div class="n2__text-center-button"><span class="n2__table-paging-label">Page {{page}} of {{totalPages}}</span></div>',ncsquared.ui.components.DataTable.prototype.init=function(){n2j$(document).on("change","table.n2__table > thead input.n2__table-select-all",function(e){n2.cm.getComponent(n2j$(this).closest("div.n2__component").attr("id"))._updateAllRowsSelection(e.target.checked)}).on("change","table.n2__table > tbody input.n2__table-select-row",function(e){n2.cm.getComponent(n2j$(this).closest("div.n2__component").attr("id"))._updateSelected()}).on("click","table.n2__table > thead th.slds-is-sortable > a",function(){var e=n2j$(this).closest("th"),t=e.closest("thead"),n="ascending"===e.attr("aria-sort"),s=n?"descending":"ascending";t.find("th.slds-is-sortable").attr("aria-sort","none").removeClass("slds-is-sorted").addClass("slds-is-sorted_asc"),t.find("th.slds-is-sortable > span.slds-assistive-text").text("Sorted none"),e.attr("aria-sort",s).addClass("slds-is-sorted"),e.find("> span.slds-assistive-text").text("Sorted "+s),n&&e.removeClass("slds-is-sorted_asc"),n2.cm.getComponent(t.closest("div.n2__component").attr("id"))._sort(e.attr("data-target"),!n)}).on("click","table.n2__table > tbody > tr button.n2__table-reorder-up",function(){var e=n2j$(this);n2.cm.getComponent(e.closest("div.n2__component").attr("id"))._moveUp(e.closest("tr").attr("id"))}).on("click","table.n2__table > tbody > tr button.n2__table-reorder-down",function(){var e=n2j$(this);n2.cm.getComponent(e.closest("div.n2__component").attr("id"))._moveDown(e.closest("tr").attr("id"))}).on("mousedown","table.n2__table > tbody > tr div.n2__table-reorder-handle",function(e){ncsquared.ui.Reorder.isDragging()||ncsquared.ui.Reorder.startDragging(e,{item:n2j$(this).closest("tr"),itemsSelector:"tr",containerSelector:"tbody",beforeStart:ncsquared.ui.components.DataTable.prototype._beforeReorderStart,beforeEnd:ncsquared.ui.components.DataTable.prototype._beforeReorderEnd})}).on("change","div.n2__component div.n2__table-footer select.n2__table-rows-per-page",function(e){n2.cm.getComponent(n2j$(this).closest("div.n2__component").attr("id"))._updateRowsPerPage(e.target.value)}).on("click","div.n2__component div.n2__table-footer button.n2__table-previous-button",function(){n2.cm.getComponent(n2j$(this).closest("div.n2__component").attr("id"))._previous()}).on("click","div.n2__component div.n2__table-footer button.n2__table-next-button",function(){n2.cm.getComponent(n2j$(this).closest("div.n2__component").attr("id"))._next()}).on("click","div.n2__component div.n2__table-footer a.n2__table-deselect-all",function(){n2.cm.getComponent(n2j$(this).closest("div.n2__component").attr("id"))._deselectAll()})},ncsquared.ui.components.DataTable.prototype.destroy=function(){n2j$(this.selector).remove()},ncsquared.ui.components.DataTable.prototype.getValue=function(){var i=this,o=!1,n=n2j$(this.bodySelector+" > tr").map(function(e,t){var s={key:t.getAttribute("data-key")};if(i.config.reorder&&(s.index=e+1),i.config.selection){var n=n2j$(t).find("input.n2__table-select-row").prop("checked");if(i.config.reorder||i.config.hasComponents)s.selected=n;else if(!n)return null}return i.config.hasComponents&&n2j$(t).find("td.n2__data-table-component").each(function(e,t){var n=t.getAttribute("data-component");n2.cm.validate(n)?s[t.getAttribute("data-name")]=n2.cm.getValue(n,!0):o=!0}),s}).get();return o?null:(0<this.otherSelectedRows.length&&n2.util.each(this.otherSelectedRows,function(e,t){n.push({key:t})}),n.sort(function(e,t){return n2.util.compareObjectValues(e,t,"key")}),n)},ncsquared.ui.components.DataTable.prototype.validate=function(){var n=!0;return this.config.hasComponents&&n2j$(this.bodySelector+" > tr").map(function(e,t){n2j$(t).find("td.n2__data-table-component").each(function(e,t){n2.cm.validate(t.getAttribute("data-component"))||(n=!1)})}),n},ncsquared.ui.components.DataTable.prototype.reset=function(){this.page=1,this.sortColumn=this.originalSortColumn,this.sortAscending=this.originalSortAscending,this._getData()},ncsquared.ui.components.DataTable.prototype.refresh=function(){this._getData()},ncsquared.ui.components.DataTable.prototype.addRow=function(e){!this.paging&&n2.util.isObject(e)&&(this.mask(),this._generateRows([e],1,!1),this._updateRowNumbers(),this.unmask())},ncsquared.ui.components.DataTable.prototype.removeRow=function(e){if(!this.paging&&n2.util.isNumber(e)){this.mask();var t,n=n2j$(this.bodySelector+" > tr").eq(Number(e-1));this.config.hasComponents&&n.find("td.n2__data-table-component").each(function(e,t){n2.cm.destroyComponent(t.getAttribute("data-component"))}),n.remove(),this.storeData&&!n2.util.isNullOrUndefined(t=n.attr("data-key"))&&this.storedData.hasOwnProperty(t)&&delete this.storedData[t],this._updateRowNumbers(),this.unmask()}},ncsquared.ui.components.DataTable.prototype.getRowCount=function(){return n2j$(this.bodySelector+" > tr.n2__table-row").length},ncsquared.ui.components.DataTable.prototype.getComponentsOnRow=function(e){if(this.config.hasComponents){var t=n2j$(this.bodySelector+" > tr").eq(e-1).find("td.n2__data-table-component").map(function(e,t){return n2.cm.getComponent(t.getAttribute("data-component"))});if(0<t.length)return t}return null},ncsquared.ui.components.DataTable.prototype.mask=function(){n2j$(this.spinnerSelector).removeClass("slds-hide")},ncsquared.ui.components.DataTable.prototype.unmask=function(){n2j$(this.spinnerSelector).addClass("slds-hide")},ncsquared.ui.components.DataTable.prototype._getData=function(){if(n2.util.isFunction(this.data)){if(this.mask(),this.config.selection){var e=n2j$(this.bodySelector+" input.n2__table-select-row:checked").map(function(e,t){return t.getAttribute("data-key")}).get();this.otherSelectedRows=e.concat(this.otherSelectedRows)}var s=this;this.data(this.page,this.rowsPerPage,this.sortColumn,this.sortAscending,function(e,t,n){n&&(s.otherSelectedRows=[]),s.components&&(n2.util.each(s.components,function(e,t){n2.cm.destroyComponent(t)}),s.components=[]),s._generateRows(e,t,!0),s._updateRowNumbers(),s._generateFooter(),s._updateSelected(!0),s.unmask()})}},ncsquared.ui.components.DataTable.prototype._generateRows=function(e,t,n){this.paging&&(t=n2.util.isNullOrUndefined(t)?e.length:t,this.totalPages=Math.max(1,Math.ceil(t/this.rowsPerPage))),n&&(this.storedData={},this.components=[],this.rowIndexOffset=0,n2j$(this.bodySelector).empty());var i="",o=this,l=[];n2.util.each(e,function(t,n){o.config.rowIndex=t+o.rowIndexOffset;var s={};if(o.config.data=function(){if(s.hasOwnProperty(this.index))return s[this.index];var e=n2.util.getObjectProperty(n,this.name);return n2.util.isFunction(this.format)?e=this.format(e,n):n2.util.isNullOrUndefined(this.format)||(e=n2.util.formatValue(e,this.format)),s[this.index]=e},o.config.dataTitle=function(){return n2.util.isFunction(this.formatTooltip)?this.formatTooltip(n2.util.getObjectProperty(n,this.name),o.config.data.call(this),n):o.config.data.call(this)},o.config.dataKey=n2.util.getObjectProperty(n,o.config.key),o.config.selected=!1,o.config.selection){var e=o.otherSelectedRows.indexOf(o.config.dataKey);-1!==e&&(o.config.selected=!0,o.otherSelectedRows.splice(e,1))}o.config.rowClsFn&&(o.config.rowCls=o.config.rowClsFn.call(this,n)),o.config.generateComponent=function(){var e=n2.util.clone(o.componentsConfig[this.componentId]);return e.id=o.config.id+"_table_body_row-"+(t+o.rowIndexOffset)+"-"+this.componentId,e.selector="#"+e.id,e.defaultValue=o.config.data.call(this),l.push(e),""},o.storeData&&(o.storedData[o.config.dataKey]=n),i+=n2.ui.renderTemplate(o.rowTemplate,o.config)}),n2j$(this.bodySelector).append(i),n2.util.each(l,function(e,t){var n=n2.cm.addComponent(t.__type,t);o.components.push(n),n2.cm._registerTableComponent(n._n2Id)}),this.rowIndexOffset+=e.length},ncsquared.ui.components.DataTable.prototype._generateFooter=function(){if(this.paging){var t=this,e=n2.util.map(this._rowsPerPageValues,function(e){return{value:e,selected:e===t.rowsPerPage}}),n=n2.ui.renderTemplate(this.footerTemplate,{pageOptions:e,previous:1<this.page,next:this.page<this.totalPages,page:this.page,totalPages:this.totalPages,hasPages:1<this.totalPages,selection:this.config.selection,selectedCount:this._getSelectedCount()});n2j$(this.footerSelector).empty().append(n)}},ncsquared.ui.components.DataTable.prototype._updateRowNumbers=function(){if(this.config.rowNumbers){var n=1;this.paging&&(n+=(this.page-1)*this.rowsPerPage),n2j$(this.bodySelector+" div.n2__data-table-row-number").each(function(e,t){n2j$(t).text(e+n)})}},ncsquared.ui.components.DataTable.prototype._getSelectedCount=function(){return n2j$(this.bodySelector+" input.n2__table-select-row:checked").length+this.otherSelectedRows.length},ncsquared.ui.components.DataTable.prototype._updateSelected=function(e){var t=n2j$(this.bodySelector+" input.n2__table-select-row:checked").length,n=n2j$(this.headerSelector+" input.n2__table-select-all");0===t?n.prop("indeterminate","").prop("checked",""):t===n2j$(this.bodySelector+" tr").length?n.prop("indeterminate","").prop("checked",!0):n.prop("indeterminate",!0).prop("checked",""),e||n2j$(this.footerSelector+" span.n2__table-selected-count").text(t+this.otherSelectedRows.length+" selected")},ncsquared.ui.components.DataTable.prototype._updateAllRowsSelection=function(e){n2j$(this.bodySelector+" input.n2__table-select-row").prop("checked",e),this._updateSelected()},ncsquared.ui.components.DataTable.prototype._deselectAll=function(){this.otherSelectedRows=[],n2j$(this.bodySelector+" input.n2__table-select-row").prop("checked",!1),this._updateSelected()},ncsquared.ui.components.DataTable.prototype._previous=function(){this.page=Math.max(1,this.page-1),this._getData()},ncsquared.ui.components.DataTable.prototype._next=function(){this.page=Math.min(this.totalPages,this.page+1),this._getData()},ncsquared.ui.components.DataTable.prototype._sort=function(e,t){this.sortColumn=e,this.sortAscending=t,this._getData()},ncsquared.ui.components.DataTable.prototype._updateRowsPerPage=function(e){e=Number(e),-1!==this._rowsPerPageValues.indexOf(e)&&(this.rowsPerPage=e,this.page=1,this._getData())},ncsquared.ui.components.DataTable.prototype._moveUp=function(e){var t=n2j$("#"+e);if(0<t.length){var n=t.prev();0<n.length&&(t.insertBefore(n),this._handleReordered())}},ncsquared.ui.components.DataTable.prototype._moveDown=function(e){var t=n2j$("#"+e);if(0<t.length){var n=t.next();0<n.length&&(t.insertAfter(n),this._handleReordered())}},ncsquared.ui.components.DataTable.prototype._beforeReorderStart=function(e){e.clonedItem.find("td,th").each(function(e,t){var n=n2j$(t);n.css({width:n.outerWidth(),"max-width":n.outerWidth()})}),e.item.closest("table").addClass("n2__no-selection slds-no-row-hover")},ncsquared.ui.components.DataTable.prototype._beforeReorderEnd=function(e,t){e.item.closest("table").removeClass("n2__no-selection slds-no-row-hover"),t||n2.cm.getComponent(e.item.closest("div.n2__component").attr("id"))._handleReordered()},ncsquared.ui.components.DataTable.prototype._handleReordered=function(){this._updateRowNumbers(),this.handlers.hasOwnProperty("reordered")&&this.handlers.reordered.call(this)},n2.cm._registerType(ncsquared.ui.components.DataTable.prototype._n2Type,ncsquared.ui.components.DataTable),ncsquared.ui.components.Input=function(e){e.type=e.type||"text",e.iconSprite=e.iconSprite||"action",e.showClear=n2.util.getDefaultBoolean(e.showClear,!1),n2.util.isNullOrUndefined(e.icon)?e.showClear&&(e.formIconClass="slds-input-has-icon slds-input-has-icon_right"):e.showClear?e.formIconClass="slds-input-has-icon slds-input-has-icon_left-right":e.formIconClass="slds-input-has-icon slds-input-has-icon_left",e.disabled=n2.util.getDefaultBoolean(e.disabled,!1),e.required=n2.util.getDefaultBoolean(e.required,!1),e.error=e.requiredError||"This field is required";var t=n2.util.isFunction(e.validation);e.hasErrorMessage=e.required||t,"number"!==e.type||n2.util.isNumber(e.defaultValue)||delete e.defaultValue;var n=n2.ui.renderTemplate(this.bodyTemplate,e);if(n2j$(e.selector).replaceWith(n),this.selector="#"+e.id,this.valueSelector=this.selector+"_input",this.errorSelector=this.selector+"_error",this.defaultValue=e.defaultValue,this._previousValue=e.defaultValue||"",this._disabled=e.disabled,this._hidden=!1,this.required=e.required,this.requiredError=e.requiredError,this.hasValidation=t,this.validation=this.hasValidation?e.validation:null,this.handlers={},e.handlers){var s=this;n2.util.each(e.handlers,function(e,t){s._handlersRegex.test(e)&&n2.util.isFunction(t)&&(s.handlers[e]=t)}),this.handlers.hasOwnProperty("type")&&n2j$(s.valueSelector).addClass("n2__input-type")}},ncsquared.ui.components.Input.prototype._n2Type="input",ncsquared.ui.components.Input.prototype._handlersRegex=/^type$|^change$/,ncsquared.ui.components.Input.prototype.bodyTemplate='<div class="slds-form-element n2__component{{#cls}} {{cls}}{{/cls}}" id="{{id}}">{{#label}}<label class="slds-form-element__label" for="{{id}}_input">{{#required}}<abbr title="Required" class="slds-required">*</abbr> {{/required}}{{label}}</label>{{/label}}'+ncsquared.ui.Help.triggerTemplate+'<div class="slds-form-element__control{{#formIconClass}} {{formIconClass}}{{/formIconClass}}">{{#icon}}<svg id="{{id}}_icon" class="slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default{{#iconCls}} {{iconCls}}{{/iconCls}}" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/{{iconSprite}}-sprite/svg/symbols.svg#{{icon}}" /></svg>{{/icon}}<input class="slds-input n2__input" id="{{id}}_input"{{#required}} aria-describedby="{{id}}_error" required="required"{{/required}} type="{{type}}"{{#placeholder}} placeholder="{{placeholder}}"{{/placeholder}}{{#defaultValue}} value="{{defaultValue}}"{{/defaultValue}}{{#disabled}} disabled="disabled"{{/disabled}} />{{#showClear}}<button id="{{id}}_clear-button" class="slds-input__icon slds-input__icon_right slds-button slds-button_icon n2__input-clear"{{#disabled}} disabled="disabled"{{/disabled}}><svg class="slds-button__icon slds-icon-text-light" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#clear" /></svg><span class="slds-assistive-text">Clear</span></button>{{/showClear}}</div>{{#hasErrorMessage}}<div class="slds-form-element__help slds-hidden" id="{{id}}_error">{{error}}</div>{{/hasErrorMessage}}'+ncsquared.ui.Help.popupTemplate+"</div>",ncsquared.ui.components.Input.prototype.init=function(){n2j$(document).on("blur","div.n2__component input.n2__input",function(){var e=n2j$(this).closest(".n2__component"),t=n2.cm.getComponent(e.attr("id")),n=n2.cm.getValue(t);t._handleEvent("change",n)}).on("click","div.n2__component button.n2__input-clear",function(){var e=n2j$(this).closest(".n2__component"),t=n2.cm.getComponent(e.attr("id"));n2.cm.setValue(t,"",!1),ncsquared.ui.Validation.updateValid(e,!0);var n=t._getValue();t._handleEvent("type",n),t._handleEvent("change",n)}).on("keyup","div.n2__component input.n2__input.n2__input-type",function(){var e=n2.cm.getComponent(n2j$(this).closest(".n2__component").attr("id"));e._handleEvent("type",e._getValue())})},ncsquared.ui.components.Input.prototype.destroy=function(){n2j$(this.selector).remove()},ncsquared.ui.components.Input.prototype.getValue=function(e){return e||this.validate()?this._getValue():null},ncsquared.ui.components.Input.prototype.setValue=function(e,t){n2j$(this.valueSelector).val(e),!1!==t&&this.validate()},ncsquared.ui.components.Input.prototype.validate=function(){if(this._disabled||this._hidden||!this.required&&!this.hasValidation)return!0;var e=this._getValue(),t=!this.required||Boolean(e&&0<e.length),n=this.requiredError;if(t&&n2.util.isFunction(this.validation)){var s=this.validation(e);!0!==s&&(t=!1,n=s)}return n2j$(this.errorSelector).text(n),ncsquared.ui.Validation.updateValid(n2j$(this.selector),t),t},ncsquared.ui.components.Input.prototype.reset=function(){this.setValue(this.defaultValue||"",!1),ncsquared.ui.Validation.updateValid(n2j$(this.selector),!0)},ncsquared.ui.components.Input.prototype.focus=function(){return n2j$(this.valueSelector).focus(),!0},ncsquared.ui.components.Input.prototype.enable=function(){this._disabled=!1,n2j$(this.valueSelector).prop("disabled",""),n2j$(this.selector+" button.n2__input-clear").prop("disabled","")},ncsquared.ui.components.Input.prototype.disable=function(){this._disabled=!0,n2j$(this.valueSelector).prop("disabled","disabled"),n2j$(this.selector+" button.n2__input-clear").prop("disabled","disabled"),ncsquared.ui.Validation.updateValid(n2j$(this.selector),!0)},ncsquared.ui.components.Input.prototype.show=function(){this._hidden=!1,n2j$(this.selector).removeClass("slds-hide")},ncsquared.ui.components.Input.prototype.hide=function(){this._hidden=!0,n2j$(this.selector).addClass("slds-hide")},ncsquared.ui.components.Input.prototype._getValue=function(){return n2j$(this.valueSelector).val()},ncsquared.ui.components.Input.prototype._handleEvent=function(e,t){if(this.handlers.hasOwnProperty(e)){if("change"===e){if(this._previousValue===t)return;this._previousValue=t}this.handlers[e].call(this,t)}},n2.cm._registerType(ncsquared.ui.components.Input.prototype._n2Type,ncsquared.ui.components.Input),ncsquared.ui.components.Modal=function(e){n2.util.checkRequiredConfig(e,["bodySelector"]),e.size=this._sizeRegex.test(e.size)?e.size:"",e.headingIconSprite=e.headingIconSprite||"action",e.showCancel=!1!==e.cancelButton,e.cancelButton=e.cancelButton||"Cancel",e.showOK=!1!==e.okButton,e.okButton=e.okButton||"OK",e.showFooter=e.showCancel||e.showOK,this.selector="#"+e.id,this.contentSelector=this.selector+"_content",this.headingSelector=this.selector+"_heading",this.spinnerSelector=this.selector+"_spinner,"+this.selector+"_spinner-footer";var t=n2.ui.renderTemplate(this.bodyTemplate,e),n=n2j$(e.bodySelector);n2j$(t).insertAfter(n),n.detach().appendTo(this.contentSelector),n2j$(e.selector).attr("data-toggle","n2__modal").attr("data-target",e.id),this.hasHeading=Boolean(e.heading),this.heading=e.heading,this.components={};var s=this;n.find(".n2__component").each(function(){var e=this.getAttribute("id"),t=n2.cm.getComponent(e);!n2.util.isNullOrUndefined(t)&&n2.cm.isParentComponent(e)&&(s.components[e]=t,n2.cm._registerModalComponent(e))}),this.handlers={},e.handlers&&n2.util.each(e.handlers,function(e,t){s._handlersRegex.test(e)&&n2.util.isFunction(t)&&(s.handlers[e]=t)})},ncsquared.ui.components.Modal.prototype._n2Type="modal",ncsquared.ui.components.Modal.prototype._sizeRegex=/^medium$|^large$/,ncsquared.ui.components.Modal.prototype._handlersRegex=/^show$|^ok$/,ncsquared.ui.components.Modal.prototype._concernedKeys=[n2.key.KEY_ESCAPE,n2.key.KEY_ENTER],ncsquared.ui.components.Modal.prototype.bodyTemplate='<section tabindex="-1" class="slds-modal n2__component n2__modal{{#size}} slds-modal_{{size}}{{/size}}{{#cls}} {{cls}}{{/cls}}" role="dialog" id="{{id}}" aria-describedby="{{id}}_content"{{#heading}} aria-labelledby="{{id}}_heading"{{/heading}} aria-modal="true"><div class="slds-modal__container"><header class="slds-modal__header{{^heading}} slds-modal__header_empty{{/heading}}"><button title="Close" class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" data-dismiss="n2__modal"><svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#close" /></svg><span class="slds-assistive-text">Close</span></button>{{#heading}}<div class="slds-media slds-media_center slds-has-flexi-truncate">{{#headingIcon}}<div class="slds-media__figure" id="{{id}}_heading-icon"><svg class="slds-icon{{#headingIconCls}} {{headingIconCls}}{{/headingIconCls}}" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/{{headingIconSprite}}-sprite/svg/symbols.svg#{{headingIcon}}" /></svg></div>{{/headingIcon}}<div class="slds-media__body"><h2 class="slds-text-heading_medium slds-hyphenate" id="{{id}}_heading">{{heading}}</h2>{{#headingDescription}}<p class="slds-m-top_x-small" id="{{id}}_heading-description">{{headingDescription}}</p>{{/headingDescription}}</div></div>{{/heading}}</header><div class="slds-modal__content slds-p-around_medium slds-is-relative" id="{{id}}_content"><div class="slds-spinner_container slds-hide" id="{{id}}_spinner"><div class="slds-spinner slds-spinner_small" role="status"><span class="slds-assistive-text">Loading</span><div class="slds-spinner__dot-a"></div><div class="slds-spinner__dot-b"></div></div></div></div>{{#showFooter}}<footer id="{{id}}_footer" class="slds-modal__footer slds-is-relative">{{#showCancel}}<button id="{{id}}_footer-cancel-button" class="slds-button slds-button_neutral n2__modal-cancel-button" data-dismiss="n2__modal">{{cancelButton}}</button>{{/showCancel}}{{#showOK}}<button id="{{id}}_footer-ok-button" class="slds-button slds-button_brand n2__modal-ok-button">{{okButton}}</button>{{/showOK}}<div class="slds-spinner_container slds-hide" id="{{id}}_spinner-footer"></div></footer>{{/showFooter}}</div></section>',ncsquared.ui.components.Modal.prototype.init=function(){n2j$('<div class="slds-backdrop n2__modal-backdrop"></div>').appendTo(n2.ui.getScopedRoot());var n=function(e){var t=n2.cm.getComponent(e.attr("id"));if(t._mask(),n2.cm.validate(t)){var n=t._handleEvent("ok");n2.util.isPromise(n)?n.done(function(){t._unmask(),s(e)}).fail(function(){t._unmask()}):(t._unmask(),s(e))}else t._unmask()},s=function(e){e.removeClass("slds-fade-in-open"),n2j$("div.n2__modal-backdrop").removeClass("slds-backdrop_open")};n2j$(document).on("click",'[data-toggle="n2__modal"]',function(){var e=n2j$(this).attr("data-target"),t=n2j$("#"+e);if(0<t.length){var n=n2.cm.getComponent(e);n2.cm.reset(n),n._handleEvent("show"),n2j$("div.n2__modal-backdrop").addClass("slds-backdrop_open"),t.addClass("slds-fade-in-open"),n2.cm.focus(n)}}).on("click","section.n2__modal footer.slds-modal__footer button.n2__modal-ok-button",function(){n(n2j$(this).closest(".slds-modal"))}).on("click",'section.n2__modal [data-dismiss="n2__modal"]',function(){s(n2j$(this).closest(".slds-modal"))}).on("keydown",function(e){var t;if(-1!==ncsquared.ui.components.Modal.prototype._concernedKeys.indexOf(e.which)&&0<(t=n2j$("section.n2__modal.slds-modal.slds-fade-in-open")).length){switch(e.which){case n2.key.KEY_ENTER:if(n2.ui.isButtonTarget(e))return;n(t);break;case n2.key.KEY_ESCAPE:s(t)}e.preventDefault(),e.stopImmediatePropagation()}})},ncsquared.ui.components.Modal.prototype.destroy=function(){n2j$(this.selector).remove()},ncsquared.ui.components.Modal.prototype.getValues=function(){var n={};return n2.util.each(this.components,function(e,t){t.getValue&&(n[n2.cm._cleanId(e)]=t.getValue())}),n},ncsquared.ui.components.Modal.prototype.validate=function(){var n=!0;return n2.util.each(this.components,function(e,t){n2.cm.validate(t)||(n=!1)}),n},ncsquared.ui.components.Modal.prototype.reset=function(){this.hasHeading&&n2j$(this.headingSelector).text(this.heading),n2.util.each(this.components,function(e,t){n2.cm.reset(t)})},ncsquared.ui.components.Modal.prototype.focus=function(){var n=!1;return n2.util.each(this.components,function(e,t){if(n2.cm.focus(t))return!(n=!0)}),n},ncsquared.ui.components.Modal.prototype.show=function(e){this.reset(),n2.util.isFunction(e)&&e(),n2j$("div.n2__modal-backdrop").addClass("slds-backdrop_open"),n2j$(this.selector).addClass("slds-fade-in-open"),this.focus()},ncsquared.ui.components.Modal.prototype.setHeading=function(e){this.hasHeading&&n2j$(this.headingSelector).text(e||"")},ncsquared.ui.components.Modal.prototype._handleEvent=function(e){if(this.handlers.hasOwnProperty(e))return this.handlers[e].call(this)},ncsquared.ui.components.Modal.prototype._mask=function(){n2j$(this.spinnerSelector).removeClass("slds-hide")},ncsquared.ui.components.Modal.prototype._unmask=function(){n2j$(this.spinnerSelector).addClass("slds-hide")},n2.cm._registerType(ncsquared.ui.components.Modal.prototype._n2Type,ncsquared.ui.components.Modal),ncsquared.ui.components.ModalWizard=function(e){n2.util.checkRequiredConfig(e,["bodySelector:string","steps:array","steps.name:string","steps.selector:string"]),e.size=this._sizeRegex.test(e.size)?e.size:"",e.headingIconSprite=e.headingIconSprite||"action",n2.util.each(e.steps,function(e,t){t.stepNumber=e+1}),this.selector="#"+e.id,this.contentSelector=this.selector+"_content",this.headingSelector=this.selector+"_heading",this.backSelector=this.selector+"_footer-back-button",this.nextSelector=this.selector+"_footer-next-button",this.finishSelector=this.selector+"_footer-finish-button",this.progressSelector=this.selector+"_progress",this.spinnerSelector=this.selector+"_spinner,"+this.selector+"_spinner-footer",this.stepSelectors=[],this.stepNames=[];var t=n2.ui.renderTemplate(this.bodyTemplate,e),i=n2j$(e.bodySelector);n2j$(t).insertAfter(i),i.detach().prependTo(this.contentSelector),n2j$(e.selector).attr("data-toggle","n2__modal-wizard").attr("data-target",e.id),this.hasHeading=Boolean(e.heading),this.heading=e.heading,this.stepsLastIndex=Math.max(0,e.steps.length-1),this.currentIndex=0,this.components=[];var o=this;n2.util.each(e.steps,function(e,t){o.stepSelectors.push(o.contentSelector+" "+t.selector),o.stepNames.push(t.name);var n=i.find(t.selector);n.addClass("slds-hide");var s={};o.components.push(s),n.find(" .n2__component").each(function(){var e=this.getAttribute("id"),t=n2.cm.getComponent(e);!n2.util.isNullOrUndefined(t)&&n2.cm.isParentComponent(e)&&(s[e]=t,n2.cm._registerModalComponent(e))})}),this.handlers={},e.handlers&&n2.util.each(e.handlers,function(e,t){o._handlersRegex.test(e)&&n2.util.isFunction(t)&&(o.handlers[e]=t)})},ncsquared.ui.components.ModalWizard.prototype._n2Type="modal-wizard",ncsquared.ui.components.ModalWizard.prototype._sizeRegex=/^medium$|^large$/,ncsquared.ui.components.ModalWizard.prototype._handlersRegex=/^show$|^showStep$|^finish$/,ncsquared.ui.components.ModalWizard.prototype._concernedKeys=[n2.key.KEY_ESCAPE,n2.key.KEY_ENTER],ncsquared.ui.components.ModalWizard.prototype.bodyTemplate='<section tabindex="-1" class="slds-modal n2__component n2__modal-wizard{{#size}} slds-modal_{{size}}{{/size}}{{#cls}} {{cls}}{{/cls}}" role="dialog" id="{{id}}" aria-describedby="{{id}}_content"{{#heading}} aria-labelledby="{{id}}_heading"{{/heading}} aria-modal="true"><div class="slds-modal__container"><header class="slds-modal__header{{^heading}} slds-modal__header_empty{{/heading}}"><button title="Close" class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" data-dismiss="n2__modal-wizard"><svg class="slds-button__icon slds-button__icon_large" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#close" /></svg><span class="slds-assistive-text">Close</span></button>{{#heading}}<div class="slds-media slds-media_center slds-has-flexi-truncate">{{#headingIcon}}<div class="slds-media__figure" id="{{id}}_heading-icon"><svg class="slds-icon{{#headingIconCls}} {{headingIconCls}}{{/headingIconCls}}" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/{{headingIconSprite}}-sprite/svg/symbols.svg#{{headingIcon}}" /></svg></div>{{/headingIcon}}<div class="slds-media__body"><h2 class="slds-text-heading_medium slds-hyphenate" id="{{id}}_heading">{{heading}}</h2>{{#headingDescription}}<p class="slds-m-top_x-small" id="{{id}}_heading-description">{{headingDescription}}</p>{{/headingDescription}}</div></div>{{/heading}}</header><div class="slds-modal__content slds-p-around_medium slds-is-relative" id="{{id}}_content"><div class="slds-spinner_container slds-hide" id="{{id}}_spinner"><div class="slds-spinner slds-spinner_small" role="status"><span class="slds-assistive-text">Loading</span><div class="slds-spinner__dot-a"></div><div class="slds-spinner__dot-b"></div></div></div></div><footer id="{{id}}_footer" class="slds-modal__footer slds-modal__footer_directional slds-is-relative"><div class="slds-grid"><button id="{{id}}_footer-back-button" class="slds-button slds-button_neutral n2__modal-wizard-back-button slds-hidden">Back</button><div class="n2__progress-wrapper"><div id="{{id}}_progress" class="slds-progress slds-progress_shade"><ol class="slds-progress__list">{{#steps}}<li class="slds-progress__item" data-name="{{name}}"><button class="slds-button slds-progress__marker" title="{{name}}" data-step="{{stepNumber}}"><svg class="slds-button__icon slds-hide" aria-hidden="true"><use xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#success"></use></svg><span class="slds-assistive-text">{{name}}</span></button></li>{{/steps}}</ol><div class="slds-progress-bar slds-progress-bar_x-small" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" role="progressbar"><span class="slds-progress-bar__value" style="width: 0%;"><span class="slds-assistive-text">Progress: 0%</span></span></div></div></div><button id="{{id}}_footer-next-button" class="slds-button slds-button_brand n2__modal-wizard-next-button slds-hide">Next</button><button id="{{id}}_footer-finish-button" class="slds-button slds-button_brand n2__modal-wizard-finish-button slds-hide">Finish</button></div><div class="slds-spinner_container slds-hide" id="{{id}}_spinner-footer"></div></footer></div></section>',ncsquared.ui.components.ModalWizard.prototype.init=function(){n2j$('<div class="slds-backdrop n2__modal-wizard-backdrop"></div>').appendTo(n2.ui.getScopedRoot());var n=function(e){var t=n2.cm.getComponent(e.attr("id"));if(t._mask(),n2.cm.validate(t)){var n=t._handleEvent("finish");n2.util.isPromise(n)?n.done(function(){t._unmask(),s(e)}).fail(function(){t._unmask()}):(t._unmask(),s(e))}else t._unmask()},s=function(e){e.removeClass("slds-fade-in-open"),n2j$("div.n2__modal-wizard-backdrop").removeClass("slds-backdrop_open")};n2j$(document).on("click",'[data-toggle="n2__modal-wizard"]',function(){var e=n2j$(this).attr("data-target"),t=n2j$("#"+e);if(0<t.length){var n=n2.cm.getComponent(e);n2.cm.reset(n),n._handleEvent("show"),n2j$("div.n2__modal-wizard-backdrop").addClass("slds-backdrop_open"),t.addClass("slds-fade-in-open"),n2.cm.focus(n)}}).on("click","section.n2__modal-wizard footer.slds-modal__footer button.n2__modal-wizard-finish-button",function(){n(n2j$(this).closest(".slds-modal"))}).on("click","section.n2__modal-wizard footer.slds-modal__footer button.n2__modal-wizard-next-button",function(){var e=n2j$(this).closest(".slds-modal");n2.cm.getComponent(e.attr("id")).nextStep()}).on("click","section.n2__modal-wizard footer.slds-modal__footer button.n2__modal-wizard-back-button",function(){var e=n2j$(this).closest(".slds-modal");n2.cm.getComponent(e.attr("id")).previousStep()}).on("click",'section.n2__modal-wizard [data-dismiss="n2__modal-wizard"]',function(){s(n2j$(this).closest(".slds-modal"))}).on("click","section.n2__modal-wizard footer.slds-modal__footer li.slds-progress__item.slds-is-completed > button",function(){var e=n2j$(this),t=e.closest(".slds-modal");n2.cm.getComponent(t.attr("id")).goToStep(e.attr("data-step"))}).on("keydown",function(e){var t;if(-1!==ncsquared.ui.components.ModalWizard.prototype._concernedKeys.indexOf(e.which)&&0<(t=n2j$("section.n2__modal-wizard.slds-modal.slds-fade-in-open")).length){switch(e.which){case n2.key.KEY_ENTER:if(n2.ui.isButtonTarget(e))return;t.find("footer.slds-modal__footer button.n2__modal-wizard-finish-button").hasClass("slds-hide")?n2.cm.getComponent(t.attr("id")).nextStep():n(t);break;case n2.key.KEY_ESCAPE:s(t)}e.preventDefault(),e.stopImmediatePropagation()}})},ncsquared.ui.components.ModalWizard.prototype.destroy=function(){n2j$(this.selector).remove()},ncsquared.ui.components.ModalWizard.prototype.getValues=function(){var n={};return n2.util.each(this.components,function(e,t){n2.util.each(t,function(e,t){t.getValue&&(n[n2.cm._cleanId(e)]=t.getValue())})}),n},ncsquared.ui.components.ModalWizard.prototype.validate=function(){var n=!0;return n2.util.each(this.components[this.currentIndex],function(e,t){n2.cm.validate(t)||(n=!1)}),n},ncsquared.ui.components.ModalWizard.prototype.reset=function(){n2.util.each(this.components,function(e,t){n2.util.each(t,function(e,t){n2.cm.reset(t)})}),this.currentIndex=0,this._updateSteps()},ncsquared.ui.components.ModalWizard.prototype.focus=function(){var n=!1;return n2.util.each(this.components[this.currentIndex],function(e,t){if(n2.cm.focus(t))return!(n=!0)}),n},ncsquared.ui.components.ModalWizard.prototype.show=function(e){this.reset(),n2.util.isFunction(e)&&e(),n2j$("div.n2__modal-wizard-backdrop").addClass("slds-backdrop_open"),n2j$(this.selector).addClass("slds-fade-in-open"),this.focus()},ncsquared.ui.components.ModalWizard.prototype.nextStep=function(){this.goToStep(this.currentIndex+2)},ncsquared.ui.components.ModalWizard.prototype.previousStep=function(){this.goToStep(this.currentIndex)},ncsquared.ui.components.ModalWizard.prototype.goToStep=function(e){if(n2.util.isNumber(e)){var t=Number(e)-1;if(0<=t&&t<=this.stepsLastIndex&&(t<this.currentIndex||t===this.currentIndex+1)&&(t<this.currentIndex||this.validate())){var n=this.currentIndex+1;this.currentIndex=t,this._updateSteps(n)}}},ncsquared.ui.components.ModalWizard.prototype._updateSteps=function(e){this._mask(),0===this.currentIndex?n2j$(this.backSelector).addClass("slds-hidden"):n2j$(this.backSelector).removeClass("slds-hidden"),this.currentIndex===this.stepsLastIndex?(n2j$(this.nextSelector).addClass("slds-hide"),n2j$(this.finishSelector).removeClass("slds-hide")):(n2j$(this.nextSelector).removeClass("slds-hide"),n2j$(this.finishSelector).addClass("slds-hide"));var i=this;n2.util.each(this.stepSelectors,function(e,t){i.currentIndex===e?n2j$(t).removeClass("slds-hide"):n2j$(t).addClass("slds-hide")}),n2j$(this.progressSelector+" li.slds-progress__item").each(function(e,t){var n=n2j$(t),s=n.attr("data-name");i.currentIndex>e?(n.removeClass("slds-is-active").addClass("slds-is-completed"),n.find("button").addClass("slds-button_icon slds-button_icon slds-progress__marker_icon").attr("title",s+" - Completed"),n.find("svg").removeClass("slds-hide"),n.find("span").text(s+" - Completed")):i.currentIndex===e?(n.addClass("slds-is-active").removeClass("slds-is-completed"),n.find("button").removeClass("slds-button_icon slds-button_icon slds-progress__marker_icon").attr("title",s),n.find("svg").addClass("slds-hide"),n.find("span").text(s+" - Active")):(n.removeClass("slds-is-active slds-is-completed"),n.find("button").removeClass("slds-button_icon slds-button_icon slds-progress__marker_icon").attr("title",s),n.find("svg").addClass("slds-hide"),n.find("span").text(s))});var t=Math.round(this.currentIndex/this.stepsLastIndex*100);n2.util.isNumber(t)||(t=0);var n=n2j$(this.progressSelector+" div.slds-progress-bar");if(n.attr("aria-valuenow",t),n.find("span.slds-progress-bar__value").css("width",t+"%"),n.find("span.slds-assistive-text").text("Progress: "+t+"%"),this.hasHeading){var s=this.stepNames[this.currentIndex];n2.util.isString(s)&&0<s.length?n2j$(this.headingSelector).text(this.heading+" > "+s):n2j$(this.headingSelector).text(this.heading)}var o=[this.currentIndex+1];!n2.util.isNullOrUndefined(e)&&n2.util.isNumber(e)&&o.push(Number(e));var l=this._handleEvent("showStep",o);n2.util.isPromise(l)?l.done(function(){i._unmask(),i.focus()}):(this._unmask(),this.focus())},ncsquared.ui.components.ModalWizard.prototype._handleEvent=function(e,t){if(this.handlers.hasOwnProperty(e))return n2.util.isNullOrUndefined(t)?this.handlers[e].call(this):this.handlers[e].apply(this,t)},ncsquared.ui.components.ModalWizard.prototype._mask=function(){n2j$(this.spinnerSelector).removeClass("slds-hide")},ncsquared.ui.components.ModalWizard.prototype._unmask=function(){n2j$(this.spinnerSelector).addClass("slds-hide")},n2.cm._registerType(ncsquared.ui.components.ModalWizard.prototype._n2Type,ncsquared.ui.components.ModalWizard),ncsquared.ui.components.PillList=function(e){e.pillLabelKey=e.pillLabelKey||"label",e.ignoreDelimiterInQuotes=n2.util.getDefaultBoolean(e.ignoreDelimiterInQuotes,!0),e.readOnly=n2.util.getDefaultBoolean(e.readOnly,!1),e.required=n2.util.getDefaultBoolean(e.required,!1),e.requiredError=e.requiredError||"This field is required",e.showClear=n2.util.getDefaultBoolean(e.showClear,!1);var t=n2.ui.renderTemplate(this.bodyTemplate,e);if(n2j$(e.selector).replaceWith(t),this.selector="#"+e.id,this.controlSelector=this.selector+"_control",this.listSelector=this.selector+"_listbox",this.listItemSelector=this.listSelector+" > li.n2__pill-item",this.editInputSelector=this.selector+"_edit-input",this.editInputItemSelector=this.selector+"_edit-input-item",this.messageSelector=this.selector+"_message",this.messageDuplicatesSelector=this.selector+"_message-duplicates",this.spinnerSelector=this.selector+"_spinner",this.pillLabelKey=e.pillLabelKey,this.defaultValue=this._removeDuplicatePills(e.defaultValue),this.ignoreDelimiterInQuotes=e.ignoreDelimiterInQuotes,this.readOnly=e.readOnly,this.required=e.required,this.setDelimiter(e.delimiter),0<this.defaultValue.length&&this._addPills(this.defaultValue,!0,!1),this.handlers={},e.handlers){var n=this;n2.util.each(e.handlers,function(e,t){n._handlersRegex.test(e)&&n2.util.isFunction(t)&&(n.handlers[e]=t)})}},ncsquared.ui.components.PillList.prototype._n2Type="pill-list",ncsquared.ui.components.PillList.prototype._handlersRegex=/^add$|^change$/,ncsquared.ui.components.PillList.prototype._concernedKeys=[n2.key.KEY_BACKSPACE,n2.key.KEY_DELETE,n2.key.KEY_LEFT,n2.key.KEY_RIGHT],ncsquared.ui.components.PillList.prototype._internalSeparator="Â¬",ncsquared.ui.components.PillList.prototype.bodyTemplate='<div class="slds-form-element n2__component{{#cls}} {{cls}}{{/cls}}" id="{{id}}"><div class="slds-grid">{{#label}}<label class="slds-form-element__label" for="{{id}}_input">{{#required}}<abbr title="Required" class="slds-required">*</abbr> {{/required}}{{label}}</label>{{/label}}'+ncsquared.ui.Help.triggerTemplate+'{{#showClear}}<div class="slds-col slds-text-align_right"><a id="{{id}}_clear-pills" class="n2__pill-list-clear">Clear All</a></div>{{/showClear}}</div><div class="slds-form-element__control" id="{{id}}_control"><div class="slds-pill_container slds-is-relative{{^readOnly}} n2__pill-list-container-editable{{/readOnly}}"{{#minHeight}} style="min-height: {{minHeight}}"{{/minHeight}}><ul class="slds-listbox slds-listbox_horizontal" role="listbox" aria-label="Selected Options:" aria-orientation="horizontal" id="{{id}}_listbox"{{#required}} aria-describedby="{{id}}_error" required="required"{{/required}}>{{^readOnly}}<li class="slds-listbox-item" id="{{id}}_edit-input-item" role="presentation"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" id="{{id}}_edit-input" class="n2__pill-list-input"></li>{{/readOnly}}</ul><div class="slds-spinner_container slds-hide" id="{{id}}_spinner"><div class="slds-spinner slds-spinner_small" role="status"><span class="slds-assistive-text">Loading</span><div class="slds-spinner__dot-a"></div><div class="slds-spinner__dot-b"></div></div></div></div>{{#required}}<div class="slds-form-element__help slds-hidden" id="{{id}}_error">{{requiredError}}</div>{{/required}}</div><div class="slds-form-element__help slds-hide n2__pill-list-message" id="{{id}}_message"></div><div class="slds-form-element__help slds-hide" id="{{id}}_message-duplicates"></div>'+ncsquared.ui.Help.popupTemplate+"</div>",ncsquared.ui.components.PillList.prototype.pillsTemplate='{{#pills}}<li class="slds-listbox-item n2__pill-item" role="presentation"><span class="slds-pill" role="option" aria-selected="true"><span title="{{.}}" class="slds-pill__label">{{.}}</span>{{^readOnly}}<span title="Remove" class="slds-icon_container slds-pill__remove"><svg class="slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#close" /></svg><span class="slds-assistive-text">Press delete or backspace to remove</span></span>{{/readOnly}}</span></li>{{/pills}}',ncsquared.ui.components.PillList.prototype.init=function(){n2j$(document).on("click","div.n2__component li.n2__pill-item > span.slds-pill",function(e){var t=n2j$(this);n2.cm.getComponent(t.closest("div.n2__component").attr("id"))._focusPill(t.closest("li.n2__pill-item")),e.preventDefault(),e.stopImmediatePropagation()}).on("click","div.n2__component span.slds-pill__remove",function(e){var t=n2j$(this);n2.cm.getComponent(t.closest("div.n2__component").attr("id"))._removePill(t.closest("li.n2__pill-item")),e.preventDefault(),e.stopImmediatePropagation()}).on("click","div.n2__component div.n2__pill-list-container-editable",function(){n2j$(this).find("input").focus()}).on("click","div.n2__component a.n2__pill-list-clear",function(){n2.cm.getComponent(n2j$(this).closest("div.n2__component").attr("id"))._clearPills()}).on("keydown","div.n2__component li.n2__pill-item > span.slds-pill",function(e){if(-1!==ncsquared.ui.components.PillList.prototype._concernedKeys.indexOf(e.which)){var t=n2j$(this),n=n2.cm.getComponent(t.closest("div.n2__component").attr("id"));switch(e.which){case n2.key.KEY_BACKSPACE:case n2.key.KEY_DELETE:n._removePill(t.closest("li.n2__pill-item"));break;case n2.key.KEY_LEFT:n._focusPill(t.closest("li.n2__pill-item").prev());break;case n2.key.KEY_RIGHT:n._focusPill(t.closest("li.n2__pill-item").next())}e.preventDefault(),e.stopImmediatePropagation()}}).on("keydown","div.n2__component input.n2__pill-list-input",function(e){var t=n2j$(this),n=function(){return n2.cm.getComponent(t.closest("div.n2__component").attr("id"))},s=!1;if(n2.key.KEY_BACKSPACE===e.which){if(0===e.target.value.length){var i=n();i._focusPill(i._getLastPill()),e.preventDefault(),e.stopImmediatePropagation()}}else if(n2.key.KEY_ENTER===e.which||n2.key.KEY_TAB===e.which||(s=-1!==t.attr("data-delimiters").split(ncsquared.ui.components.PillList.prototype._internalSeparator).indexOf(e.key)))if(0!==e.target.value.length){var o=e.target.value;e.target.value="",n()._addLabels([o],!0),e.preventDefault(),e.stopImmediatePropagation()}else s&&(e.preventDefault(),e.stopImmediatePropagation())}).on("blur","div.n2__component input.n2__pill-list-input",function(e){var t=n2.cm.getComponent(n2j$(this).closest("div.n2__component").attr("id"));0<e.target.value.length?(t._addLabels([e.target.value]),e.target.value=""):e.target.disabled||n2.cm.validate(t)}).on("paste","div.n2__component input.n2__pill-list-input",function(e){var t=n2j$(this),n=n2.cm.getComponent(t.closest("div.n2__component").attr("id")),s=e.originalEvent.clipboardData||window.clipboardData;if(s&&s.getData){var i=e.target.value+s.getData("text");e.target.value="",n._pasteLabels(i)}e.preventDefault(),e.stopImmediatePropagation()})},ncsquared.ui.components.PillList.prototype.destroy=function(){n2j$(this.selector).remove()},ncsquared.ui.components.PillList.prototype.getValue=function(e){return e||this.validate()?this._getValue():null},ncsquared.ui.components.PillList.prototype.setValue=function(e,t){n2.util.isString(e)&&(e=[e]),n2.util.isArray(e)&&(this._clearPills(),e=this._removeDuplicatePills(e),this._addPills(e,!0,t))},ncsquared.ui.components.PillList.prototype.validate=function(){if(!this.required)return!0;var e=0<n2j$(this.listItemSelector).length;return ncsquared.ui.Validation.updateValid(n2j$(this.controlSelector),e),e},ncsquared.ui.components.PillList.prototype.reset=function(){n2j$(this.listItemSelector).remove(),0<this.defaultValue.length&&this._addPills(this.defaultValue,!0,!1),this._hideMessages(),ncsquared.ui.Validation.updateValid(n2j$(this.controlSelector),!0)},ncsquared.ui.components.PillList.prototype.focus=function(){return!this.readOnly&&(n2j$(this.editInputSelector).focus(),!0)},ncsquared.ui.components.PillList.prototype.setDelimiter=function(e){if(!this.readOnly){this.delimiters=n2.util.isArray(e)?e:[e||";"],n2j$(this.editInputSelector).attr("data-delimiters",this.delimiters.join(this._internalSeparator));var t=["[","\\","^","$",".","|","?","*","+","(",")","{","}"],n=n2.util.map(this.delimiters,function(e){return-1===t.indexOf(e)?e:"\\"+e});n.push(this._internalSeparator),this.delimitersRegex=new RegExp(n.join("|"))}},ncsquared.ui.components.PillList.prototype._getValue=function(){return n2j$(this.listItemSelector).map(function(){return n2j$(this).data("n2__pill")}).get()},ncsquared.ui.components.PillList.prototype._removeDuplicatePills=function(e){var s=[],i=this;return n2.util.isArray(e)&&n2.util.each(e,function(e,t){var n=n2.util.isObject(t)?t[i.pillLabelKey]:t;0<(n=n||"").length&&!i._checkMatches(s,t,n)&&s.push(t)}),s},ncsquared.ui.components.PillList.prototype._pasteLabels=function(e){if(e=e.replace(/([\r]?\n)|(\t)/g,this._internalSeparator),this.ignoreDelimiterInQuotes){for(var t,n=[],s="",i=!1,o=e.length,l=0;l<o;l++)'"'===(t=e[l])?i=!i:this._internalSeparator===t||!i&&-1!==this.delimiters.indexOf(t)?(n.push(s),s=""):s+=t;0<s.length&&n.push(s),this._addLabels(n,!0)}else this._addLabels(e.split(this.delimitersRegex),!0)},ncsquared.ui.components.PillList.prototype._addLabels=function(e,t){this._hideMessages();var s=[],i=[],n=this;if(n2.util.each(e,function(e,t){var n=(t=t.trim()).toLowerCase();0<t.length&&-1===i.indexOf(n)&&(s.push(t),i.push(n))}),0!==s.length){if(n2.util.isFunction(this.handlers.add)){var o=this.handlers.add.call(this,s);n2.util.isNullOrUndefined(o)||(n2.util.isPromise(o)?(n._mask(),o.done(function(e){n._addPills(e.pills),n._addMessage(e.message),n._unmask(),t&&n2j$(n.editInputSelector).focus()})):(this._addPills(o.pills),this._addMessage(o.message)))}else this._addPills(s),this._addMessage();t&&n2j$(n.editInputSelector).focus()}},ncsquared.ui.components.PillList.prototype._addPills=function(e,t,n){var s=[],i=[],o=[],l=this,r=n2j$(this.listItemSelector).map(function(e,t){return n2j$(t).data("n2__pill")}).get();if(n2.util.each(e,function(e,t){var n=n2.util.isObject(t)?t[l.pillLabelKey]:t;0<(n=n||"").length&&(l._checkMatches(r,t,n)?-1===o.indexOf(n)&&o.push(n):l._checkMatches(i,t,n)||(s.push(n),i.push(t)))}),0<o.length&&n2j$(this.messageDuplicatesSelector).text('The following items were not added as they already existed: "'+o.join('", "')+'"').removeClass("slds-hide"),0!==s.length){var a=n2.ui.renderTemplate(this.pillsTemplate,{pills:s,readOnly:this.readOnly}),d=n2j$(this.listItemSelector).length;this.readOnly?n2j$(this.listSelector).append(a):n2j$(this.editInputItemSelector).before(a),n2j$(this.listItemSelector).each(function(e,t){d<=e&&n2j$(t).data("n2__pill",i[e-d])}),this._focusPill(t?this._getFirstPill():this._getLastPill(),!0);var c=!0;!1!==n&&(c=this.validate()),this.handlers&&this.handlers.hasOwnProperty("change")&&this.handlers.change.call(this,c?this._getValue():null)}},ncsquared.ui.components.PillList.prototype._removePill=function(e){if(!this.readOnly&&n2.ui.isJQuery(e)&&0<e.length){var t=e.prev();e.remove(),0===t.length&&(t=this._getFirstPill()),0===t.length?n2j$(this.editInputSelector).focus():this._focusPill(t),this._hideMessages(),this.handlers.hasOwnProperty("change")&&this.handlers.change.call(this,this._getValue())}},ncsquared.ui.components.PillList.prototype._clearPills=function(){n2j$(this.listItemSelector).remove(),this._hideMessages()},ncsquared.ui.components.PillList.prototype._focusPill=function(e,t){if(n2.ui.isJQuery(e)&&0<e.length&&e.hasClass("n2__pill-item")){e.closest(".slds-listbox").find("span.slds-pill").removeAttr("tabindex");var n=e.find("span.slds-pill");n.attr("tabindex",0),!0!==t&&n.focus()}},ncsquared.ui.components.PillList.prototype._getFirstPill=function(){return n2j$(this.listItemSelector).first()},ncsquared.ui.components.PillList.prototype._getLastPill=function(){return n2j$(this.listItemSelector).last()},ncsquared.ui.components.PillList.prototype._hideMessages=function(){n2j$(this.messageSelector).addClass("slds-hide"),n2j$(this.messageDuplicatesSelector).addClass("slds-hide")},ncsquared.ui.components.PillList.prototype._addMessage=function(e){n2.util.isNullOrUndefined(e)||0===e.length?n2j$(this.messageSelector).addClass("slds-hide"):n2j$(this.messageSelector).text(e).removeClass("slds-hide")},ncsquared.ui.components.PillList.prototype._checkMatches=function(e,n,s){var i=!1;if(n2.util.isArray(e)&&0<e.length){var o=n2.util.isObject(n),l=this.pillLabelKey;s=s.toLowerCase(),n2.util.each(e,function(e,t){if(n2.util.isObject(t)){if(o&&n2.util.equalsDeep(t,n))return!(i=!0);if(!o&&t.hasOwnProperty(l)&&s===t[l].toLowerCase())return!(i=!0)}else if(s===t.toLowerCase())return!(i=!0)})}return i},ncsquared.ui.components.PillList.prototype._mask=function(){n2j$(this.editInputSelector).prop("disabled","disabled"),n2j$(this.spinnerSelector).removeClass("slds-hide")},ncsquared.ui.components.PillList.prototype._unmask=function(){n2j$(this.editInputSelector).prop("disabled",""),n2j$(this.spinnerSelector).addClass("slds-hide")},n2.cm._registerType(ncsquared.ui.components.PillList.prototype._n2Type,ncsquared.ui.components.PillList),ncsquared.ui.components.RadioGroup=function(e){n2.util.checkRequiredConfig(e,["data","data.label","data.value"]),e.sort=n2.util.getDefaultBoolean(e.sort,!0),e.required=n2.util.getDefaultBoolean(e.required,!1),e.requiredError=e.requiredError||"This field is required";var t=!1;if(n2.util.isFunction(e.data)){this.data=e.data;var n=e.data.call(this);n2.util.isPromise(n)?(t=n,e.showSpinner=!0):e.data=n}this.sort=e.sort,e.radioButtons=e.showSpinner?[]:this._getRadioButtons(e.data,e.defaultValue),delete e.data;var s=n2.ui.renderTemplate(this.bodyTemplate,e);n2j$(e.selector).replaceWith(s),this.selector="#"+e.id,this.containerSelector=this.selector+"_group",this.valueSelector=this.containerSelector+" input.n2__radio-group",this.errorSelector=this.selector+"_error",this.spinnerSelector=this.selector+"_spinner",n2.util.isNullOrUndefined(e.defaultValue)||(this.defaultValue=String(e.defaultValue)),this.required=e.required;var i=this;t&&t.done(function(e){i._addRadioButtons(e,!1,i.defaultValue)})},ncsquared.ui.components.RadioGroup.prototype._n2Type="radio-group",ncsquared.ui.components.RadioGroup.prototype.radioButtonTemplate='{{#radioButtons}}<div class="slds-radio"><input class="n2__radio-group" id="{{id}}_radio-{{index}}" name="{{id}}_radio" type="radio" value="{{value}}"{{#checked}} checked{{/checked}}{{#required}} aria-describedby="{{id}}_error" required="required"{{/required}} /><label class="slds-radio__label" for="{{id}}_radio-{{index}}" title="{{label}}"><span class="slds-radio_faux"></span><span class="slds-form-element__label">{{label}}</span></label></div>{{/radioButtons}}',ncsquared.ui.components.RadioGroup.prototype.bodyTemplate='<fieldset class="slds-form-element n2__component{{#cls}} {{cls}}{{/cls}}" id="{{id}}">{{#label}}<legend class="slds-form-element__legend slds-form-element__label" for="{{id}}_group">{{#required}}<abbr title="Required" class="slds-required">*</abbr> {{/required}}{{label}}</legend>'+ncsquared.ui.Help.triggerTemplate+'{{/label}}<div class="slds-form-element__control" id="{{id}}_group">'+ncsquared.ui.components.RadioGroup.prototype.radioButtonTemplate+'<div class="slds-spinner_container{{^showSpinner}} slds-hide{{/showSpinner}}" id="{{id}}_spinner"><div class="slds-spinner slds-spinner_small" role="status"><span class="slds-assistive-text">Loading</span><div class="slds-spinner__dot-a"></div><div class="slds-spinner__dot-b"></div></div></div>{{#required}}<div class="slds-form-element__help slds-hidden" id="{{id}}_error">{{requiredError}}</div>{{/required}}</div>'+ncsquared.ui.Help.popupTemplate+"</fieldset>",ncsquared.ui.components.RadioGroup.prototype.init=function(){n2j$(document).on("change","fieldset.n2__component input.n2__radio-group",function(){n2.cm.validate(n2j$(this).closest(".n2__component").attr("id"))})},ncsquared.ui.components.RadioGroup.prototype.destroy=function(){n2j$(this.selector).remove()},ncsquared.ui.components.RadioGroup.prototype.getValue=function(e){return e||this.validate()?this._getValue()||"":null},ncsquared.ui.components.RadioGroup.prototype.setValue=function(n,e){n2j$(this.valueSelector).each(function(e,t){n===t.value?n2j$(t).prop("checked",!0):n2j$(t).prop("checked","")}),!1!==e&&this.validate()},ncsquared.ui.components.RadioGroup.prototype.validate=function(){if(!this.required)return!0;var e=n2j$(this.valueSelector).is(":checked");return ncsquared.ui.Validation.updateValid(n2j$(this.selector),e),e},ncsquared.ui.components.RadioGroup.prototype.reset=function(){this.setValue(this.defaultValue,!1),ncsquared.ui.Validation.updateValid(n2j$(this.selector),!0)},ncsquared.ui.components.RadioGroup.prototype.refresh=function(e){if(n2.util.isFunction(this.data)){n2j$(this.spinnerSelector).removeClass("slds-hide");var t=!0===e&&0<n2j$(this.valueSelector).length?this._getValue():this.defaultValue,n=this.data();if(n&&n2.util.isPromise(n)){var s=this;n.done(function(e){s._addRadioButtons(e,!0,t)})}else this._addRadioButtons(n,!0,t);ncsquared.ui.Validation.updateValid(n2j$(this.selector),!0)}},ncsquared.ui.components.RadioGroup.prototype.focus=function(){return n2j$(this.valueSelector).eq(0).focus(),!0},ncsquared.ui.components.RadioGroup.prototype._getRadioButtons=function(e,s){if(n2.util.isArray(e)){var i=[];return n2.util.each(e,function(e,t){var n;(n=n2.util.isString(t)?{label:t,value:t}:t).index=e,n.checked=s===n.value,i.push(n)}),this.sort&&i.sort(function(e,t){return n2.util.compareObjectValues(e,t,"label")}),i}throw new Error("data must by an array")},ncsquared.ui.components.RadioGroup.prototype._addRadioButtons=function(e,t,n){t&&n2j$(this.containerSelector+" > div.slds-radio").remove();var s=this._getRadioButtons(e,n),i=n2.ui.renderTemplate(this.radioButtonTemplate,{radioButtons:s});n2j$(i).prependTo(this.containerSelector),n2j$(this.spinnerSelector).addClass("slds-hide")},ncsquared.ui.components.RadioGroup.prototype._getValue=function(){return n2j$(this.valueSelector+":checked").eq(0).val()},n2.cm._registerType(ncsquared.ui.components.RadioGroup.prototype._n2Type,ncsquared.ui.components.RadioGroup),ncsquared.ui.components.Select=function(e){n2.util.checkRequiredConfig(e,["data","data.label","data.value"]),e.multiselect=n2.util.getDefaultBoolean(e.multiselect,!1),e.sort=n2.util.getDefaultBoolean(e.sort,!0),e.required=n2.util.getDefaultBoolean(e.required,!1),e.requiredError=e.requiredError||"This field is required",e.requiredOption=e.requiredOption||"--Please select--",e.emptyOption=e.emptyOption||"",n2.util.isNullOrUndefined(e.defaultValue)||delete e.placeholder,!e.multiselect&&n2.util.isArray(e.defaultValue)&&0<e.defaultValue.length&&(e.defaultValue=e.defaultValue[0]),e.disabled=n2.util.getDefaultBoolean(e.disabled,!1),this._disabled=e.disabled;var t=!1,n=!1;if(n2.util.isFunction(e.data)){this.data=e.data;var s=e.data.call(this);n2.util.isNullOrUndefined(s)?(n=!0,e.disabled=!0):n2.util.isPromise(s)?(t=s,n=!0,e.disabled=!0,e.showSpinner=!0):e.data=s}this.sort=e.sort,e.options=n?[]:this._getOptions(e.data,e.defaultValue),delete e.data;var i=n2.ui.renderTemplate(this.bodyTemplate,e);n2j$(e.selector).replaceWith(i),this.selector="#"+e.id,this.valueSelector=this.selector+"_select",this.errorSelector=this.selector+"_error",this.spinnerSelector=this.selector+"_spinner",this.defaultValue=e.defaultValue,this._hidden=!1,this.required=e.required;var o,l=this;e.handlers&&n2.util.each(e.handlers,function(e,t){n2.util.isFunction(t)&&("change"===e?n2j$(l.valueSelector).on("change",function(){t.call(l,l.getValue())}):"load"===e&&(o=t))}),t?t.done(function(e){l._addOptions(e,!1,l.defaultValue),o&&o.call(l,l._getValue())}):o&&o.call(this,this._getValue())},ncsquared.ui.components.Select.prototype._n2Type="select",ncsquared.ui.components.Select.prototype.optionsTemplate='{{#options}}<option class="n2__select-option" value="{{value}}"{{#selected}} selected{{/selected}}>{{label}}</option>{{/options}}',ncsquared.ui.components.Select.prototype.emptyOptionTemplate='<option value="" class="n2__select-option-empty" disabled selected hidden></option>',ncsquared.ui.components.Select.prototype.bodyTemplate='<div class="slds-form-element n2__component{{#cls}} {{cls}}{{/cls}}" id="{{id}}">{{#label}}<label class="slds-form-element__label" for="{{id}}_select">{{#required}}<abbr title="Required" class="slds-required">*</abbr> {{/required}}{{label}}</label>{{/label}}'+ncsquared.ui.Help.triggerTemplate+'<div class="slds-form-element__control">{{^multiselect}}<div class="slds-select_container">{{/multiselect}}<select class="slds-select n2__select" id="{{id}}_select"{{#required}} aria-describedby="{{id}}_error" required="required"{{/required}}{{#disabled}} disabled{{/disabled}}{{#multiselect}} multiple="multiple"{{/multiselect}}>{{^multiselect}}{{#placeholder}}<option value="" class="n2__select-option-empty" disabled selected hidden>{{placeholder}}</option>{{/placeholder}}{{^placeholder}}{{^defaultValue}}'+ncsquared.ui.components.Select.prototype.emptyOptionTemplate+'{{/defaultValue}}{{/placeholder}}<option class="n2__select-option-empty" value="n2__empty">{{#required}}{{requiredOption}}{{/required}}{{^required}}{{emptyOption}}{{/required}}</option>{{/multiselect}}'+ncsquared.ui.components.Select.prototype.optionsTemplate+'</select><div class="slds-spinner slds-spinner_x-small{{^showSpinner}} slds-hide{{/showSpinner}}" id="{{id}}_spinner" role="status"><span class="slds-assistive-text">Loading</span><div class="slds-spinner__dot-a"></div><div class="slds-spinner__dot-b"></div></div>{{^multiselect}}</div>{{/multiselect}}</div>{{#required}}<div class="slds-form-element__help slds-hidden" id="{{id}}_error">{{requiredError}}</div>{{/required}}'+ncsquared.ui.Help.popupTemplate+"</div>",ncsquared.ui.components.Select.prototype.init=function(){n2j$(document).on("blur","div.n2__component select.n2__select",function(){n2.cm.validate(n2j$(this).closest(".n2__component").attr("id"))})},ncsquared.ui.components.Select.prototype.destroy=function(){n2j$(this.selector).remove()},ncsquared.ui.components.Select.prototype.getValue=function(e){return e||this.validate()?this._getValue():null},ncsquared.ui.components.Select.prototype.setValue=function(e,t){n2j$(this.valueSelector).val(e),!1!==t&&this.validate()},ncsquared.ui.components.Select.prototype.validate=function(){if(this._disabled||this._hidden||!this.required)return!0;var e=this._getValue(),t=Boolean(e&&0<e.length);return ncsquared.ui.Validation.updateValid(n2j$(this.selector),t),t},ncsquared.ui.components.Select.prototype.reset=function(){this.setValue(this.defaultValue||"",!1),ncsquared.ui.Validation.updateValid(n2j$(this.selector),!0)},ncsquared.ui.components.Select.prototype.refresh=function(e){if(n2.util.isFunction(this.data)){var t=!0===n2j$(this.valueSelector).prop("disabled");n2j$(this.valueSelector).prop("disabled","disabled"),n2j$(this.spinnerSelector).removeClass("slds-hide");var n=this._getValue(),s=!0!==e||t?this.defaultValue:n,i=this.data();if(i&&n2.util.isPromise(i)){var o=this;i.done(function(e){o._addOptions(e,!0,s),o._getValue()!==n&&n2j$(o.valueSelector).trigger("change")})}else this._addOptions(i,!0,s),this._getValue()!==n&&n2j$(this.valueSelector).trigger("change");ncsquared.ui.Validation.updateValid(n2j$(this.selector),!0)}},ncsquared.ui.components.Select.prototype.focus=function(){return n2j$(this.valueSelector).focus(),!0},ncsquared.ui.components.Select.prototype.enable=function(){this._disabled=!1,n2j$(this.valueSelector).prop("disabled","")},ncsquared.ui.components.Select.prototype.disable=function(){this._disabled=!0,n2j$(this.valueSelector).prop("disabled","disabled"),ncsquared.ui.Validation.updateValid(n2j$(this.selector),!0)},ncsquared.ui.components.Select.prototype.show=function(){this._hidden=!1,n2j$(this.selector).removeClass("slds-hide")},ncsquared.ui.components.Select.prototype.hide=function(){this._hidden=!0,n2j$(this.selector).addClass("slds-hide")},ncsquared.ui.components.Select.prototype._getOptions=function(e,s){var i=n2.util.isArray(s);if(n2.util.isArray(e)){var o=[];return n2.util.each(e,function(e,t){var n;(n=n2.util.isString(t)?{label:t,value:t}:t).selected=i?-1!==s.indexOf(n.value):s===n.value,o.push(n)}),this.sort&&o.sort(function(e,t){return n2.util.compareObjectValues(e,t,"label")}),o}throw new Error("data must by an array")},ncsquared.ui.components.Select.prototype._addOptions=function(e,t,n){if(t&&n2j$(this.valueSelector+" > option.n2__select-option").remove(),n2.util.isNullOrUndefined(e))n2j$(this.spinnerSelector).addClass("slds-hide");else{var s=this._getOptions(e,n),i=n2.ui.renderTemplate(this.optionsTemplate,{options:s});n2j$(i).appendTo(this.valueSelector),this._disabled||n2j$(this.valueSelector).prop("disabled",""),n2j$(this.spinnerSelector).addClass("slds-hide")}},ncsquared.ui.components.Select.prototype._getValue=function(){var e=n2j$(this.valueSelector).val();return"n2__empty"===e?null:e},n2.cm._registerType(ncsquared.ui.components.Select.prototype._n2Type,ncsquared.ui.components.Select),ncsquared.ui.components.Tabs=function(s){n2.util.checkRequiredConfig(s,["tabs","tabs.label","tabs.selector"]),n2.util.each(s.tabs,function(e,t){t.index=e,t.selected=0===e,n2.util.isNullOrUndefined(t.icon)||(n2.util.checkRequiredConfig(t.icon,["title","icon"],"tabs["+e+"].icon"),t.icon.iconSprite=t.icon.iconSprite||"action")});var e=n2.ui.renderTemplate(this.bodyTemplate,s);n2j$(s.selector).replaceWith(e),this.selector="#"+s.id;var i=n2j$(this.selector);if(n2.util.each(s.tabs,function(e,t){var n=n2j$(t.selector);0<n.length&&i.find("div#"+s.id+"_tab-"+e+"_content").append(n)}),this.id=s.id,this.handlers={},s.handlers){var n=this;n2.util.each(s.handlers,function(e,t){n._handlersRegex.test(e)&&n2.util.isFunction(t)&&(n.handlers[e]=t)})}},ncsquared.ui.components.Tabs.prototype._n2Type="tabs",ncsquared.ui.components.Tabs.prototype._concernedKeys=[n2.key.KEY_LEFT,n2.key.KEY_RIGHT],ncsquared.ui.components.Tabs.prototype._handlersRegex=/^show$/,ncsquared.ui.components.Tabs.prototype.bodyTemplate='<div class="slds-tabs_scoped n2__component{{#cls}} {{cls}}{{/cls}}" id="{{id}}"><ul class="slds-tabs_scoped__nav" role="tablist">{{#tabs}}<li class="slds-tabs_scoped__item{{#selected}} slds-is-active{{/selected}}" role="presentation"><a class="slds-tabs_scoped__link" role="tab"{{#selected}} tabindex="0" aria-selected="true"{{/selected}} aria-controls="{{id}}_tab-{{index}}_content" data-key="{{index}}" id="{{id}}_tab-{{index}}">{{#icon}}<div class="slds-icon_container" title="{{title}}"><svg class="slds-icon slds-icon_x-small{{#iconCls}} {{iconCls}}{{/iconCls}}" aria-hidden="true"><use xlink:href="{{sldsIconsPrefix}}/{{iconSprite}}-sprite/svg/symbols.svg#{{icon}}"></use></svg><span class="slds-assistive-text">{{title}}</span></div>{{/icon}}<span class="slds-truncate{{#icon}} slds-p-left_x-small{{/icon}}" title="{{label}}">{{label}}</span></a></li>{{/tabs}}</ul>{{#tabs}}<div id="{{id}}_tab-{{index}}_content" class="slds-tabs_scoped__content {{#selected}}slds-show{{/selected}}{{^selected}}slds-hide{{/selected}}" role="tabpanel" aria-labelledby="{{id}}_tab-{{index}}"></div>{{/tabs}}</div>',ncsquared.ui.components.Tabs.prototype.init=function(){n2j$(document).on("click","div.n2__component.slds-tabs_scoped > ul > li > a.slds-tabs_scoped__link",function(){var e=n2j$(this);n2.cm.getComponent(e.closest("div.n2__component").attr("id"))._showTab(e.attr("id"))}).on("keydown","div.n2__component.slds-tabs_scoped > ul > li > a.slds-tabs_scoped__link",function(e){var t;if(-1!==ncsquared.ui.components.Tabs.prototype._concernedKeys.indexOf(e.which)&&(t=n2j$(this)).is(":focus")){var n,s=t.closest("ul"),i=s.find("li").length,o=Number(t.attr("data-key"));n=e.which===n2.key.KEY_LEFT?0===o?i-1:o-1:o+1===i?0:o+1;var l=s.closest("div.n2__component").attr("id");n2.cm.getComponent(l)._showTab(l+"_tab-"+n),e.preventDefault(),e.stopImmediatePropagation()}})},ncsquared.ui.components.Tabs.prototype.destroy=function(){n2j$(this.selector).remove()},ncsquared.ui.components.Tabs.prototype.reset=function(){this._showTab(this.id+"_tab-0",!0)},ncsquared.ui.components.Tabs.prototype.focus=function(){return n2j$(this.selector+' ul > li > a[aria-selected="true"]').focus(),!0},ncsquared.ui.components.Tabs.prototype._showTab=function(e,t){var n=n2j$(this.selector);n.find("li.slds-tabs_scoped__item").removeClass("slds-is-active"),n.find("a.slds-tabs_scoped__link").attr("tabindex",null).attr("aria-selected",null),n.find("div.slds-tabs_scoped__content").removeClass("slds-show").addClass("slds-hide");var s=n.find("a#"+e);s.closest("li.slds-tabs_scoped__item").addClass("slds-is-active"),s.attr("tabindex","0").attr("aria-selected",!0),n.find("div#"+e+"_content").addClass("slds-show").removeClass("slds-hide"),this.focus(),!t&&this.handlers.hasOwnProperty("show")&&this.handlers.show.call(this,s.find("span.slds-truncate").text())},n2.cm._registerType(ncsquared.ui.components.Tabs.prototype._n2Type,ncsquared.ui.components.Tabs),ncsquared.ui.components.Tree=function(e){n2.util.checkRequiredConfig(e,["groups","groups.items"]),e.multiselect=n2.util.getDefaultBoolean(e.multiselect,!1),this.multiselect=e.multiselect,this.handlers={};var s=this,i=!1;n2.util.each(e.groups,function(e,t){n2.util.checkRequiredConfig(t,["items.label"],"group["+e+"]");var n=s._setupItems(t.items,1,e,-1,i);i=i||n.anyChildSelected,t.groupIndex=e}),0<e.groups.length&&0<e.groups[0].items.length&&!i&&(e.groups[0].items[0].focused=!0);var t=n2.ui.renderTemplate(this.bodyTemplate,e,{items:this.itemsTemplate});n2j$(e.selector).replaceWith(t),this.selector="#"+e.id},ncsquared.ui.components.Tree.prototype._n2Type="tree",ncsquared.ui.components.Tree.prototype._concernedKeys=[n2.key.KEY_ENTER,n2.key.KEY_SPACE,n2.key.KEY_UP,n2.key.KEY_DOWN,n2.key.KEY_LEFT,n2.key.KEY_RIGHT],ncsquared.ui.components.Tree.prototype.bodyTemplate='<div class="slds-tree_container slds-scrollable_y n2__component n2__tree{{#multiselect}} n2__tree-multi-select{{/multiselect}}{{#cls}} {{cls}}{{/cls}}" id="{{id}}">{{#groups}}{{#heading}}<h4 class="slds-text-title_caps" id="{{id}}_tree_group-{{groupIndex}}-heading">{{heading}}</h4>{{/heading}}<ul class="slds-tree" role="tree" aria-labelledby="{{id}}_tree_group-{{groupIndex}}-heading">{{> items}}</ul>{{/groups}}</div>',ncsquared.ui.components.Tree.prototype.itemsTemplate='{{#items}}<li{{#focused}} tabindex="0"{{/focused}}{{#selected}} aria-selected="true"{{/selected}} role="treeitem" aria-level="{{level}}"{{#hasItems}} aria-expanded="{{expanded}}"{{/hasItems}} class="n2__tree-item {{#hasItems}}n2__tree-item-parent{{/hasItems}}{{^hasItems}}n2__tree-item-leaf{{/hasItems}}{{#disabled}} n2__tree-item-disabled{{/disabled}}" id="{{id}}_tree_group-{{groupIndex}}-item-{{runningIndex}}" data-key="{{groupIndex}}-{{runningIndex}}"><div class="slds-tree__item"><button tabindex="-1" title="Expand {{label}}" class="slds-button slds-button_icon slds-m-right_x-small{{^hasItems}} slds-is-disabled{{/hasItems}}" aria-hidden="true"><svg class="slds-button__icon slds-button__icon_small" aria-hidden="true"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#chevronright" /></svg><span class="slds-assistive-text">Expand {{label}}</span></button><span class="slds-has-flexi-truncate"><span title="{{label}}" class="slds-tree__item-label slds-truncate">{{label}}</span></span></div>{{#hasItems}}<ul role="group">{{> items}}</ul>{{/hasItems}}</li>{{/items}}',ncsquared.ui.components.Tree.prototype.init=function(){var i=!1;n2j$(document).on("keydown",function(e){i||e.which!==n2.key.KEY_CTRL||(i=!0)}).on("keyup",function(e){i&&e.which===n2.key.KEY_CTRL&&(i=!1)}).on("click","div.n2__tree li.n2__tree-item-parent",function(e){var t=n2j$(this);t.closest("ul.slds-tree").find("li.n2__tree-item").attr("tabindex",null),t.attr("aria-expanded","true"===t.attr("aria-expanded")?"false":"true").attr("tabindex","0"),e.preventDefault(),e.stopImmediatePropagation()}).on("click","div.n2__tree li.n2__tree-item-leaf",function(e){var t=n2j$(this);n2.cm.getComponent(t.closest("div.n2__tree").attr("id"))._selectItem(t,i),e.preventDefault(),e.stopImmediatePropagation()}).on("keydown","div.n2__tree li.n2__tree-item",function(e){if(-1!==ncsquared.ui.components.Tree.prototype._concernedKeys.indexOf(e.which)){var t=n2j$(this),n=t.closest("div.n2__tree");switch(e.which){case n2.key.KEY_ENTER:t.hasClass("n2__tree-item-leaf")&&n2.cm.getComponent(n.attr("id"))._fireAction(t.attr("data-key"),"true"===t.attr("aria-selected"));break;case n2.key.KEY_SPACE:t.hasClass("n2__tree-item-leaf")&&n2.cm.getComponent(n.attr("id"))._selectItem(t,i);break;case n2.key.KEY_DOWN:n2.cm.getComponent(n.attr("id"))._moveDown(t,i);break;case n2.key.KEY_UP:n2.cm.getComponent(n.attr("id"))._moveUp(t,i);break;case n2.key.KEY_LEFT:if(t.hasClass("n2__tree-item-parent")&&"true"===t.attr("aria-expanded"))t.attr("aria-expanded","false");else{var s=t.parent().closest("li.n2__tree-item-parent");0<s.length&&"true"===s.attr("aria-expanded")&&(s.attr("aria-expanded","false"),n2.cm.getComponent(n.attr("id"))._selectItem(s,i,!0))}break;case n2.key.KEY_RIGHT:"false"===t.attr("aria-expanded")&&(t.attr("aria-expanded","true"),n2.cm.getComponent(n.attr("id"))._moveDown(t,i))}e.preventDefault(),e.stopImmediatePropagation()}})},ncsquared.ui.components.Tree.prototype.destroy=function(){n2j$(this.selector).remove()},ncsquared.ui.components.Tree.prototype.focus=function(){return n2j$(this.selector+' li.n2__tree-item[tabindex="0"]').focus(),!0},ncsquared.ui.components.Tree.prototype._setupItems=function(e,s,i,o,l){var r=this,a=!1;return n2.util.each(e,function(e,t){if(t.index=e,t.level=s,o+=1,t.runningIndex=o,t.hasOwnProperty("items")){var n=r._setupItems(t.items,s+1,i,t.runningIndex,l||a);o=n.runningIndex,a=n.anyChildSelected||a,t.expanded=t.expanded||n.anyChildSelected,t.hasItems=!0,t.selected=!1,t.disabled=!1}else t.hasItems=!1,n2.util.isFunction(t.action)&&(r.handlers[i+"-"+t.runningIndex]=t.action);delete t.action,t.selected&&(r.multiselect||!l&&!a?(l||a||(t.focused=!0),a=!0):t.selected=!1)}),{anyChildSelected:a,runningIndex:o}},ncsquared.ui.components.Tree.prototype._moveDown=function(e,t){var n=n2j$(this.selector+" ul.slds-tree > li, "+this.selector+' li[aria-expanded="true"] > ul > li'),s=n.index(e);n.length>s+1&&this._selectItem(n.eq(s+1),t,!0)},ncsquared.ui.components.Tree.prototype._moveUp=function(e,t){var n=n2j$(this.selector+" ul.slds-tree > li, "+this.selector+' li[aria-expanded="true"] > ul > li'),s=n.index(e);0<n.length&&0<s&&this._selectItem(n.eq(s-1),t,!0)},ncsquared.ui.components.Tree.prototype._selectItem=function(e,t,n){var s="true"===e.attr("aria-selected"),i=n2j$(this.selector+" li.n2__tree-item"),o=!e.hasClass("n2__tree-item-disabled");o&&(!n&&!this.multiselect||!t&&this.multiselect)&&i.attr("aria-selected",null),i.attr("tabindex",null),e.attr("tabindex","0"),e.hasClass("n2__tree-item-leaf")&&o&&(!n||!t&&this.multiselect)&&(e.attr("aria-selected",s?null:"true"),n||this._fireAction(e.attr("data-key"),!s)),e.focus()},ncsquared.ui.components.Tree.prototype._fireAction=function(e,t){this.handlers.hasOwnProperty(e)&&this.handlers[e](t)},n2.cm._registerType(ncsquared.ui.components.Tree.prototype._n2Type,ncsquared.ui.components.Tree),ncsquared.ui.wrappers.DatePeriodPicker=function(e){var t,n,s=n2.ui.renderTemplate(this.bodyTemplate,e);if(n2j$(e.selector).replaceWith(s),!n2.util.isNullOrUndefined(e.defaultValue))if(-1===e.defaultValue.indexOf(":"))t=e.defaultValue;else{var i=e.defaultValue.split(":");t=i[0],n=i[1]}var o,l=n2.util.getDefaultBoolean(e.required,!1),r=e.requiredError||"This field is required",a=n2.util.getDefaultBoolean(e.includeFiscalPeriods,!0),d=n2.util.map(n2.const.SF.DATE_PERIODS,function(e,t){return{label:e,value:t}});a&&n2.util.each(n2.const.SF.DATE_PERIODS_FISCAL,function(e,t){d.push({label:t,value:e})}),e.handlers&&n2.util.each(e.handlers,function(e,t){n2.util.isFunction(t)&&"change"===e&&(o=t)});var c=this;this.selectPeriod=n2.cm.addComponent("select",{id:e.id+"_select",selector:"#"+e.id+"_select",defaultValue:t,required:l,requiredError:r,data:d,handlers:{change:function(e){n2.util.isNullOrUndefined(e)||-1===e.indexOf("_N_")?n2j$(c.inputSelector).addClass("slds-hidden"):n2j$(c.inputSelector).removeClass("slds-hidden"),o&&o.call(c,c.getValue())}},cls:"slds-col slds-col_padded_right slds-size_2-of-3"},!0),this.inputPeriod=n2.cm.addComponent("input",{id:e.id+"_input",selector:"#"+e.id+"_input",type:"number",defaultValue:n,required:!0,requiredError:"A number is required",validation:function(e){return!!ncsquared.ui.wrappers.DatePeriodPicker.prototype._periodRegex.test(e)||"Needs a whole number > 0"},cls:"slds-col slds-size_1-of-3"+(n2.util.isNullOrUndefined(n)?" slds-hidden":""),handlers:{change:function(){o&&o.call(c,c.getValue())}}},!0),this.selector="#"+e.id,this.inputSelector=this.selector+"_input"},ncsquared.ui.wrappers.DatePeriodPicker.prototype._n2Type="date-period-picker",ncsquared.ui.wrappers.DatePeriodPicker.prototype._periodRegex=/^[1-9][0-9]*$/,ncsquared.ui.wrappers.DatePeriodPicker.prototype.bodyTemplate='<div class="slds-grid n2__component n2__date-period-picker" id="{{id}}"><span id="{{id}}_select"></span><span id="{{id}}_input"></span></div>',ncsquared.ui.wrappers.DatePeriodPicker.prototype.destroy=function(){n2.cm.destroyComponent(this.selectPeriod),n2.cm.destroyComponent(this.inputPeriod),n2j$(this.selector).remove()},ncsquared.ui.wrappers.DatePeriodPicker.prototype.getValue=function(e){var t=n2.cm.getValue(this.selectPeriod,e);if(!n2.util.isNullOrUndefined(t)&&!n2j$(this.inputSelector).hasClass("slds-hidden")){var n=n2.cm.getValue(this.inputPeriod,e);return n2.util.isNumber(n)?t+":"+n:null}return t},ncsquared.ui.wrappers.DatePeriodPicker.prototype.setValue=function(e){if(n2.util.isNullOrUndefined(e)||-1===e.indexOf(":"))n2.cm.setValue(this.selectPeriod,e);else{var t=e.split(":");n2.cm.setValue(this.selectPeriod,t[0]),n2.cm.setValue(this.inputPeriod,t[1])}},ncsquared.ui.wrappers.DatePeriodPicker.prototype.validate=function(){var e=n2.cm.validate(this.selectPeriod),t=!0;return n2j$(this.inputSelector).hasClass("slds-hidden")||(t=n2.cm.validate(this.inputPeriod)),Boolean(e&&t)},ncsquared.ui.wrappers.DatePeriodPicker.prototype.reset=function(){n2.cm.reset(this.selectPeriod),n2.cm.reset(this.inputPeriod)},ncsquared.ui.wrappers.DatePeriodPicker.prototype.focus=function(){return n2.cm.focus(this.selectPeriod)},n2.cm._registerType(ncsquared.ui.wrappers.DatePeriodPicker.prototype._n2Type,ncsquared.ui.wrappers.DatePeriodPicker),ncsquared.ui.wrappers.LogicFilters=function(s){n2.util.checkRequiredConfig(s,["data:function","dataFieldsList:function","dataValuesList:function"]),s.includeFiscalPeriods=n2.util.getDefaultBoolean(s.includeFiscalPeriods,!0),s.maxRows=n2.util.isNumber(s.maxRows)?s.maxRows:20,s.required=n2.util.getDefaultBoolean(s.required,!1);var e=n2.ui.renderTemplate(this.bodyTemplate,s);n2j$(s.selector).replaceWith(e);var i,t=n2.ui.renderTemplate(this.deleteTemplate),o=this,n=s.dataFieldsList;this.fieldsListResponse=null,s.dataFieldsList=function(){return n2.util.isNullOrUndefined(o.fieldsListResponse)&&(o.fieldsListResponse=n.call(o),o.fieldsAndTypes={},n2.util.isPromise(o.fieldsListResponse)?o.fieldsListResponse.done(function(e){n2.util.each(e,function(e,t){o.fieldsAndTypes[t.value]=t.type})}):n2.util.each(o.fieldsListResponse,function(e,t){o.fieldsAndTypes[t.value]=t.type})),o.fieldsListResponse},this.required=s.required,this.maxRows=s.maxRows,this.selector="#"+s.id,this.inputLogicWrapperSelector=this.selector+"_input-logic-wrapper",this._inRefresh=!1,s.handlers&&n2.util.each(s.handlers,function(e,t){n2.util.isFunction(t)&&"change"===e&&(i=function(e){o._inRefresh||t.call(this,e)})}),1<s.maxRows&&(this.inputLogic=n2.cm.addComponent("input",{id:s.id+"_input-logic",selector:"#"+s.id+"_input-logic",label:"Filter logic",validation:function(e){return!!n2.util.isNullOrUndefined(o.dataTableFilter)||o._validateLogic(e,o.dataTableFilter.getRowCount())},help:"Determine how the filter rows should be grouped using AND, OR and parenthesis '(' ')'. By default all rows will be grouped using AND so if you want all rows to be required then you do not need filter logic.",cls:"slds-size_1-of-1 slds-large-size_2-of-3 slds-x-large-size_1-of-2",handlers:{change:i}},!0)),this.dataTableFilter=n2.cm.addComponent("data-table",{id:s.id+"_table",selector:"#"+s.id+"_table",paging:!1,rowNumbers:!0,columns:[{name:"name",title:"Field",sortable:!1,component:{type:"select",config:{required:!0,data:s.dataFieldsList,handlers:{change:function(e){n2.cm.setValue(n2.cm.getTableComponentOnRow(this,1),o.fieldsAndTypes[e]);var t=n2.cm.getTableComponentOnRow(this,2);n2.cm.setValue(t,"",!1),o._doRefresh(t,!0),n2.cm.getTableComponentOnRow(this,3).hideComponents(),i&&i.call(this,e)},load:function(e){n2.cm.setValue(n2.cm.getTableComponentOnRow(this,1),o.fieldsAndTypes[e]),o._doRefresh(n2.cm.getTableComponentOnRow(this,2))}}}}},{name:"type",title:"",sortable:!1,width:"0",component:{type:"select",config:{required:!0,data:n2.const.SF.FIELDS_TYPES,cls:"slds-hide"}}},{name:"op",title:"Operator",sortable:!1,component:{type:"select",config:{required:!0,sort:!1,data:function(){var e=o.fieldsAndTypes[n2.cm.getValue(n2.cm.getTableComponentOnRow(this,0),!0)];return n2.sf.util.getOperatorsForFieldType(e,s.excludedOperators)},handlers:{change:function(e){var t=n2.cm.getTableComponentOnRow(this,3),n=n2.cm.getValue(n2.cm.getTableComponentOnRow(this,1),!0);o._showSwitchableComponent(t,o._determineSwitchableComponent(e,n),!0),i&&i.call(this,e)},load:function(e){var t=n2.cm.getTableComponentOnRow(this,3),n=n2.cm.getValue(n2.cm.getTableComponentOnRow(this,1),!0);o._showSwitchableComponent(t,o._determineSwitchableComponent(e,n),!1)}}}}},{name:"val",title:"Value",sortable:!1,component:{type:"switchable",config:{defaultShown:function(){var e=n2.cm.getValue(n2.cm.getTableComponentOnRow(this,1),!0),t=n2.cm.getValue(n2.cm.getTableComponentOnRow(this,2),!0);return o._determineSwitchableComponent(t,e)},components:[{type:"select",config:{required:!0,data:[{label:"False",value:"false"},{label:"True",value:"true"}],handlers:{change:i}}},{type:"input",config:{cls:"n2__required-padding",handlers:{change:i}}},{type:"input",config:{required:!0,handlers:{change:i}}},{type:"input",config:{type:"number",cls:"n2__required-padding",handlers:{change:i}}},{type:"input",config:{type:"number",required:!0,requiredError:"This field is required as a number",handlers:{change:i}}},{type:"select",config:{data:function(){var e=n2.cm.getValue(n2.cm.getTableComponentOnRow(this,0),!0),t=o.fieldsAndTypes[e],n=n2.cm.getValue(n2.cm.getTableComponentOnRow(this,2),!0);return s.dataValuesList(e,t,n)},cls:"n2__required-padding",handlers:{change:i}}},{type:"select",config:{required:!0,multiselect:!0,data:function(){var e=n2.cm.getValue(n2.cm.getTableComponentOnRow(this,0),!0),t=o.fieldsAndTypes[e],n=n2.cm.getValue(n2.cm.getTableComponentOnRow(this,2),!0);return s.dataValuesList(e,t,n)},handlers:{change:i}}},{type:"date-period-picker",config:{includeFiscalPeriods:s.includeFiscalPeriods,handlers:{change:i}}},{type:"date-period-picker",config:{required:!0,includeFiscalPeriods:s.includeFiscalPeriods,handlers:{change:i}}},{type:"pill-list",config:{required:!0,handlers:{change:i}}}]}}},{name:"",title:"",sortable:!1,format:function(){return t},formatTooltip:function(){return"Delete filter"},html:!0,width:"3rem",action:function(e,t){o.dataTableFilter.removeRow(t),o._checkRowCount(),o._updateLogicInput(!1,t),i&&i.call(o.dataTableFilter)}}],data:function(){var n=arguments[4];s.data(function(e){n2.util.checkRequiredConfig(e,["filters:array"]);var t=e.filters;t.length>s.maxRows?t.splice(s.maxRows):0===t.length&&s.required&&t.push({}),n(t),!n2.util.isNullOrUndefined(e.logic)&&1<s.maxRows&&o.inputLogic.setValue(e.logic),o._checkRowCount()})},cls:"n2__logic-filters slds-no-row-hover"+(s.required?" n2__logic-filters-required":"")},!0),(!s.required||1<s.maxRows)&&(this.btnAdd=n2.cm.addComponent("button",{id:s.id+"_btn-add",selector:"#"+s.id+"_btn-add",text:"Add Filter Row",disabled:!0,handlers:{click:function(){o.dataTableFilter.addRow({});var e=o.dataTableFilter.getRowCount(),t=o.dataTableFilter.getComponentsOnRow(e);0<t.length&&n2.cm.focus(t[0]),o._checkRowCount(),o._updateLogicInput(!0,e),i&&i.call(this)}}},!0),this._checkRowCount()),1<s.maxRows&&this.inputLogic.validate()},ncsquared.ui.wrappers.LogicFilters.prototype._n2Type="logic-filters",ncsquared.ui.wrappers.LogicFilters.prototype._toggleTypes=/^BOOLEAN$/,ncsquared.ui.wrappers.LogicFilters.prototype._numberTypes=/^DOUBLE$|^CURRENCY$|^PERCENT$|^INTEGER$/,ncsquared.ui.wrappers.LogicFilters.prototype._pickerTypes=/^PICKLIST$|^REFERENCE$/,ncsquared.ui.wrappers.LogicFilters.prototype._multiPickerTypes=/^MULTIPICKLIST$/,ncsquared.ui.wrappers.LogicFilters.prototype._dateTypes=/^DATE$|^DATETIME$/,ncsquared.ui.wrappers.LogicFilters.prototype._equalOperators=/^equals$|^not equal$/,ncsquared.ui.wrappers.LogicFilters.prototype._componentBoolean=1,ncsquared.ui.wrappers.LogicFilters.prototype._componentText=2,ncsquared.ui.wrappers.LogicFilters.prototype._componentTextRequired=3,ncsquared.ui.wrappers.LogicFilters.prototype._componentNumber=4,ncsquared.ui.wrappers.LogicFilters.prototype._componentNumberRequired=5,ncsquared.ui.wrappers.LogicFilters.prototype._componentSingleSelect=6,ncsquared.ui.wrappers.LogicFilters.prototype._componentMultiSelect=7,ncsquared.ui.wrappers.LogicFilters.prototype._componentDate=8,ncsquared.ui.wrappers.LogicFilters.prototype._componentDateRequired=9,ncsquared.ui.wrappers.LogicFilters.prototype._componentPills=10,ncsquared.ui.wrappers.LogicFilters.prototype._wordRegex=/\b/,ncsquared.ui.wrappers.LogicFilters.prototype._spaceRegex=/\s/g,ncsquared.ui.wrappers.LogicFilters.prototype._joinRegex=/^and$|^or$/i,ncsquared.ui.wrappers.LogicFilters.prototype._openBracketRegex=/^\(+$/g,ncsquared.ui.wrappers.LogicFilters.prototype._closeBracketRegex=/^\)+$/g,ncsquared.ui.wrappers.LogicFilters.prototype.bodyTemplate='<div class="slds-form-element__group n2__component{{#cls}} {{cls}}{{/cls}}" id="{{id}}">{{#label}}<label class="slds-form-element__label" for="{{id}}_table">{{#required}}<abbr title="Required" class="slds-required">*</abbr> {{/required}}{{label}}</label>'+ncsquared.ui.Help.triggerTemplate+'{{/label}}<div class="slds-form-element__row"><span id="{{id}}_table"></span></div><div class="slds-form-element__row slds-m-top_small"><span id="{{id}}_btn-add"></span></div><div class="slds-form-element__row slds-m-top_small" id="{{id}}_input-logic-wrapper"><span id="{{id}}_input-logic"></span></div>'+ncsquared.ui.Help.popupTemplate+"</div>",ncsquared.ui.wrappers.LogicFilters.prototype.deleteTemplate='<svg class="slds-icon slds-icon_x-small slds-icon-text-error"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="{{sldsIconsPrefix}}/utility-sprite/svg/symbols.svg#close" /></svg>',ncsquared.ui.wrappers.LogicFilters.prototype.destroy=function(){n2.cm.destroyComponent(this.dataTableFilter),n2.cm.destroyComponent(this.btnAdd),n2j$(this.selector).remove()},ncsquared.ui.wrappers.LogicFilters.prototype.getValue=function(){if(this.required&&0===this.dataTableFilter.getRowCount())return null;var e=n2.cm.getValue(this.dataTableFilter);if(!n2.util.isNullOrUndefined(e)){n2.util.each(e,function(e,t){delete t.key,n2.util.isArray(t.val)&&(t.val=t.val.join(";"))});var t={filters:e};return 1<this.maxRows&&(t.logic=n2.cm.getValue(this.inputLogic)),t}return null},ncsquared.ui.wrappers.LogicFilters.prototype.validate=function(){return(!this.required||0!==this.dataTableFilter.getRowCount())&&n2.cm.validate(this.dataTableFilter)},ncsquared.ui.wrappers.LogicFilters.prototype.reset=function(){this.fieldsListResponse=null,n2.cm.reset(this.dataTableFilter)},ncsquared.ui.wrappers.LogicFilters.prototype.refresh=function(){this.fieldsListResponse=null,n2.cm.refresh(this.dataTableFilter)},ncsquared.ui.wrappers.LogicFilters.prototype.focus=function(){var e=this.dataTableFilter.getComponentsOnRow(this.dataTableFilter.getRowCount());return!!(e&&0<e.length)&&n2.cm.focus(e[0])},ncsquared.ui.wrappers.LogicFilters.prototype._checkRowCount=function(){if(!n2.util.isNullOrUndefined(this.dataTableFilter)&&!n2.util.isNullOrUndefined(this.btnAdd)){var e=this.dataTableFilter.getRowCount();e>=this.maxRows?this.btnAdd.disable():this.btnAdd.enable(),1<this.maxRows&&(1<e?n2j$(this.inputLogicWrapperSelector).removeClass("slds-hide"):n2j$(this.inputLogicWrapperSelector).addClass("slds-hide"))}},ncsquared.ui.wrappers.LogicFilters.prototype._updateLogicInput=function(e,t){if(1<this.maxRows){var n=this.inputLogic.getValue(!0);if(0<n.length||e&&1===t){var s=this._getUpdatedLogic(n,e,t);this.inputLogic.setValue(s)}}},ncsquared.ui.wrappers.LogicFilters.prototype._getUpdatedLogic=function(e,t,n){if(t)e+=(0===e.trim().length?"":" AND ")+n;else{var s=e.split(ncsquared.ui.wrappers.LogicFilters.prototype._wordRegex),i=ncsquared.ui.wrappers.LogicFilters.prototype._spaceRegex;s=n2.util.map(s,function(e){if(0<(e=e.replace(i,"")).length)return e}),s=ncsquared.ui.wrappers.LogicFilters.prototype._updateLogicParts(s,n),e=(s=ncsquared.ui.wrappers.LogicFilters.prototype._cleanUpdatedLogicParts(s,n)).join(" ").replace("( ","(").replace(" )",")")}return e},ncsquared.ui.wrappers.LogicFilters.prototype._updateLogicParts=function(e,t){var n=e.indexOf(String(t)),s=ncsquared.ui.wrappers.LogicFilters.prototype._joinRegex;return 0===n?1===e.length?e=[]:s.test(e[n+1])?e.splice(n,2):e.splice(n,1):0<n&&(e.length>n+1&&s.test(e[n+1])?e.splice(n,2):s.test(e[n-1])?e.splice(n-1,2):e.splice(n,1)),e},ncsquared.ui.wrappers.LogicFilters.prototype._cleanUpdatedLogicParts=function(n,s){var i=null;return n2.util.map(n,function(e,t){return i===t?i=null:n2.util.isNumber(e)&&Number(e)>s?String(Number(e)-1):"("===e&&n.length>t+2&&")"===n[t+2]?(i=t+2,null):e})},ncsquared.ui.wrappers.LogicFilters.prototype._validateLogic=function(e,n){if(0<e.length){for(var t=e.split(ncsquared.ui.wrappers.LogicFilters.prototype._wordRegex),s=0,i={},o=1;o<=n;o++)i[String(o)]={};var l,r=!0,a=!1,d=ncsquared.ui.wrappers.LogicFilters.prototype._spaceRegex,c=ncsquared.ui.wrappers.LogicFilters.prototype._joinRegex,u=ncsquared.ui.wrappers.LogicFilters.prototype._openBracketRegex,p=ncsquared.ui.wrappers.LogicFilters.prototype._closeBracketRegex,h=!1,_=!1;if(n2.util.each(t,function(e,t){if(0<(t=t.replace(d,"")).length)if(u.test(t))s+=t.length;else if(p.test(t))s-=t.length;else if(r&&n2.util.isNumber(t)){if(a=!(r=!1),Number(t)>n||Number(t)<=0)return _=t,!1;delete i[t]}else{if(!a||!c.test(t))return!(h=!0);a=!(r=!0)}}),h||r)return"The filter logic must contain the filter condition row numbers separated by either an 'AND' or an 'OR'";if(!1!==_)return"The filter logic contains the filter condition "+_+" which is not one of the condition row numbers";if(0<(l=Object.keys(i)).length)return"All filter condition row numbers must be included in the filter logic: "+l.join(", ")+(1===l.length?" is":" are")+" missing";if(0!==s)return"There is a mismatch between the number of opening and closing parenthesis"}return!0},ncsquared.ui.wrappers.LogicFilters.prototype._determineSwitchableComponent=function(e,t){return n2.util.isNullOrUndefined(e)?0:this._toggleTypes.test(t)?this._componentBoolean:this._numberTypes.test(t)?this._equalOperators.test(e)?this._componentNumber:this._componentNumberRequired:this._pickerTypes.test(t)?"in"===e?this._componentMultiSelect:this._componentSingleSelect:this._multiPickerTypes.test(t)?this._componentMultiSelect:this._dateTypes.test(t)?this._equalOperators.test(e)?this._componentDate:this._componentDateRequired:"in"===e?this._componentPills:this._equalOperators.test(e)?this._componentText:this._componentTextRequired},ncsquared.ui.wrappers.LogicFilters.prototype._showSwitchableComponent=function(e,t,n){n2.util.isNullOrUndefined(e)||(0===t?e.hideComponents():(e.showComponent(t),this._doRefresh(e,n)))},ncsquared.ui.wrappers.LogicFilters.prototype._doRefresh=function(e,t){var n=this._inRefresh;this._inRefresh=!0,n2.cm.refresh(e,t),this._inRefresh=n},n2.cm._registerType(ncsquared.ui.wrappers.LogicFilters.prototype._n2Type,ncsquared.ui.wrappers.LogicFilters),ncsquared.ui.wrappers.Switchable=function(n){if(n2.util.checkRequiredConfig(n,["components","components.type","components.config"]),this.currentIndex=-1,n2.util.isNumber(n.defaultShown))this.currentIndex=n.defaultShown-1;else if(n2.util.isFunction(n.defaultShown)){var e=n.defaultShown.call(this);n2.util.isNumber(e)&&(this.currentIndex=e-1)}0<=this.currentIndex&&this.currentIndex+1>n.components.length&&(this.currentIndex=-1),n.defaultValueDelimiter=n.defaultValueDelimiter||";";var s=this,i=[];n.placeholders=[],n2.util.each(n.components,function(e,t){t.config.id=n.id+"-"+e,t.config.selector="#"+n.id+"-"+e+"-component",n2.util.isNullOrUndefined(t.config.defaultValue)&&!n2.util.isNullOrUndefined(n.defaultValue)&&(n2.util.isArray(n.defaultValue)||"pill-list"!==t.type&&!0!==t.config.multiselect?t.config.defaultValue=n.defaultValue:t.config.defaultValue=n.defaultValue.split(n.defaultValueDelimiter)),i.push(t),n.placeholders.push({id:t.config.id,shown:s.currentIndex===e})}),delete n.components;var t=n2.ui.renderTemplate(this.bodyTemplate,n);n2j$(n.selector).replaceWith(t),this.components=[],n2.util.each(i,function(e,t){s.components.push(n2.cm.addComponent(t.type,t.config,!0))}),this.selector="#"+n.id},ncsquared.ui.wrappers.Switchable.prototype._n2Type="switchable",ncsquared.ui.wrappers.Switchable.prototype.bodyTemplate='<div class="n2__component n2__switchable" id="{{id}}">{{#placeholders}}<div id="{{id}}-wrapper" class="n2__switchable-wrapper{{^shown}} slds-hide{{/shown}}"><div id="{{id}}-component"></div></div>{{/placeholders}}</div>',ncsquared.ui.wrappers.Switchable.prototype.destroy=function(){n2.util.each(this.components,function(e,t){n2.cm.destroyComponent(t)}),n2j$(this.selector).remove()},ncsquared.ui.wrappers.Switchable.prototype.getValue=function(e){return-1!==this.currentIndex?n2.cm.getValue(this.components[this.currentIndex],e):null},ncsquared.ui.wrappers.Switchable.prototype.setValue=function(e,t){-1!==this.currentIndex&&n2.cm.setValue(this.components[this.currentIndex],e,t)},ncsquared.ui.wrappers.Switchable.prototype.validate=function(){return-1===this.currentIndex||n2.cm.validate(this.components[this.currentIndex])},ncsquared.ui.wrappers.Switchable.prototype.reset=function(){-1!==this.currentIndex&&n2.cm.reset(this.components[this.currentIndex])},ncsquared.ui.wrappers.Switchable.prototype.refresh=function(e){-1!==this.currentIndex&&n2.cm.refresh(this.components[this.currentIndex],e)},ncsquared.ui.wrappers.Switchable.prototype.focus=function(){return-1!==this.currentIndex&&n2.cm.focus(this.components[this.currentIndex])},ncsquared.ui.wrappers.Switchable.prototype.showComponent=function(e){0<e&&e<=this.components.length&&(this.hideComponents(),this.currentIndex=e-1,n2j$(this.selector+" div.n2__switchable-wrapper").eq(this.currentIndex).removeClass("slds-hide"))},ncsquared.ui.wrappers.Switchable.prototype.hideComponents=function(){n2j$(this.selector+" div.n2__switchable-wrapper").addClass("slds-hide")},n2.cm._registerType(ncsquared.ui.wrappers.Switchable.prototype._n2Type,ncsquared.ui.wrappers.Switchable);